import { Component, Input, ViewEncapsulation, Output, EventEmitter, ViewChild } from '@angular/core';
import { FormGroup } from '@angular/forms';
import { StringUtils, FieldUtils, CollectionUtils, FormUtils } from '../../../utility';
import { Router } from '@angular/router';
import { quillConfiguration } from './html.editor.configuration';
import { AbilityUtils } from '../../../utility/ability.utility';
import { Ability } from '@casl/ability';
export class FieldErrorStateMatcher {
    isErrorState(control, form) {
        //    console.log("111");
        return !!(control && control.invalid && (control.dirty || control.touched));
    }
}
export class FieldComponent {
    constructor(router, ability) {
        this.router = router;
        this.ability = ability;
        this.onDependentFieldChange = new EventEmitter();
        this.onFieldChange = new EventEmitter();
        this.onFormChange = new EventEmitter();
        this.onButtonClick = new EventEmitter();
        this.ellipsisRequired = false;
        this.editorOptions = quillConfiguration;
        this.onListSelectionFuc = null;
        this.listOptions = null;
        this.dateRange = false;
        this.minLengthForTrigger = 3;
        this.highlightAutoCompleteText = '';
        this.onShowAllOptions = () => {
            this.showLess = this.field.options.length;
        };
        this.autoCompleteInputHasValue = false;
        this.onListImageLoadError = ($event) => {
            $event.target.src = this.field.defaultImageUrl;
        };
        AbilityUtils.setAbility(this.ability);
    }
    get displayMode() {
        return this._displayMode;
    }
    set displayMode(_displayMode) {
        this._displayMode = _displayMode;
        this.isFieldDisabled = this.fieldDisabled();
    }
    isEditorErrorState() {
        return !!(this.fieldControl && this.fieldControl.invalid && (this.fieldControl.dirty || this.fieldControl.touched));
    }
    ngOnInit() {
        if (this.field.placeholder == undefined) {
            this.field.placeholder = "";
        }
        if (this.field.ellipsis && this.field.ellipsis > 0) {
            this.charLimit = this.field.ellipsis;
        }
        this.matcher = new FieldErrorStateMatcher();
        this.getValue(this.field, this.value);
        this.isRequired = this.required();
        this.isFieldDisabled = this.fieldDisabled();
        this.hasFieldNavigate = this.fieldNavigate();
        this.hasHintIcon = this.displayHintIcon();
        this.setMaxLength();
        this.setNumberMinMax();
        this.setAppearance();
        this.setOptionInDisplay();
        this.getImagePath(this.field);
        this.setRows();
        this.setHeight();
        this.setClear();
        this.setAsBubble();
        this.setTextAlign();
        this.setAddMoreDisplayInColumn();
        this.setMinLengthForTrigger();
        //    this.autocompleteInit();
        this.setDisplayTemplate();
        this.setCalendar();
        this.setShowLess();
        this.textClearButton = this.setTextClearButton('fieldTextClearBtn', "Clear Text", "cancel", null);
        if (this.field.navigate) {
            this.routeToButton = this.setTextClearButton('fieldRouteToBtn', this.field.navigate.text, this.field.navigate.icon ? this.field.navigate.icon : "call_made", this.field.navigate.routeTo);
        }
        this.helpModalButton = this.setHelpButton('helpCloseButton', 'Close', 'close');
        this.plusButton = this.addRemoveButton("add_field" /* ADD_FIELD */, "Add", "add");
        this.minusButton = this.addRemoveButton("remove_field" /* REMOVE_FIELD */, "Minus", "remove");
    }
    setDisplayTemplate() {
        if ((this.field.type == "RADIO" /* RADIO */ || this.field.type == "CHECKBOX" /* CHECKBOX */) && StringUtils.isEmpty(this.field.displayTemplate)) {
            this.field.displayTemplate = "CLASSIC" /* CLASSIC */;
        }
    }
    setAddMoreDisplayInColumn() {
        if (this.isAddMore) {
            if (this.device == 'desktop') {
                if (this.displayInColumns < 6) {
                    this.addMoreFieldDisplayInColumns = 10;
                    this.addMoreButtonDisplayInColumns = 2;
                }
                else {
                    this.addMoreFieldDisplayInColumns = 11;
                    this.addMoreButtonDisplayInColumns = 1;
                }
            }
            if (this.device == 'tablet') {
                if (this.displayInColumns < 6) {
                    this.addMoreFieldDisplayInColumns = 6;
                    this.addMoreButtonDisplayInColumns = 2;
                }
                else {
                    this.addMoreFieldDisplayInColumns = 7;
                    this.addMoreButtonDisplayInColumns = 1;
                }
            }
            if (this.device == 'mobile') {
                if (this.displayInColumns < 3) {
                    this.addMoreFieldDisplayInColumns = 3;
                    this.addMoreButtonDisplayInColumns = 2;
                }
                else {
                    this.addMoreFieldDisplayInColumns = 3;
                    this.addMoreButtonDisplayInColumns = 1;
                }
            }
        }
    }
    setMinLengthForTrigger() {
        this.minLengthForTrigger = this.field.minLengthForTrigger ? this.field.minLengthForTrigger : 3;
    }
    setRows() {
        this.rows = this.field.rows ? this.field.rows : 1;
    }
    setHeight() {
        this.height = this.field.height ? this.field.height : 300;
    }
    setAppearance() {
        this.appearance = this.field.appearance ? this.field.appearance : 'standard';
    }
    setAsBubble() {
        this.asBubble = this.field.asBubble ? this.field.asBubble : false;
        this.bubbleColor = this.field.bubbleColor ? this.field.bubbleColor : "" /* DEFAULT */;
    }
    setTextAlign() {
        this.textAlign = this.field.textAlign ? this.field.textAlign : "left" /* LEFT */;
    }
    setMaxLength() {
        this.maxLength = this.field.maxLength ? this.field.maxLength : 1000000;
    }
    setNumberMinMax() {
        this.min = this.field.min ? this.field.min : null;
        this.max = this.field.max ? this.field.max : null;
    }
    displayHintIcon() {
        return this.field.help && this.field.help.icon ? true : false;
    }
    close() {
        this.sidenav.close();
    }
    open() {
        this.sidenav.open();
    }
    setHelpButton(identifier, label, icon) {
        return {
            identifier: identifier,
            label: label,
            color: "primary" /* PRIMARY */,
            size: "small" /* SMALL */,
            icon: icon,
            type: "GHOST" /* GHOST */,
            onlyIcon: true,
        };
    }
    required() {
        let isRequired = false;
        if (this.field.validations && this.field.validations.length > 0) {
            for (let validation of this.field.validations) {
                if (validation.message.key == "required") {
                    isRequired = true;
                }
            }
        }
        if (StringUtils.isEmpty(this.field.label)) {
            isRequired = false;
        }
        return isRequired;
    }
    fieldNavigate() {
        let hasFieldNavigate = false;
        if (this.field.navigate &&
            (!StringUtils.isEmpty(this.field.navigate.icon) || !StringUtils.isEmpty(this.field.navigate.text)) &&
            !CollectionUtils.isEmpty(this.field.navigate.routeTo)) {
            hasFieldNavigate = true;
        }
        return hasFieldNavigate;
    }
    fieldDisabled() {
        let isDisabled = false;
        if (this.field.alwaysEnable) { }
        else {
            isDisabled = FieldUtils.isFieldDisabled(this.field, this._displayMode, this.resolvedValue);
            if (isDisabled) {
                FormUtils.disableFieldControl(this.fieldControl);
            }
        }
        return isDisabled;
    }
    getValue(field, txt) {
        let value = "";
        let initialLength = 0;
        let finalLength = 0;
        if (this.fieldControl != undefined) {
            value = this.fieldControl.value;
        }
        else {
            value = txt;
        }
        if (field.type != "DROPDOWN" /* DROPDOWN */) {
            if (this.keyMap && this.keyMap.length > 0) {
                this.keyMap
                    .filter(objs => {
                    let hasAssociation = false;
                    if (!CollectionUtils.isEmpty(objs) && !CollectionUtils.isEmpty(objs.associations)) {
                        objs.associations.forEach(element => {
                            if (element.fieldKey == field.key && element.componentIdentifier == this.sourceIdentifier) {
                                hasAssociation = true;
                            }
                        });
                    }
                    return hasAssociation;
                })
                    .forEach(field => {
                    if (field['options'] && field['options'].length > 0) {
                        for (let index = 0; index < field['options'].length; index++) {
                            if (field['options'][index].key == value) {
                                value = field['options'][index].value;
                                break;
                            }
                        }
                    }
                });
            }
        }
        this.resolvedValue = value;
        if (FieldUtils.isEllipsisField(this.field) && FieldUtils.displayEllipsis(this.charLimit, this.resolvedValue)) {
            value = JSON.stringify(value);
            initialLength = value.length;
            value = value.substr(0, this.field.ellipsis);
            finalLength = value.length;
            value += "...";
            if (initialLength > finalLength) {
                this.ellipsisRequired = true;
            }
        }
        return value;
    }
    displayFullText() {
        let resolvedValueStr = JSON.stringify(this.resolvedValue);
        if (!StringUtils.isEmpty(resolvedValueStr)) {
            this.charLimit = resolvedValueStr.length;
        }
    }
    displayShortText() {
        if (this.field.ellipsis && this.field.ellipsis > 0) {
            this.charLimit = this.field.ellipsis;
            this.displayEllipsis();
        }
    }
    displayEllipsis() {
        return FieldUtils.displayEllipsis(this.charLimit, this.resolvedValue);
    }
    setCalendar() {
        if (this.field.type === "CALENDAR" /* CALENDAR */) {
            this.dateRange = this.field.dateRange;
        }
    }
    ///////////////////////////// AUTOCOMPLETE - START ///////////////////////////
    invokeOnChangeOnField(value, input) {
        let invokeOnChange = false;
        if (this.field.type == "AUTOCOMPLETE" /* AUTOCOMPLETE */) {
            this.autoCompleteInputHasValue = !!value;
            if (value.length >= this.minLengthForTrigger) {
                this.autoCompleteInputHasValue = !!value;
                this.highlightAutoCompleteText = value;
            }
            else {
                this.autoCompleteInputHasValue = false;
                this.highlightAutoCompleteText = '';
            }
            invokeOnChange = true;
        }
        else {
            invokeOnChange = true;
        }
        return invokeOnChange;
    }
    autocompleteDisplayFn(option) {
        let value;
        if (option != null && option.key != null) {
            value = option.value;
        }
        else {
            value = option;
        }
        return value;
    }
    _filter(value) {
        const filterValue = value.toLowerCase();
        var result = this.field.options.filter(option => option.value.toLowerCase().includes(filterValue));
        this.autoCompleteResultCount = result.length;
        return result;
    }
    ///////////////////////////// AUTOCOMPLETE - END ///////////////////////////
    ///////////////////////////// DROPDOWN OPTION - START ///////////////////////////
    setOptionInDisplay() {
        if (this.field['options'] && this.fieldControl) {
            let key = this.fieldControl.value;
            for (let cnt = 0; cnt < this.field['options'].length; cnt++) {
                if (this.field['options'][cnt].key === key) {
                    this.field['options'][cnt].checked = true;
                }
            }
        }
    }
    setClear() {
        let hasClear = false;
        if (this.resolvedValue && this.field.hasClear && (this.field.type == "TEXT" /* TEXT */ ||
            this.field.type == "TEXTAREA" /* TEXTAREA */ ||
            this.field.type == "EMAIL" /* EMAIL */ ||
            this.field.type == "PASSWORD" /* PASSWORD */ ||
            this.field.type == "COLOR" /* COLOR */ ||
            this.field.type == "MONTH" /* MONTH */ ||
            this.field.type == "WEEK" /* WEEK */ ||
            this.field.type == "NUMBER" /* NUMBER */ ||
            this.field.type == "DROPDOWN" /* DROPDOWN */ ||
            this.field.type == "AUTOCOMPLETE" /* AUTOCOMPLETE */ ||
            this.field.type == "CHIPS" /* CHIPS */ ||
            this.field.type == "TIME" /* TIME */ ||
            this.field.type == "CALENDAR" /* CALENDAR */)) {
            hasClear = true;
        }
        this.hasClear = hasClear;
    }
    cleanValue() {
        this.resolvedValue = "";
        this.fieldControl.setValue("");
        this.setClear();
    }
    getResolveTextWithKey(field) {
        let value = "";
        if (this.row != undefined) {
            if (this.row[field['resolveOptionWithKey']]) {
                value = this.row[field['resolveOptionWithKey']];
            }
        }
        return value;
    }
    getDropdownValue(field, txt) {
        let value = "";
        if (this.fieldControl != undefined) {
            if (this.fieldControl.value) {
                value = this.fieldControl.value;
            }
        }
        else {
            value = txt;
        }
        if (field['options'] && field['options'].length > 0) {
            for (let index = 0; index < field['options'].length; index++) {
                let isSelected = false;
                if (value instanceof Array) {
                    if (value.indexOf(field['options'][index].key) > -1) {
                        isSelected = true;
                    }
                }
                else if (value instanceof String) {
                    if (field['options'][index].key == value) {
                        isSelected = true;
                    }
                }
                else if (value instanceof Object) {
                    if (value[field['options'][index].key]) {
                        isSelected = true;
                    }
                }
                if (isSelected) {
                    value = field['options'][index].value;
                    break;
                }
            }
        }
        return value;
    }
    ///////////////////////////// DROPDOWN OPTION - END ///////////////////////////
    ///////////////////////////// UPLOAD - START ///////////////////////////
    // imgURL: any;
    // onUpload(event) {
    //   let file: File = {
    //     'source': this.sourceIdentifier,
    //     'index': this.index,
    //     'field': this.field.key,
    //     'files': event.target.files
    //   };
    //   this.field['onUpload'](file);
    //   var reader = new FileReader();
    //   reader.readAsDataURL(file.files[0]);
    //   reader.onload = (_event) => {
    //     this.imgURL = reader.result;
    //   }
    // }
    ///////////////////////////// UPLOAD - END ///////////////////////////
    ///////////////////////////// IMAGE - START ///////////////////////////
    getImagePath(field) {
        //    console.log(path);
        if (!StringUtils.isEmpty(this.resolvedValue) && this.resolvedValue instanceof String && this.resolvedValue.indexOf("http://") <= -1) {
            // if (this.resolvedValue.startsWith("/")) {
            //   this.resolvedValue = Properties.contentUrl + this.resolvedValue;
            // } else {
            //   this.resolvedValue = Properties.contentUrl + "/" + this.resolvedValue;
            // }
        }
        this.imagePath = this.resolvedValue;
    }
    ///////////////////////////// IMAGE - END ///////////////////////////
    ///////////////////////////// SLIDER - START ///////////////////////////
    //   getSliderTickInterval(): number | 'auto' {
    // //    if ((<SliderField>this.field)..showTicks) {
    //       return (<SliderField>this.field).autoTicks ? 'auto' : this.tickInterval;
    // //    }
    //     return 0;
    //   }
    ///////////////////////////// SLIDER - END ///////////////////////////
    ///////////////////////////// EVENTS - START ///////////////////////////
    onAutocompleteChange(autocomplate) {
        let value = autocomplate.option.value;
        // console.log(value);
        this.onChangeEvent(this.field.key, value, autocomplate);
    }
    onToggleChange(toggle) {
        console.log(toggle);
        let value = toggle.checked;
        //    console.log(value);
        this.onChangeEvent(this.field.key, value, toggle);
    }
    onSliderChange(slider) {
        //    console.log(slider);
        let value = slider.value;
        //    console.log(value);
        this.onChangeEvent(this.field.key, value, slider);
    }
    onRadioChange(radio) {
        //    console.log(radio);
        let value = radio.value;
        //    console.log(value);
        this.onChangeEvent(this.field.key, value, radio);
    }
    onCheckboxChange(option, checkbox) {
        let key = option.key;
        let value = checkbox.checked;
        // console.log(key + ": " + value);
        this.onChangeEvent(key, value, checkbox);
    }
    setShowLess() {
        if (this.field.type === "RADIO" /* RADIO */ || this.field.type === "CHECKBOX" /* CHECKBOX */) {
            this.showLess = this.field.showLess || this.field.options.length;
        }
    }
    onOptionChange(options) {
        let value = this.listView.selectedOptions.selected.map(x => x.value);
        if (this.field.type == 'CHECKBOX') {
            let selectedOptions = options.source._value;
            let currentOptions = this.fieldControl.value;
            for (let key in currentOptions) {
                if (selectedOptions.indexOf(key) > -1) {
                    currentOptions[key] = true;
                }
                else {
                    currentOptions[key] = false;
                }
            }
            this.fieldControl.setValue(currentOptions);
        }
        else if (this.field.type == 'RADIO') {
            let selectedOptions = options.source._value;
            if (CollectionUtils.isEmpty(selectedOptions)) {
                this.fieldControl.setValue(null);
                value = null;
            }
            else {
                this.fieldControl.setValue(selectedOptions[0]);
                value = value[0];
            }
        }
        this.onChangeEvent(this.field.key, value, options);
    }
    onHtmlEditorChange($event) {
        // console.log($event);
        //    console.log(value);
        this.onChangeEvent(this.field.key, $event.html, $event);
    }
    onChipsListChange($event) {
        this.onChangeEvent(this.field.key, $event.values, $event);
    }
    onInputChange(input) {
        console.log(input);
        let value = input.target.value;
        //    console.log(value);
        if (this.invokeOnChangeOnField(value, input)) {
            this.onChangeEvent(this.field.key, value, input);
        }
    }
    onDateChange(date, type) {
        let key = this.field.key;
        if (!StringUtils.isEmpty(type)) {
            key = this.field.key + "." + type;
        }
        //    console.log(date.value);
        let value = date.value;
        //    console.log(value);
        this.onChangeEvent(key, value, date);
    }
    onChange(dropdown) {
        //    console.log(dropdown.value);
        let value = dropdown.value;
        this.onChangeEvent(this.field.key, value, dropdown);
    }
    onFileChange(event) {
        // console.log(event);
        this.onChangeEvent(this.field.key, event, event);
        var reader = new FileReader();
        reader.readAsDataURL(event[0]);
        reader.onload = (_event) => {
            this.imgURL = reader.result;
        };
    }
    onParagraphChange(event) {
        //    console.log(event); 
        this.onChangeEvent(this.field.key, event, event);
    }
    buttonClick(event) {
        this.onButtonClick.emit(event);
    }
    onChangeEvent(key, value, event) {
        this.resolvedValue = value;
        this.setClear();
        setTimeout(() => {
            //      if ((this.dependencies && this.dependencies[this.field.key]) || this.field.type == FieldType.CHECKBOX || this.field.type == FieldType.DROPDOWN) {
            if ((this.dependencies && this.dependencies[this.field.key])) {
                let action = {
                    sourceIdentifier: this.sourceIdentifier,
                    sourceIndex: this.sourceIndex,
                    widgetArrayIndex: this.widgetArrayIndex,
                    fieldIndex: this.fieldIndex,
                    action: this.field.key,
                    data: this.form.getRawValue(),
                    parentHierarchy: null,
                    event: event
                };
                this.onDependentFieldChange.emit(action);
            }
        }, 200);
        let fieldChange = {
            sourceIdentifier: this.sourceIdentifier,
            sourceIndex: this.sourceIndex,
            widgetArrayIndex: this.widgetArrayIndex,
            fieldIndex: this.fieldIndex,
            fieldKey: key,
            value: value,
            event: event
        };
        this.onFieldChange.emit(fieldChange);
    }
    // onChangeSearch(val: string) {
    //   console.log("onChangeSearch");
    //   let autocomplete: Autocomplete = {
    //     'source': this.sourceIdentifier,
    //     'index': this.index,
    //     'field': this.field.key,
    //     'searchText': val
    //   };
    //   this.autocompleteService.invoke(autocomplete);
    // }
    ///////////////////////////// EVENTS - END ///////////////////////////
    ///////////////////////////// ERROR - START ///////////////////////////
    errors() {
        let errors = [];
        if (this.fieldControl != undefined) {
            if (this.fieldControl && this.fieldControl.errors) {
                Object.keys(this.fieldControl.errors).forEach(keyError => {
                    if (this.field.validations) {
                        for (let validation of this.field.validations) {
                            if (keyError === validation.message.key) {
                                errors[errors.length] = { error: keyError, message: validation.message.message };
                            }
                            else {
                                //errors[errors.length] = {error: keyError, message: this.fieldControl.errors[keyError]};
                            }
                        }
                    }
                });
            }
            else if (this.fieldControl instanceof FormGroup) {
                if (this.fieldControl.controls && this.fieldControl.controls['startDate'] && this.fieldControl.controls['startDate'].errors) {
                    Object.keys(this.fieldControl.controls['startDate'].errors).forEach(keyError => {
                        if (this.field.validations) {
                            for (let validation of this.field.validations) {
                                if (keyError === validation.message.key) {
                                    errors[errors.length] = { error: keyError, message: validation.message.message };
                                }
                            }
                        }
                    });
                }
            }
        }
        return errors;
    }
    ///////////////////////////// ERROR - END ///////////////////////////
    setTextClearButton(identifier, label, icon, routeTo) {
        return {
            identifier: identifier,
            label: label,
            color: "primary" /* PRIMARY */,
            size: "small" /* SMALL */,
            icon: icon,
            type: "GHOST" /* GHOST */,
            onlyIcon: true,
            routerLink: routeTo
        };
    }
    addField(field) {
        let validations = FormUtils.getFieldValidation(field);
        this.form.controls[field.key].push(FormUtils.setFormControl(this.displayMode, field, null, validations));
        this.onFormChange.emit(this.form);
    }
    removeField(field, index) {
        this.form.controls[field.key].controls.splice(index, 1);
        this.onFormChange.emit(this.form);
    }
    addRemoveButton(identifier, label, icon) {
        return {
            identifier: identifier,
            label: label,
            color: "primary" /* PRIMARY */,
            size: "small" /* SMALL */,
            icon: icon,
            type: "FLAT" /* FLAT */,
            onlyIcon: true
        };
    }
    onFileComplete(data) {
        // console.log(data); // We just print out data bubbled up from event emitter.
    }
}
FieldComponent.decorators = [
    { type: Component, args: [{
                selector: 'mx-field',
                template: "<!-- {{field.fieldDisplayType}} -->\n<div \n  class=\"mdc-layout-grid mx-field-horizontal-container\" \n  *ngIf=\"(!(hideLabel == true) && field.fieldDisplayType == 'HORIZONTAL') && (field && (field.permission == null || (field.permission && (field.permission['subject'] | can: field.permission['action']))))\"\n> \n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell--span-3\">\n      <span \n        *ngIf=\"!isAddMore || (isAddMore && (fieldIndex == 0  || fieldIndex == null)) && field.label\"\n        class=\"mx-field-lbl mx-field-lbl-{{field.key}}\" \n        [ngClass]=\"{'mx-field-lbl-horizontal': (field.type != 'CHECKBOX' && field.type != 'RADIO' && field.type != 'SLIDER' && field.type != 'TOGGLE_OPTION' && field.type != 'UPLOAD' && field.type != 'IMAGE' && field.type != 'BOOLEAN' && field.type != 'JSON'), 'mx-field-lbl-horizontal-premitive': !(field.type != 'CHECKBOX' && field.type != 'RADIO' && field.type != 'SLIDER' && field.type != 'TOGGLE_OPTION' && field.type != 'UPLOAD' && field.type != 'IMAGE' && field.type != 'BOOLEAN' && field.type != 'JSON')}\">\n        <strong>{{field.label}}</strong>\n        <span class=\"mx-field-lbl-req\" *ngIf=\"isRequired\">*</span>\n        <!-- <span   \n          *ngIf=\"field.help && field.help.message && hasFieldNavigate && field.help.displayType == 'TOOLTIP'\" \n          matTooltip=\"{{field.help.message}}\"\n          matTooltipPosition=\"above\"\n          class=\"mx-field-hint mx-field-hint-{{field.key}}\">  \n          <mat-icon   \n            aria-hidden=\"true\" \n            [attr.aria-label]=\"field.help.message\" \n            class=\"mx-field-hint-icon mx-field-hint-icon-{{field.key}}\" \n          >{{field.help.icon ? field.help.icon : 'live_help'}}</mat-icon>\n        </span>   -->\n        <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'RIGHT_MODAL'\">\n          <ng-container \n            *ngTemplateOutlet=\"cfhelpmodal\" \n          ></ng-container>\n        </span>  \n        <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && field.help.withLabel\">\n          {{field.help.message}}\n        </span>\n      </span>\n    </div> \n    <div class=\"mdc-layout-grid__cell--span-9 mdc-layout-grid--align-right\" [style.width.%]=\"100\">\n      <ng-container *ngTemplateOutlet=\"cffield\"></ng-container>\n    </div>\n  </div>\n</div>\n<span \n  *ngIf=\"(field.fieldDisplayType != 'HORIZONTAL') && (field && (field.permission == null || (field.permission && (field.permission['subject'] | can: field.permission['action']))))\"\n>\n  <ng-container *ngTemplateOutlet=\"cffield\"></ng-container>\n</span>\n\n<ng-template #cffield>\n  <!-- {{field.type}} -->\n  <span *ngIf=\"(!form && !fieldControl) || field.displayMode == 'LABEL'\" [ngSwitch]=\"field.type\" class=\"mx-field mx-field-key-{{field.key}}\" [ngClass]=\"{'mx-field-lbl-horizontal': (field.type == 'LABEL' || field.type == 'BOOLEAN') && field.fieldDisplayType == 'HORIZONTAL', 'mx-field-lbl': (field.type == 'LABEL' || field.type == 'BOOLEAN') && sourceType == 'FORM'}\">\n    <mat-label class=\"mx-field-lbl mx-field-lbl-{{field.key}} mx-field-lbl-inline\" \n      *ngIf=\"field.fieldDisplayType != 'HORIZONTAL' && field.type != 'PARAGRAPH' && field.type != 'TOGGLE_OPTION' && !hideLabel && field.label\">\n      <strong>{{field.label}}</strong>\n      <span class=\"mx-field-lbl-req\" *ngIf=\"isRequired\">*</span>\n      <mx-tooltip matSuffix [field]=\"field\"></mx-tooltip>\n      <!-- <span  \n        *ngIf=\"field.help && field.help.message && hasFieldNavigate && field.help.displayType == 'TOOLTIP'\" \n        matTooltip=\"{{field.help.message}}\"\n        matTooltipPosition=\"above\"\n        class=\"mx-field-hint mx-field-hint-{{field.key}}\">  \n        <mat-icon  \n          aria-hidden=\"true\" \n          [attr.aria-label]=\"field.help.message\" \n          class=\"mx-field-hint-icon mx-field-hint-icon-{{field.key}}\" \n        >{{field.help.icon ? field.help.icon : 'live_help'}}</mat-icon>\n      </span>   -->\n      <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'RIGHT_MODAL'\">\n        <ng-container \n          *ngTemplateOutlet=\"cfhelpmodal\" \n        ></ng-container>\n      </span>  \n      <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && field.help.withLabel\">\n        {{field.help.message}}\n      </span>\n    </mat-label>\n\n    <span *ngSwitchCase=\"'IMAGE'\"\n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\">\n      <img \n        class=\"mx-field-image mx-field-image-{{field.key}}\" \n        [src]=\"imagePath\"\n        [style.width.px]=\"field['width'] ? field['width'] : 'auto'\">\n    </span>\n    <span *ngSwitchCase=\"'BOOLEAN'\" \n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\"\n      class=\"mat-input-element mx-field-boolean mx-field-boolean-{{field.key}}\">\n      <mat-icon class=\"mx-field-boolean-success\" *ngIf=\"resolvedValue == true\" aria-hidden=\"true\">done</mat-icon>\n      <mat-icon class=\"mx-field-boolean-failure\" *ngIf=\"resolvedValue == false\" aria-hidden=\"true\">close</mat-icon>\n    </span>\n    <span *ngSwitchCase=\"'DROPDOWN'\"\n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\"> \n      <span *ngIf=\"value == true || value == false\" class=\"mat-input-element  mx-field-boolean mx-field-boolean-{{field.key}}\">\n        <mat-icon class=\"mx-field-boolean-success\" *ngIf=\"resolvedValue == true\" aria-hidden=\"true\">done</mat-icon>\n        <mat-icon class=\"mx-field-boolean-failure\" *ngIf=\"resolvedValue == false\" aria-hidden=\"true\">close</mat-icon>\n      </span>\n      <span *ngIf=\"value != true && value != false\" class=\"mx-field-value mx-field-value-{{field.key}}\">\n        {{getDropdownValue(field, value)}}\n      </span>\n    </span>  \n    <span *ngSwitchCase=\"'CHECKBOX'\"\n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\"> \n      <span *ngIf=\"value == true || value == false\" class=\"mat-input-element  mx-field-boolean mx-field-boolean-{{field.key}}\">\n        <mat-icon class=\"mx-field-boolean-success\" *ngIf=\"resolvedValue == true\" aria-hidden=\"true\">done</mat-icon>\n        <mat-icon class=\"mx-field-boolean-failure\" *ngIf=\"resolvedValue == false\" aria-hidden=\"true\">close</mat-icon>\n      </span>\n      <span *ngIf=\"value != true && value != false\" class=\"mx-field-value mx-field-value-{{field.key}}\">\n        {{getDropdownValue(field, value)}}\n      </span>\n    </span>  \n    <span *ngSwitchCase=\"'RADIO'\"\n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\"> \n      <span *ngIf=\"value == true || value == false\" class=\"mat-input-element  mx-field-boolean mx-field-boolean-{{field.key}}\">\n        <mat-icon class=\"mx-field-boolean-success\" *ngIf=\"resolvedValue == true\" aria-hidden=\"true\">done</mat-icon>\n        <mat-icon class=\"mx-field-boolean-failure\" *ngIf=\"resolvedValue == false\" aria-hidden=\"true\">close</mat-icon>\n      </span>\n      <span *ngIf=\"value != true && value != false\" class=\"mx-field-value mx-field-value-{{field.key}}\">\n        {{getDropdownValue(field, value)}}\n      </span>\n    </span>  \n    <span *ngSwitchCase=\"'AUTOCOMPLETE'\" \n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\"\n      class=\"mat-form-field mx-field-value mx-field-value-{{field.key}}\">\n      {{field['resolveTextWithKey'] ? getResolveTextWithKey(field) : resolvedValue}}\n    </span>\n    <span *ngSwitchCase=\"'JSON'\">\n      <div class=\"mx-field-nm mdc-layout-grid mx-field-showmore-pannel mx-field-showmore-pannel-{{field.key}}\">\n        <div class=\"mdc-layout-grid__inner mx-field-showmore-pannel-content\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            <div *ngIf=\"displayEllipsis(); else elseValue\" (click)=\"displayFullText()\" class=\"mx-field-short-value\">\n              {{getValue(field, value)}}...\n            </div>\n            <ng-template #elseValue> \n              <span (click)=\"displayShortText()\" class=\"mx-field-value\">\n                <pre>{{getValue(field, value) | json}}</pre>\n              </span>\n            </ng-template>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner mx-field-showmore-pannel-action\" (click)=\"displayFullText()\" *ngIf=\"displayEllipsis() && ellipsisRequired\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            Show More\n            <mat-icon>expand_more</mat-icon>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner mx-field-showmore-pannel-action\" (click)=\"displayShortText()\" *ngIf=\"!displayEllipsis() && ellipsisRequired\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            Show Less\n            <mat-icon>expand_less</mat-icon>\n          </div>\n        </div>\n      </div>\n    </span>\n    <span *ngSwitchCase=\"'PARAGRAPH'\" class=\"mx-field-paragraph\">\n      <!-- <span class=\"mx-field\"> -->\n        <mx-paragraph [field]=\"field\"\n          [sourceType]=\"sourceType\"\n          [sourceIdentifier]=\"sourceIdentifier\"\n          [sourceIndex]=\"sourceIndex\" \n          [widgetArrayIndex]=\"widgetArrayIndex\" \n          [form]=\"form\" \n          [keyMap]=\"keyMap\"\n          [field]=\"field\"\n          [displayMode]=\"displayMode\"\n          [originalData]=\"originalData\"\n          [fieldControl]=\"fieldControl\"\n          [dependencies]=\"dependencies\"\n          (onFieldChange)=\"onParagraphChange($event)\"\n          (onButtonClick)=\"buttonClick($event)\"\n          ></mx-paragraph>\n        <!-- </span> -->\n    </span>\n    <span *ngSwitchCase=\"'MULTI_IMAGE'\">\n      <mx-multi-image [field]=\"field\" [disabled]=\"isFieldDisabled\"></mx-multi-image>\n      <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n    </span>\n    <span *ngSwitchCase=\"'UPLOAD'\">\n      <mx-file-uploader [field]=\"field\" [disabled]=\"isFieldDisabled\"></mx-file-uploader>\n    </span>\n    <span *ngSwitchCase=\"'EMAIL'\">\n      <a href=\"mailto:{{getValue(field, value)}}\">{{getValue(field, value)}}</a>\n    </span>\n    <span *ngSwitchDefault>\n      <!-- displayFullText(value) -->\n      <span [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\" [style.text-align]=\"textAlign\" *ngIf=\"!asBubble; else elseAsBubble\">\n        <span *ngIf=\"displayEllipsis(); else elseValue\" (click)=\"displayFullText()\" class=\"mx-field-short-value\" [innerHtml]=\"getValue(field, value)\">\n          ...\n        </span>\n        <ng-template #elseValue>\n          <span (click)=\"displayShortText()\" class=\"mx-field-value\" [innerHtml]=\"getValue(field, value)\">\n          </span>\n        </ng-template> \n      </span>\n      <ng-template #elseAsBubble>\n        <mat-chip-list [attr.aria-label]=\"getValue(field, value)\">\n          <mat-chip class=\"mx-small-bubble\" [color]=\"bubbleColor\" selected>{{getValue(field, value)}}</mat-chip>\n        </mat-chip-list>\n      </ng-template>\n    </span>\n  </span>\n\n  <span *ngIf=\"form && fieldControl && matcher && field.displayMode != 'LABEL' && !isAddMore\" class=\"mx-field\" [ngClass]=\"{'mx-field-lbl-horizontal': (field.type == 'LABEL' || field.type == 'BOOLEAN') && field.fieldDisplayType == 'HORIZONTAL', 'mx-field-lbl-for-label': (field.type == 'LABEL' || field.type == 'BOOLEAN') && sourceType == 'FORM'}\">\n    <ng-container *ngTemplateOutlet=\"cffieldeditable\"></ng-container>\n  </span>\n\n  <span *ngIf=\"form && fieldControl && matcher && field.displayMode != 'LABEL' && isAddMore\" class=\"mx-field\">\n    <div class=\"mdc-layout-grid mx-form-add-more-row\">\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell--span-{{isAddMore ? addMoreFieldDisplayInColumns : (addMoreFieldDisplayInColumns + addMoreButtonDisplayInColumns)}} mdc-layout-grid__cell--align-middle\">\n          <ng-container *ngTemplateOutlet=\"cffieldeditable\"></ng-container>\n        </div>\n        <div class=\"mdc-layout-grid__cell--span-{{addMoreButtonDisplayInColumns}} mdc-layout-grid__cell--align-middle\" *ngIf=\"isAddMore\">\n          <mx-button\n            *ngIf=\"fieldIndex != form.controls[field.key]['controls'].length - 1\"\n            [disabled]=\"!(addMorePermission == null || (addMorePermission && (addMorePermission['subject'] | can: addMorePermission['action'])))\"\n            [form]=\"form\"\n            [sourceIdentifier]=\"sourceIdentifier\"\n            [sourceIndex]=\"sourceIndex\"\n            [widgetArrayIndex]=\"widgetArrayIndex\"\n            [button]=\"minusButton\"\n            class=\"mx-field-addmore mx-field-addmore-{{field.key}}\"\n            (onClick)=\"removeField(field, fieldIndex)\"\n          ></mx-button>\n          <mx-button\n            *ngIf=\"fieldIndex == form.controls[field.key]['controls'].length - 1\"\n            [form]=\"form\"\n            [sourceIdentifier]=\"sourceIdentifier\"\n            [sourceIndex]=\"sourceIndex\"\n            [widgetArrayIndex]=\"widgetArrayIndex\"\n            [button]=\"plusButton\"\n            class=\"mx-field-addmore mx-field-addmore-{{field.key}}\"\n            (onClick)=\"addField(field)\"\n          ></mx-button>\n        </div>\n      </div>\n    </div>\n  </span>\n</ng-template>\n\n<ng-template #cffieldeditable>\n  <span [ngSwitch]=\"field.type\">\n    <!-- [appearance]=\"appearance | lowercase\"  -->\n    <!-- [appearance]=\"appearance | lowercase\" -->\n    <mat-form-field \n      class=\"mx-field\"\n      [ngClass]=\"{'mx-inbuild-type': (field.type== 'TIME' || field.type== 'COLOR' || field.type== 'WEEK' || field.type== 'MONTH'|| field.type== 'NUMBER'), 'mx-field-horizontal': field.fieldDisplayType == 'HORIZONTAL'}\" \n      *ngIf=\"field.type != 'PARAGRAPH' && field.type != 'MULTI_IMAGE' && field.type != 'CHECKBOX' && field.type != 'TOOLBAR' && field.type != 'CHIPS' && field.type != 'HTML_EDITOR' && field.type != 'RADIO' && field.type != 'SLIDER' && field.type != 'TOGGLE_OPTION' && field.type != 'UPLOAD' && field.type != 'IMAGE' && field.type != 'BOOLEAN' && field.type != 'CALENDAR' && field.type != 'JSON' && field.type != 'LABEL'\">\n      <mat-label class=\"mx-field-lbl mx-field-lbl-{{field.key}}\" *ngIf=\"!(hideLabel == true) && field.fieldDisplayType != 'HORIZONTAL' && field.label\">\n        <strong>{{field.label}}</strong>\n        <span class=\"mx-field-lbl-req\" *ngIf=\"isRequired\">*</span>\n        <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && field.help.withLabel\">\n          {{field.help.message}}\n        </span>\n      </mat-label>\n      <!-- <mat-label class=\"mx-field-lbl\" *ngIf=\"(hideLabel == true)\"> \n      </mat-label> -->\n\n      <mat-icon \n        *ngIf=\"field.icon\" \n        matPrefix\n        aria-hidden=\"true\" \n        [attr.aria-label]=\"field.icon\" \n        class=\"mx-field-icon\" \n      >{{field.icon}}</mat-icon>\n\n      <span *ngSwitchCase=\"'TEXT'\">\n        <input  \n          matInput \n          [id]=\"field.key\" \n          [formControl]=\"fieldControl\" \n          [errorStateMatcher]=\"matcher\" \n          [maxLength]=\"maxLength\"\n          [placeholder]=\"field.placeholder\"\n          [disabled]=\"isFieldDisabled\"\n          class=\"mat-input-element mx-field-text mx-field-text-{{field.key}}\"\n          (input)=\"onInputChange($event)\"/>\n      </span>\n      <!-- <input  \n        *ngSwitchCase=\"'HIDDEN'\" \n        matInput \n        type=\"hidden\"\n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n      > -->\n\n      <!-- [mat-autosize]=\"'true'\" -->\n      <textarea\n        *ngSwitchCase=\"'TEXTAREA'\" \n        matInput \n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [maxLength]=\"maxLength\"\n        rows=\"{{rows}}\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-textarea mx-field-textarea-{{field.key}}\"\n        (input)=\"onInputChange($event)\"> \n      </textarea>\n      <!-- <br/> -->  \n      <mat-hint hintLabel=\"end\" *ngIf=\"field.type == 'TEXTAREA' && maxLength && maxLength > 0 && maxLength != 1000000\"><strong>{{fieldControl.value.length}}</strong> / {{maxLength}} characters</mat-hint>\n\n      <input \n        *ngSwitchCase=\"'COLOR'\" \n        matInput \n        type=\"color\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-color mx-field-color-{{field.key}}\"\n        (input)=\"onInputChange($event)\"/>\n      <input \n        *ngSwitchCase=\"'EMAIL'\" \n        matInput \n        type=\"email\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [maxLength]=\"maxLength\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-email mx-field-email-{{field.key}}\"\n        (input)=\"onInputChange($event)\"/>\n      <input \n        *ngSwitchCase=\"'MONTH'\" \n        matInput \n        type=\"month\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [maxLength]=\"maxLength\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-month mx-field-month-{{field.key}}\"\n        (input)=\"onInputChange($event)\"/>\n      <input \n        *ngSwitchCase=\"'NUMBER'\" \n        matInput \n        type=\"number\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [min]=\"min\"\n        [max]=\"max\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-number mx-field-number-{{field.key}}\"\n        (input)=\"onInputChange($event)\"/>\n      <input \n        *ngSwitchCase=\"'PASSWORD'\" \n        matInput \n        type=\"password\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [maxLength]=\"maxLength\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-password mx-field-password-{{field.key}}\"\n        (input)=\"onInputChange($event)\"/>\n      <input \n        *ngSwitchCase=\"'TIME'\" \n        matInput \n        type=\"time\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-time mx-field-time-{{field.key}}\"\n        (input)=\"onInputChange($event)\"/>\n      <input \n        *ngSwitchCase=\"'WEEK'\" \n        matInput \n        type=\"week\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        [errorStateMatcher]=\"matcher\"\n        [placeholder]=\"field.placeholder\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-input-element mx-field-week mx-field-week-{{field.key}}\"\n        (input)=\"onInputChange($event)\"/>\n      <span *ngSwitchCase=\"'DROPDOWN'\">\n        <mat-select\n          [id]=\"field.key\" \n          [formControl]=\"fieldControl\"\n          [errorStateMatcher]=\"matcher\"\n          [multiple]=\"field['multiselect']\"\n          [placeholder]=\"field.placeholder\"\n          [disabled]=\"isFieldDisabled\"\n          class=\"mat-input-element mx-field-dropdown mx-field-dropdown-{{field.key}}\"\n          (selectionChange)=\"onChange($event)\">\n          <mat-option class=\"mat-option\" *ngIf=\"field['defaultOption']\">{{field['defaultOption']}}</mat-option>\n          <mat-option class=\"mat-option\" *ngFor=\"let option of field['options']\" [value]=\"option.key\" [disabled]=\"option.disabled\" >{{option.value}}</mat-option>\n        </mat-select>\n      </span>\n      <span *ngSwitchCase=\"'AUTOCOMPLETE'\"> \n        <input \n          matInput \n          [id]=\"field.key\"  \n          [formControl]=\"fieldControl\" \n          [errorStateMatcher]=\"matcher\"\n          [attr.aria-label]=\"field.label\" \n          [placeholder]=\"field.placeholder\"\n          [matAutocomplete]=\"auto\"\n          class=\"mat-input-element mx-field-autocomplete mx-field-autocomplete-{{field.key}}\"\n          [disabled]=\"isFieldDisabled\"\n          (input)=\"onInputChange($event)\"/>\n        <mat-autocomplete \n          #auto=\"matAutocomplete\"\n          [displayWith]=\"autocompleteDisplayFn\"\n          (optionSelected)=\"onAutocompleteChange($event)\">\n          <mat-option \n            class=\"mat-option mx-field-autocomplete-option mx-field-autocomplete-option-{{field.key}}\" \n            *ngIf=\"field['defaultOption']\">\n            {{field['defaultOption']}}\n          </mat-option>\n          <mat-option \n            class=\"mat-option mx-field-autocomplete-option mx-field-autocomplete-option-{{field.key}}\" \n            *ngFor=\"let option of field['options']\" \n            [value]=\"option\" \n            [disabled]=\"option.disabled\" >\n            <span [innerHTML]=\"option.value | highlight: highlightAutoCompleteText\"></span>\n          </mat-option>\n          <mat-option *ngIf=\"(field['options'])?.length==0 && autoCompleteInputHasValue\">\n            {{field['noRecordFound'] ? field['noRecordFound'] : 'No Result Found'}}\n          </mat-option>\n        </mat-autocomplete>\n      </span> \n      <!-- <mx-button\n        matSuffix\n        *ngIf=\"hasClear && !hasFieldNavigate && !(field.help && field.help.displayType == 'TOOLTIP' && field.help.message)\"\n        [button]=\"textClearButton\"\n        class=\"mx-field-clr-btn mx-field-clr-btn-{{field.key}}\"\n        (onClick)=\"cleanValue()\"\n      ></mx-button> -->\n      <mx-button\n        matSuffix\n        *ngIf=\"hasFieldNavigate\"\n        [button]=\"routeToButton\"\n        class=\"mx-field-clr-btn mx-field-clr-btn-{{field.key}}\"\n        (onClick)=\"resolvedValue = ''\"\n      ></mx-button> \n      <mx-tooltip matSuffix [field]=\"field\"></mx-tooltip>\n\n      <!-- <ng-container *ngTemplateOutlet=\"cfHelp;\"></ng-container> -->\n      <mat-hint *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && !field.help.withLabel\" class=\"mx-field-hint\">\n        <mat-icon \n          aria-hidden=\"true\" \n          [attr.aria-label]=\"field.help.message\" \n          class=\"mx-field-hint-icon\">\n          {{field.help.icon ? field.help.icon : 'live_help'}}\n        </mat-icon>\n        <span>{{field.help.message}}</span>\n      </mat-hint>\n\n      <mat-error aria-hidden=\"true\" [attr.aria-label]=\"error.message\" *ngFor=\"let error of errors()\" [innerHtml]=\"error.message\"></mat-error>\n    </mat-form-field>\n\n    <span *ngSwitchCase=\"'CALENDAR'\">\n      <!-- [appearance]=\"appearance | lowercase\" -->\n      <mat-form-field \n        class=\"mx-field\" \n        *ngIf=\"dateRange\">\n        <mat-label class=\"mx-field-lbl mx-field-lbl-{{field.key}}\" *ngIf=\"!(hideLabel == true) && field.fieldDisplayType != 'HORIZONTAL' && field.label\" class=\"mx-field-label\">\n          <strong>{{field.label}}</strong>\n          <span class=\"mx-field-lbl-req\" *ngIf=\"isRequired\">*</span>\n          <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && field.help.withLabel\">\n            {{field.help.message}}\n          </span>\n        </mat-label>\n        <mat-date-range-input [formGroup]=\"fieldControl\" [rangePicker]=\"datePicker\" >\n          <input \n            matStartDate\n            matInput\n            [id]=\"field.key\" \n            formControlName=\"startDate\" \n            [min]=\"field['minDate']\"\n            [disabled]=\"isFieldDisabled\"\n            [errorStateMatcher]=\"matcher\"\n            placeholder=\"Start date\"\n            (dateChange)=\"onDateChange($event, 'startDate')\">\n          <input \n            matEndDate\n            matInput\n            [id]=\"field.key\" \n            [max]=\"field['maxDate']\"\n            [disabled]=\"isFieldDisabled\"\n            [errorStateMatcher]=\"matcher\"\n            formControlName=\"endDate\" \n            placeholder=\"End date\"\n            (dateChange)=\"onDateChange($event, 'endDate')\">\n        </mat-date-range-input>\n        <mat-datepicker-toggle matSuffix [for]=\"datePicker\" ></mat-datepicker-toggle>\n        <mat-date-range-picker #datePicker ></mat-date-range-picker>\n\n        <!-- <mx-button\n          matSuffix\n          *ngIf=\"hasClear && !hasFieldNavigate && !(field.help && field.help.displayType == 'TOOLTIP' && field.help.message)\"\n          [button]=\"textClearButton\"\n          class=\"mx-field-clr-btn mx-field-clr-btn-{{field.key}}\"\n          (onClick)=\"cleanValue()\"\n        ></mx-button> -->\n        <mx-button\n          matSuffix\n          *ngIf=\"hasFieldNavigate\"\n          [button]=\"routeToButton\"\n          class=\"mx-field-clr-btn mx-field-clr-btn-{{field.key}}\"\n          (onClick)=\"resolvedValue = ''\"\n        ></mx-button> \n        <mx-tooltip matSuffix [field]=\"field\"></mx-tooltip>\n\n        <!-- <ng-container *ngTemplateOutlet=\"cfHelp;\"></ng-container> -->\n        <mat-hint *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && !field.help.withLabel\" class=\"mx-field-hint\">\n          <mat-icon \n            aria-hidden=\"true\" \n            [attr.aria-label]=\"field.help.message\" \n            class=\"mx-field-hint-icon\">\n            {{field.help.icon ? field.help.icon : 'live_help'}}\n          </mat-icon>\n          <span>{{field.help.message}}</span>\n        </mat-hint>\n        <mat-error aria-hidden=\"true\" [attr.aria-label]=\"error.message\" *ngFor=\"let error of errors()\" [innerHtml]=\"error.message\"></mat-error>\n      </mat-form-field>\n      <!-- [appearance]=\"appearance | lowercase\" -->\n      <mat-form-field \n        class=\"mx-field\" \n        *ngIf=\"!dateRange\">\n        <mat-label class=\"mx-field-lbl mx-field-lbl-{{field.key}}\" *ngIf=\"!(hideLabel == true) && field.fieldDisplayType != 'HORIZONTAL' && field.label\" class=\"mx-field-label\">\n          <strong>{{field.label}}</strong>\n          <span class=\"mx-field-lbl-req\" *ngIf=\"isRequired\">*</span>\n          <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && field.help.withLabel\">\n            {{field.help.message}}\n          </span>  \n        </mat-label>      \n        <input \n            matInput \n            [matDatepicker]=\"picker\"\n            [id]=\"field.key\" \n            [formControl]=\"fieldControl\" \n            [matDatepickerFilter]=\"field['filter']\"\n            [min]=\"field['minDate']\"\n            [max]=\"field['maxDate']\"\n            [errorStateMatcher]=\"matcher\"\n            [disabled]=\"isFieldDisabled\"\n            class=\"mat-input-element mx-field-datepicker mx-field-datepicker-{{field.key}}\" \n            (dateChange)=\"onDateChange($event, '')\" />\n        <mat-datepicker-toggle   matSuffix [for]=\"picker\" ></mat-datepicker-toggle>\n        <mat-datepicker #picker ></mat-datepicker>\n        <!-- <mx-button\n          matSuffix\n          *ngIf=\"hasClear && !hasFieldNavigate && !(field.help && field.help.displayType == 'TOOLTIP' && field.help.message)\"\n          [button]=\"textClearButton\"\n          class=\"mx-field-clr-btn mx-field-clr-btn-{{field.key}}\"\n          (onClick)=\"cleanValue()\"\n        ></mx-button> -->\n        <mx-button\n          matSuffix\n          *ngIf=\"hasFieldNavigate\"\n          [button]=\"routeToButton\"\n          class=\"mx-field-clr-btn mx-field-clr-btn-{{field.key}}\"\n          (onClick)=\"resolvedValue = ''\"\n        ></mx-button>\n\n        <!-- <ng-container *ngTemplateOutlet=\"cfHelp;\"></ng-container> -->\n        <mat-hint *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && !field.help.withLabel\" class=\"mx-field-hint\">\n          <mat-icon \n            aria-hidden=\"true\" \n            [attr.aria-label]=\"field.help.message\" \n            class=\"mx-field-hint-icon\">\n            {{field.help.icon ? field.help.icon : 'live_help'}}\n          </mat-icon>\n          <span>{{field.help.message}}</span>\n        </mat-hint>\n        <mx-tooltip matSuffix [field]=\"field\"></mx-tooltip>\n        <mat-error aria-hidden=\"true\" [attr.aria-label]=\"error.message\" *ngFor=\"let error of errors()\" [innerHtml]=\"error.message\"></mat-error>\n      </mat-form-field>\n    </span>\n\n    <mat-label class=\"mx-field-lbl mx-field-lbl-{{field.key}} mx-field-lbl-inline\" \n      *ngIf=\"!(field.type != 'MULTI_IMAGE' && field.type != 'TOOLBAR' && field.type != 'CHECKBOX' && field.type != 'HTML_EDITOR' && field.type != 'RADIO' && field.type != 'SLIDER' && field.type != 'UPLOAD' && field.type != 'IMAGE' && field.type != 'BOOLEAN' && field.type != 'JSON' && field.type != 'LABEL') && !(hideLabel == true) && field.fieldDisplayType != 'HORIZONTAL' && field.label\">\n      <strong>{{field.label}}</strong>\n      <span class=\"mx-field-lbl-req\" *ngIf=\"isRequired\">*</span>\n      <mx-tooltip matSuffix [field]=\"field\"></mx-tooltip>\n      <!-- <span  \n        *ngIf=\"field.help && field.help.message && hasFieldNavigate && field.help.displayType == 'TOOLTIP'\" \n        matTooltip=\"{{field.help.message}}\"\n        matTooltipPosition=\"above\"\n        class=\"mx-field-hint mx-field-hint-{{field.key}}\">  \n        <mat-icon  \n          aria-hidden=\"true\" \n          [attr.aria-label]=\"field.help.message\" \n          class=\"mx-field-hint-icon mx-field-hint-icon-{{field.key}}\" \n        >{{field.help.icon ? field.help.icon : 'live_help'}}</mat-icon>\n      </span>   -->\n      <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'RIGHT_MODAL'\">\n        <ng-container \n          *ngTemplateOutlet=\"cfhelpmodal\" \n        ></ng-container>\n      </span>  \n      <span *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && field.help.withLabel\">\n        {{field.help.message}}\n      </span>\n    </mat-label>\n    <span *ngSwitchCase=\"'HTML_EDITOR'\" >\n      <div class=\"mx-field-nm\">\n        <quill-editor \n          [ngClass]=\"{'mx-editor-invalid': isEditorErrorState(), 'mx-disable': isFieldDisabled}\"  \n          class=\"mx-field-nm\"\n          [styles]=\"{height: height + 'px','margin-bottom': isEditorErrorState() ? 0 : '1.25em'}\"\n          (onEditorChanged)=\"onHtmlEditorChange($event)\"\n          [id]=\"field.key\" \n          [formControl]=\"fieldControl\" \n          [disabled]=\"isFieldDisabled\"\n          [placeholder]=\"field.placeholder\"\n          [readOnly]=\"isFieldDisabled\"\n          [modules]=\"editorOptions\" \n        >\n        </quill-editor>\n        <span *ngIf=\"isEditorErrorState()\" class=\"mx-field-editor-error\">\n          <mat-error aria-hidden=\"true\" [attr.aria-label]=\"error.message\" *ngFor=\"let error of errors()\" [innerHtml]=\"error.message\"></mat-error>\n        </span> \n        <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n      </div>\n    </span>\n\n    <span *ngSwitchCase=\"'CHECKBOX'\" class=\"mat-input-element mx-field-chk-group\">\n      <div \n        [ngClass]=\"{'mx-field-checkbox-horizontal': field['displayType'] == 'INLINE'}\"\n        class=\"mx-field-nm\"\n        *ngIf=\"field['displayTemplate'] == 'CLASSIC'; else elseValue\">\n        <span \n          *ngFor=\"let option of field['options']\" \n          class=\"mx-field-chk\">\n          <mat-checkbox \n              class=\"mat-checkbox mat-accent mx-field-chk-inner mx-field-chk-inner-{{field.key}}\"\n              [ngClass]=\"{'mx-field-checkbox-horizontal': field['displayType'] == 'INLINE'}\"\n              [formControl]=\"fieldControl['controls'][option.key]\" \n              [disabled]=\"option.disabled || isFieldDisabled\"\n              (change)=\"onCheckboxChange(option, $event)\">\n            {{option.value}}\n          </mat-checkbox>\n          <i *ngIf=\"option.description\" class=\"mx-field-chk-desc mx-field-chk-desc-{{field.key}}\" [ngClass]=\"{'mx-disabled': option.disabled || isFieldDisabled}\">{{option.description}}</i>\n        </span>\n        <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n      </div>\n      <ng-template #elseValue>\n        <ng-container *ngTemplateOutlet=\"cfoptiontemplate\"></ng-container>\n      </ng-template>\n    </span>\n    <span *ngSwitchCase=\"'RADIO'\">\n      <!-- =={{field | json}} -->\n      <mat-radio-group \n        *ngIf=\"field['displayTemplate'] == 'CLASSIC'; else elseValue\"\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\" \n        class=\"mx-field-nm mx-field-radio-group mx-field-radio-group-{{field.key}}\"\n        [ngClass]=\"{'mx-field-radio-horizontal': field['displayType'] == 'INLINE'}\"\n        (change)=\"onRadioChange($event)\"> \n          <span \n          [ngClass]=\"{'mx-field-radio-horizontal-padding': field['displayType'] == 'INLINE'}\"\n          *ngFor=\"let option of field['options']\">\n            <mat-radio-button \n              class=\"mat-radio-button mat-accent mx-field-radio mx-field-radio-{{field.key}}\"\n              [value]=\"option.key\" \n              [disabled]=\"option.disabled || isFieldDisabled\">\n              {{option.value}}\n            </mat-radio-button>\n            <br *ngIf=\"option.description\"/><i *ngIf=\"option.description\" class=\"mx-field-radio-desc\" [ngClass]=\"{'mx-disabled': option.disabled || isFieldDisabled}\">{{option.description}}</i>\n          </span>\n          <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n        </mat-radio-group>\n      <ng-template #elseValue>\n        <ng-container *ngTemplateOutlet=\"cfoptiontemplate\"></ng-container>\n      </ng-template>\n    </span>\n    <span *ngSwitchCase=\"'SLIDER'\">\n      <mat-slider\n        [id]=\"field.key\" \n        [formControl]=\"fieldControl\"\n        [invert]=\"field['invert']\"\n        [max]=\"field['max']\"\n        [min]=\"field['min']\"\n        [step]=\"field['step']\"\n        [thumbLabel]=\"field['thumbLabel']\"\n        [tickInterval]=\"field['tickInterval']\"\n        [vertical]=\"field['vertical']\"\n        class=\"mat-slider mx-field-slider mx-field-slider-{{field.key}}\"\n        [disabled]=\"isFieldDisabled\"\n        (change)=\"onSliderChange($event)\">\n      </mat-slider>\n      <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n    </span>\n    <span *ngSwitchCase=\"'TOGGLE_OPTION'\">\n      <mat-slide-toggle \n        [formControl]=\"fieldControl\"\n        [color]=\"field['color']\" \n        [checked]=\"field['checked']\"\n        [disabled]=\"isFieldDisabled\"\n        class=\"mat-slide-toggle mx-field-toggle mx-field-toggle-{{field.key}}\"\n        (change)=\"onToggleChange($event)\">\n        {{field['label']}}\n        <span *ngIf=\"field['description']\">{{field['description']}}</span>\n      </mat-slide-toggle>\n    </span>\n    <span *ngSwitchCase=\"'UPLOAD'\">\n      <mx-file-uploader [field]=\"field\" [disabled]=\"isFieldDisabled\"></mx-file-uploader>\n      <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n    </span>\n    <span *ngSwitchCase=\"'MULTI_IMAGE'\">\n      <mx-multi-image [field]=\"field\" [disabled]=\"isFieldDisabled\"></mx-multi-image>\n      <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n    </span>\n    <span *ngSwitchCase=\"'IMAGE'\"\n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\">\n      <img class=\"mx-field-image mx-field-image-{{field.key}}\" [src]=\"imagePath\" \n        [style.width.px]=\"field['width'] ? field['width'] : 'auto'\">\n    </span>\n    <span *ngSwitchCase=\"'BOOLEAN'\" \n      [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\"\n      class=\"mat-input-element mx-field-boolean mx-field-boolean-{{field.key}}\">\n      <mat-icon class=\"mx-field-boolean-success\" *ngIf=\"resolvedValue == true\" aria-hidden=\"true\">done</mat-icon>\n      <mat-icon class=\"mx-field-boolean-failure\" *ngIf=\"resolvedValue == false\" aria-hidden=\"true\">close</mat-icon>\n    </span>\n    <span *ngSwitchCase=\"'JSON'\" class=\"mx-field-json mx-field-json-{{field.key}}\">\n      <div class=\"mx-field-nm mdc-layout-grid mx-field-showmore-pannel mx-field-showmore-pannel-{{field.key}}\">\n        <div class=\"mdc-layout-grid__inner mx-field-showmore-pannel-content\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            <div *ngIf=\"displayEllipsis(); else elseValue\" (click)=\"displayFullText()\" class=\"mx-field-short-value\">\n              {{getValue(field, value)}}...\n            </div>\n            <ng-template #elseValue>\n              <span (click)=\"displayShortText()\" class=\"mx-field-value\">\n                <pre>{{getValue(field, value) | json}}</pre>\n              </span>\n            </ng-template>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner mx-field-showmore-pannel-action\" (click)=\"displayFullText()\" *ngIf=\"displayEllipsis() && ellipsisRequired\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            Show More\n            <mat-icon>expand_more</mat-icon>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner mx-field-showmore-pannel-action\" (click)=\"displayShortText()\" *ngIf=\"!displayEllipsis() && ellipsisRequired\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            Show Less\n            <mat-icon>expand_less</mat-icon>\n          </div>\n        </div>\n      </div>\n    </span>  \n    <span *ngSwitchCase=\"'CHIPS'\">\n      <mx-chips [field]=\"field\"  \n        [formControl]=\"fieldControl\"\n        [disabled]=\"isFieldDisabled\"\n        [errorMatcher]=\"matcher\"\n        (onListChange)=\"onChipsListChange($event)\"\n      ></mx-chips>\n    </span>\n    <span *ngSwitchCase=\"'PARAGRAPH'\" class=\"mx-field-paragraph\">\n      <!-- [sourceType]=\"'FORM'\" -->\n      <mx-paragraph [field]=\"field\"\n        [sourceType]=\"sourceType\"\n        [sourceIdentifier]=\"sourceIdentifier\"\n        [sourceIndex]=\"sourceIndex\" \n        [widgetArrayIndex]=\"widgetArrayIndex\"\n        [form]=\"form\" \n        [keyMap]=\"keyMap\"\n        [field]=\"field\"\n        [displayMode]=\"displayMode\"\n        [originalData]=\"originalData\"\n        [fieldControl]=\"fieldControl\"\n        [dependencies]=\"dependencies\"\n        (onFieldChange)=\"onParagraphChange($event)\"\n        (onButtonClick)=\"buttonClick($event)\"\n        ></mx-paragraph>\n      <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n    </span>\n    <span *ngSwitchCase=\"'TOOLBAR'\">\n      <mx-toolbar [field]=\"field\"></mx-toolbar>\n    </span>\n    <span *ngSwitchDefault>\n      <!-- displayFullText(value) -->\n      <span [ngClass]=\"{'mx-field-value-wrapper-horizontal': field.fieldDisplayType != 'HORIZONTAL', 'mx-field-value-wrapper-vertical': field.fieldDisplayType == 'HORIZONTAL'}\" [style.text-align]=\"textAlign\" *ngIf=\"!asBubble; else elseAsBubble\">\n        <span class=\"mx-field-short-value\" [innerHtml]=\"resolvedValue\">\n          ...\n        </span>\n      </span>\n      <ng-template #elseAsBubble>\n        <mat-chip-list [attr.aria-label]=\"resolvedValue\">\n          <mat-chip class=\"mx-small-bubble\" [color]=\"bubbleColor\" selected>{{resolvedValue}}</mat-chip>\n        </mat-chip-list>\n      </ng-template>\n    </span>    \n  </span>\n</ng-template>\n\n<ng-template #cfhelplaintext>\n  <mat-hint *ngIf=\"field.help && field.help.message && field.help.displayType == 'PLAIN_TEXT' && !field.help.withLabel\" class=\"mx-field-hint mx-field-hint-nm\">\n    <mat-icon \n      aria-hidden=\"true\" \n      [attr.aria-label]=\"field.help && field.help.message\" \n      class=\"mx-field-hint-icon\">{{field.help && field.help.icon ? field.help.icon : 'live_help'}}</mat-icon>\n    {{field.help.message}}\n  </mat-hint>\n</ng-template>\n\n<ng-template #cfhelpmodal>\n    <mat-sidenav #sidenav [position]=\"'end'\" (keydown.escape)=\"close()\" disableClose>\n      <div class=\"mdc-layout-grid mx-crud-search-modal mx-crud-search-modal-{{field.key}}\">\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell--span-9 mx-field-help-modal-header\">\n            <strong>{{field.help.title}}</strong>\n          </div>\n          <div class=\"mdc-layout-grid__cell--span-3 mdc-layout-grid--align-right\">\n            <mx-button\n              [sourceIdentifier]=\"field.key\"\n              [sourceIndex]=\"'0'\"\n              [widgetArrayIndex]=\"'0'\"\n              [button]=\"helpModalButton\"\n              align = \"right\"\n              (onClick)=\"close()\"\n            ></mx-button>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner mx-field-help-modal-divider\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            <mat-divider class=\"mx-field-help-divider\"></mat-divider>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner mx-field-help-modal-description\">\n          <div class=\"mdc-layout-grid__cell--span-12\">\n            {{field.help.message}}\n          </div>\n        </div>\n      </div>\n    </mat-sidenav>\n    <br/>\n    <mat-sidenav-content #helpSideNav class=\"mx-field-help-modal\">\n      <span \n        matTooltip=\"Click for help\"\n        matTooltipPosition=\"above\"\n        class=\"mx-field-hint mx-field-hint-{{field.key}}\"\n        (click)=\"open()\"\n        >\n        <mat-icon \n          aria-hidden=\"true\"  \n          [attr.aria-label]=\"field.help.message\" \n          class=\"mx-field-hint-icon mx-field-hint-icon-{{field.key}}\" \n          (click)=\"open()\"\n        >{{field.help.icon ? field.help.icon : 'live_help'}}</mat-icon>\n      </span>  \n    </mat-sidenav-content>\n</ng-template>\n\n<ng-template #cfoptiontemplate> \n  <mat-selection-list \n    #listView \n    [multiple]=\"field.type == 'CHECKBOX'\" \n    (selectionChange)=\"onOptionChange($event)\"\n    class=\"mx-field-list mx-field-nm\">\n    <ng-container \n      *ngFor=\"let option of field['options']; let index=index,let last = last\">\n      <mat-list-option \n        *ngIf=\"index < showLess\" \n        [value]=\"option.key\" \n        [selected]=\"field.type == 'CHECKBOX' ? option.checked : option.key == fieldControl.value\"\n        [disabled]=\"option.disabled || isFieldDisabled\"\n        class=\"mx-field-list-option\">\n        <img \n          *ngIf=\"option.image || field['defaultImageUrl']\" \n          matListAvatar \n          [src]=\"option.image\" \n          (error)=\"onListImageLoadError($event)\"  \n          alt=\"\" \n          class=\"mx-field-list-image\"/>\n          <h3 matLine class=\"primary\">\n            {{option.value}}\n          </h3>\n          <p matLine class=\"secondary\">\n            <span>{{option.description}}</span>\n          </p>\n        <mat-divider *ngIf=\"!last\"></mat-divider>\n      </mat-list-option>\n    </ng-container>\n  </mat-selection-list>\n  <span class=\"mx-show-all-btn\">\n    <button  mat-button (click)=\"onShowAllOptions()\" *ngIf=\"showLess < field['options'].length\">\n      {{field['showAllLabel'] ? field['showAllLabel'] : 'Show All'}}\n      <mat-icon aria-hidden=\"true\">keyboard_arrow_down</mat-icon>\n    </button>\n  </span>\n  <ng-container *ngTemplateOutlet=\"cfhelplaintext\"></ng-container>\n</ng-template>",
                encapsulation: ViewEncapsulation.None,
                styles: [".mx-field-lbl,.mx-field-lbl-for-label{display:block}.mx-field-lbl-horizontal{padding-top:20px}.mx-field-lbl-horizontal-premitive{padding-top:13px}.mx-field-hint-inline{text-align:right}.mx-field-hint-nm{font-size:75%}.mx-field-hint-nm .mx-field-hint-icon{height:1em;width:1em}.mx-field-hint-icon{font-size:100%!important}.mx-field-hint .mat-icon{margin-right:4px!important;vertical-align:middle!important}.mx-field{width:100%}.mx-field-chk-group{padding-top:24px}.mx-field-chk{display:flex;flex-direction:column;margin:0}.mx-field-chk-inner{margin:5px 0}.mx-field-chk-desc{padding-left:22px}.mx-field-radio-group{display:flex;flex-direction:column;margin:0}.mx-field-radio{margin:5px 0}.mx-field-radio-desc{padding-left:26px}.mx-disabled{color:rgba(0,0,0,.54)}.mx-field-slider{width:100%}.mx-field-slider .mat-slider-wrapper{top:16px!important}.mx-field-toggle{height:48px!important}.mx-field-help-modal{margin-left:0!important;width:20px}.mx-field-help-modal-header{font-size:20px;font-weight:500;padding:16px 16px 8px}.mx-field-help-modal-divider{padding:12px 16px 0}.mx-field-help-modal-description{padding:16px 16px 8px}.mx-form-add-more-row{padding:0!important}.mx-field-upload{vertical-align:middle}.mx-field-upload .file-input-text{display:none!important}.mx-field-img{padding-top:5px}.mx-field-showmore-pannel{background-color:#eff0f1;border-radius:3px;margin-bottom:1em!important;overflow:auto;padding:0 8px!important;width:auto}.mx-field-showmore-pannel-content{padding-bottom:5px}.mx-field-showmore-pannel-action{border-top:1px solid #d3d3d3;color:grey;padding-top:5px;text-align:center}.mx-field-horizontal-container{padding:0!important}.mx-field-horizontal-container label#mat-form-field-label-1{color:transparent}.mx-field-horizontal-container .mx-field-nm{margin-top:6px}.mx-field-boolean-success,.mx-success{color:green}.mx-failure,.mx-field-boolean-failure{color:red}.mx-field-boolean{margin-bottom:1.25em!important}.mat-flat-button,.mat-icon-button,.mat-stroked-button,.mx-field-addmore .mat-button{min-width:30px!important}.mx-small-bubble{box-sizing:border-box!important;font-size:10px;line-height:24px;margin-top:12px!important;min-height:24px!important;min-width:unset;padding:0 8px!important}.mx-field-value-wrapper-horizontal{padding-top:8px}.mx-field-value-wrapper-vertical{display:block;padding-bottom:12px}.mx-field-list{padding-bottom:8px}.mx-field-list>div{margin-bottom:1.25em;text-align:center}.mx-field-list .mx-field-list-option[aria-selected=true]{background:rgba(203,197,197,.2)!important}.mx-field-list .mx-field-list-option .mx-field-list-image{border:1px solid #4d4d4d;height:30px!important;width:30px!important}.mx-field-list .mx-field-list-option .primary{margin:5px 0}.mx-field-list .mx-field-list-option .secondary{font-style:italic}.mx-field-list .mx-field-list-option:not(:last-child){border-bottom:1px solid #ebebeb}.mx-field-list .mx-field-list-option:nth-last-child(2){border-bottom:none}.highlight{font-weight:700}.mx-show-all-btn{display:block}.mx-field-paragraph .mx-field{width:auto!important}.mx-field-paragraph .mx-field .mx-field-lbl,.mx-field-paragraph .mx-field .mx-field-value-wrapper-horizontal{display:inline;width:auto!important}.mx-field-lbl-inline{color:rgba(0,0,0,.54);font-size:10px;height:10px;line-height:10px;margin-bottom:8px}.mx-field-lbl-inline .mat-icon-button{color:rgba(0,0,0,.54);height:10px;line-height:8px;width:30px}.mat-slide-toggle{line-height:unset;margin-top:4px}.ql-toolbar.ql-snow{border:none;border-radius:4px 4px 0 0;box-shadow:0 0 1px -1px rgba(0,0,0,.2),0 0 1px 0 rgba(0,0,0,.14),0 0 3px 0 rgba(0,0,0,.12)}.ql-container.ql-snow{border:none;border-radius:0 0 4px 4px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)!important}.mx-field-editor-error{font-size:75%}.mx-field-editor-error .mat-error{margin-bottom:1.25em;margin-top:.5416666667em}.mx-editor-invalid .ql-toolbar.ql-snow{border:1px solid #f44336;border-bottom:none}.mx-editor-invalid .ql-container.ql-snow{border:1px solid #f44336}.mx-field-chk-group .mx-field-chk:last-child,.mx-field-radio-group{margin-bottom:1.25em!important}.mx-field-radio-horizontal{display:inline-block}.mx-field-radio-horizontal-padding{padding-right:10px}.mx-field-checkbox-horizontal{display:flex;padding-right:10px}.mx-disable,.mx-disable .ql-container,.mx-disable .ql-toolbar{opacity:.38}.mx-disable .mat-list-item-disabled{background:none}.mx-disable.mx-field-list:hover{outline:none}input[type=color],input[type=month],input[type=number],input[type=time],input[type=week]{-webkit-appearance:none;border:none;height:16px}input[type=color]::-webkit-color-swatch-wrapper{padding:0}input[type=color]::-webkit-color-swatch{border:none}"]
            },] }
];
FieldComponent.ctorParameters = () => [
    { type: Router },
    { type: Ability }
];
FieldComponent.propDecorators = {
    sourceType: [{ type: Input }],
    sourceIdentifier: [{ type: Input }],
    sourceIndex: [{ type: Input }],
    widgetArrayIndex: [{ type: Input }],
    form: [{ type: Input }],
    fieldControl: [{ type: Input }],
    fieldIndex: [{ type: Input }],
    field: [{ type: Input }],
    originalData: [{ type: Input }],
    _displayMode: [{ type: Input }],
    displayMode: [{ type: Input }],
    hideLabel: [{ type: Input }],
    value: [{ type: Input }],
    isAddMore: [{ type: Input }],
    addMorePermission: [{ type: Input }],
    device: [{ type: Input }],
    displayInColumns: [{ type: Input }],
    dependencies: [{ type: Input }],
    row: [{ type: Input }],
    keyMap: [{ type: Input }],
    onDependentFieldChange: [{ type: Output }],
    onFieldChange: [{ type: Output }],
    onFormChange: [{ type: Output }],
    onButtonClick: [{ type: Output }],
    listView: [{ type: ViewChild, args: ['listView',] }],
    sidenav: [{ type: ViewChild, args: ['sidenav',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmllbGQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9uaXRpbmtoYWl0YW4vTml0aW4vc3R1ZHkvYW5ndWxhci9tYXRlcmlhbC9hZG1pbi1idWlsZGVyLXBsdWdpbi9wcm9qZWN0cy9uZ3gtbWF0ZXJpYWwtd2lkZ2V0L3NyYy8iLCJzb3VyY2VzIjpbImxpYi9maWVsZC9jb21wb25lbnQvZmllbGQvZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdHLE9BQU8sRUFBRSxTQUFTLEVBQW1FLE1BQU0sZ0JBQWdCLENBQUM7QUFLNUcsT0FBTyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBS3ZGLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUl6QyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUdqRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDaEUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV4QyxNQUFNLE9BQU8sc0JBQXNCO0lBQ2pDLFlBQVksQ0FBQyxPQUEyQixFQUFFLElBQXdDO1FBQ2hGLHlCQUF5QjtRQUN6QixPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM5RSxDQUFDO0NBQ0Y7QUFRRCxNQUFNLE9BQU8sY0FBYztJQXNGekIsWUFBbUIsTUFBYyxFQUFTLE9BQWdCO1FBQXZDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFBUyxZ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LEtBQUs7cUNBQ0wsTUFBTTs0QkFDTixNQUFNOzJCQUNOLE1BQU07NEJBQ04sTUFBTTt1QkFnRE4sU0FBUyxTQUFDLFVBQVU7c0JBNkhwQixTQUFTLFNBQUMsU0FBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0VuY2Fwc3VsYXRpb24sIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cERpcmVjdGl2ZSwgTmdGb3JtLCBWYWxpZGF0b3JGbiwgRm9ybUFycmF5IH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5cbmltcG9ydCB7IEZpZWxkLCBLZXlNYXAsIEF1dG9jb21wbGV0ZUZpZWxkLCBEcm9wZG93bk9wdGlvbiwgRHJvcGRvd25GaWVsZCwgRmllbGRUeXBlLCBIdG1sRWRpdG9yRmllbGQsIFRleHRGaWVsZCwgSW5wdXRGaWVsZCwgSW1hZ2VGaWVsZCwgQ2FsZW5kYXJGaWVsZCwgQ2hlY2tib3hGaWVsZCwgRmlsZUZpZWxkLCBSYWRpb0ZpZWxkLCBUb2dnbGVGaWVsZCwgU2xpZGVyRmllbGQsIEZpZWxkQ2hhbmdlLCBMYWJlbEZpZWxkLCBMYWJlbFRleHRBbGlnbiwgT3B0aW9uRGlzcGxheVRlbXBsYXRlIH0gZnJvbSAnLi4vLi4vbW9kZWwnO1xuaW1wb3J0IHsgRm9ybURpYXBseU1vZGUgfSBmcm9tICcuLi8uLi8uLi9mb3JtL21vZGVsJztcbmltcG9ydCB7IFN0cmluZ1V0aWxzLCBGaWVsZFV0aWxzLCBDb2xsZWN0aW9uVXRpbHMsIEZvcm1VdGlscyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHknO1xuXG5pbXBvcnQgeyBzdGFydFdpdGgsIHN3aXRjaE1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEVycm9yU3RhdGVNYXRjaGVyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgQWN0aW9uLCBCdXR0b25Db2xvciwgQnV0dG9uU2l6ZSwgQnV0dG9uVHlwZSwgQnV0dG9uLCBSZXNlcnZlZEJ1dHRvbiB9IGZyb20gJy4uLy4uLy4uL2J1dHRvbi9tb2RlbCc7XG5pbXBvcnQgeyBNYXREYXRlcGlja2VySW5wdXRFdmVudCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RhdGVwaWNrZXInO1xuaW1wb3J0IHsgTWF0U2lkZW5hdiB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NpZGVuYXYnO1xuaW1wb3J0IHsgcXVpbGxDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9odG1sLmVkaXRvci5jb25maWd1cmF0aW9uJztcbmltcG9ydCB7IE1hdFNlbGVjdGlvbkxpc3QsIE1hdFNlbGVjdGlvbkxpc3RDaGFuZ2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9saXN0JztcbmltcG9ydCB7IFBlcm1pc3Npb24gfSBmcm9tICcuLi8uLi8uLi9wcml2aWxlZ2UvbW9kZWwnO1xuaW1wb3J0IHsgQWJpbGl0eVV0aWxzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS9hYmlsaXR5LnV0aWxpdHknO1xuaW1wb3J0IHsgQWJpbGl0eSB9IGZyb20gJ0BjYXNsL2FiaWxpdHknO1xuXG5leHBvcnQgY2xhc3MgRmllbGRFcnJvclN0YXRlTWF0Y2hlciBpbXBsZW1lbnRzIEVycm9yU3RhdGVNYXRjaGVyIHtcbiAgaXNFcnJvclN0YXRlKGNvbnRyb2w6IEZvcm1Db250cm9sIHwgbnVsbCwgZm9ybTogRm9ybUdyb3VwRGlyZWN0aXZlIHwgTmdGb3JtIHwgbnVsbCk6IGJvb2xlYW4ge1xuICAgIC8vICAgIGNvbnNvbGUubG9nKFwiMTExXCIpO1xuICAgIHJldHVybiAhIShjb250cm9sICYmIGNvbnRyb2wuaW52YWxpZCAmJiAoY29udHJvbC5kaXJ0eSB8fCBjb250cm9sLnRvdWNoZWQpKTtcbiAgfVxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdteC1maWVsZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9maWVsZC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2ZpZWxkLmNvbXBvbmVudC5zY3NzJ10sXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgRmllbGRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBzb3VyY2VUeXBlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHNvdXJjZUlkZW50aWZpZXI6IHN0cmluZztcbiAgQElucHV0KCkgc291cmNlSW5kZXg6IG51bWJlcjtcbiAgQElucHV0KCkgd2lkZ2V0QXJyYXlJbmRleDogbnVtYmVyO1xuICBASW5wdXQoKSBmb3JtOiBGb3JtR3JvdXA7XG4gIEBJbnB1dCgpIGZpZWxkQ29udHJvbDogRm9ybUNvbnRyb2wgfCBGb3JtR3JvdXA7XG4gIEBJbnB1dCgpIGZpZWxkSW5kZXg6IG51bWJlcjtcbiAgQElucHV0KCkgZmllbGQ6IEZpZWxkIHwgVGV4dEZpZWxkIHwgTGFiZWxGaWVsZCB8IElucHV0RmllbGQgfCBEcm9wZG93bkZpZWxkIHwgSHRtbEVkaXRvckZpZWxkIHwgSW1hZ2VGaWVsZCB8IENhbGVuZGFyRmllbGQgfCBBdXRvY29tcGxldGVGaWVsZCB8IENoZWNrYm94RmllbGQgfCBGaWxlRmllbGQgfCBSYWRpb0ZpZWxkIHwgU2xpZGVyRmllbGQgfCBUb2dnbGVGaWVsZDtcbiAgQElucHV0KCkgb3JpZ2luYWxEYXRhOiBhbnk7XG4gIEBJbnB1dCgpIF9kaXNwbGF5TW9kZTogRm9ybURpYXBseU1vZGU7XG4gIGdldCBkaXNwbGF5TW9kZSgpOiBGb3JtRGlhcGx5TW9kZSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc3BsYXlNb2RlO1xuICB9XG4gIEBJbnB1dCgpXG4gIHNldCBkaXNwbGF5TW9kZShfZGlzcGxheU1vZGU6IEZvcm1EaWFwbHlNb2RlKSB7XG4gICAgdGhpcy5fZGlzcGxheU1vZGUgPSBfZGlzcGxheU1vZGU7XG4gICAgdGhpcy5pc0ZpZWxkRGlzYWJsZWQgPSB0aGlzLmZpZWxkRGlzYWJsZWQoKTtcbiAgfVxuXG4gIEBJbnB1dCgpIGhpZGVMYWJlbDogYm9vbGVhbjtcbiAgQElucHV0KCkgdmFsdWU6IGFueTtcbiAgQElucHV0KCkgaXNBZGRNb3JlOiBib29sZWFuO1xuICBASW5wdXQoKSBhZGRNb3JlUGVybWlzc2lvbjogUGVybWlzc2lvbjtcblxuICBASW5wdXQoKSBkZXZpY2U6IHN0cmluZztcbiAgQElucHV0KCkgZGlzcGxheUluQ29sdW1uczogbnVtYmVyO1xuICBhZGRNb3JlRmllbGREaXNwbGF5SW5Db2x1bW5zOiBudW1iZXI7XG4gIGFkZE1vcmVCdXR0b25EaXNwbGF5SW5Db2x1bW5zOiBudW1iZXI7XG5cbiAgQElucHV0KCkgZGVwZW5kZW5jaWVzOiBhbnk7XG4gIEBJbnB1dCgpIHJvdzogYW55O1xuICBASW5wdXQoKSBrZXlNYXA6IEFycmF5PEtleU1hcD47XG4gIEBPdXRwdXQoKSBvbkRlcGVuZGVudEZpZWxkQ2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uRmllbGRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvbkZvcm1DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvbkJ1dHRvbkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIGNoYXJMaW1pdDogbnVtYmVyO1xuICBlbGxpcHNpc1JlcXVpcmVkOiBib29sZWFuID0gZmFsc2U7XG4gIHJlc29sdmVkVmFsdWU6IGFueTtcblxuICBtYXRjaGVyOiBFcnJvclN0YXRlTWF0Y2hlcjtcbiAgaXNSZXF1aXJlZDogYm9vbGVhbjtcbiAgaXNGaWVsZERpc2FibGVkOiBib29sZWFuO1xuICBoYXNGaWVsZE5hdmlnYXRlOiBib29sZWFuO1xuICBoYXNIaW50SWNvbjogYm9vbGVhbjtcbiAgbWF4TGVuZ3RoOiBudW1iZXI7XG4gIG1pbjogbnVtYmVyO1xuICBtYXg6IG51bWJlcjtcbiAgaW1nVVJMOiBhbnk7XG4gIGltYWdlUGF0aDogc3RyaW5nO1xuICBhcHBlYXJhbmNlOiBzdHJpbmc7XG4gIGhhc0NsZWFyOiBib29sZWFuO1xuICB0ZXh0Q2xlYXJCdXR0b246IEJ1dHRvbjtcbiAgcm91dGVUb0J1dHRvbjogQnV0dG9uO1xuICBoZWxwTW9kYWxCdXR0b246IEJ1dHRvbjtcbiAgcm93czogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcblxuICBhc0J1YmJsZTogYm9vbGVhbjtcbiAgYnViYmxlQ29sb3I6IEJ1dHRvbkNvbG9yO1xuICB0ZXh0QWxpZ246IExhYmVsVGV4dEFsaWduO1xuXG4gIHBsdXNCdXR0b246IEJ1dHRvbjtcbiAgbWludXNCdXR0b246IEJ1dHRvbjtcblxuICBlZGl0b3JPcHRpb25zID0gcXVpbGxDb25maWd1cmF0aW9uO1xuXG4gIG9uTGlzdFNlbGVjdGlvbkZ1YzogRnVuY3Rpb24gPSBudWxsO1xuICBsaXN0T3B0aW9uczogQXJyYXk8RHJvcGRvd25PcHRpb24+ID0gbnVsbDtcbiAgZW5hYmxlTXVsdGlTZWxlY3Rpb246IGJvb2xlYW47XG4gIGF1dG9Db21wbGV0ZU9wdGlvbnM6IE9ic2VydmFibGU8RHJvcGRvd25PcHRpb25bXT47XG4gIGF1dG9Db21wbGV0ZVJlc3VsdENvdW50OiBudW1iZXI7XG4gIGRhdGVSYW5nZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIG1pbkxlbmd0aEZvclRyaWdnZXI6IG51bWJlciA9IDM7XG4gIGhpZ2hsaWdodEF1dG9Db21wbGV0ZVRleHQ6IHN0cmluZyA9ICcnO1xuXG4gIHNob3dMZXNzOiBudW1iZXI7XG5cbiAgaXNFZGl0b3JFcnJvclN0YXRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhISh0aGlzLmZpZWxkQ29udHJvbCAmJiB0aGlzLmZpZWxkQ29udHJvbC5pbnZhbGlkICYmICh0aGlzLmZpZWxkQ29udHJvbC5kaXJ0eSB8fCB0aGlzLmZpZWxkQ29udHJvbC50b3VjaGVkKSk7XG4gIH1cbiAgQFZpZXdDaGlsZCgnbGlzdFZpZXcnKSBsaXN0VmlldzogTWF0U2VsZWN0aW9uTGlzdDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcm91dGVyOiBSb3V0ZXIsIHB1YmxpYyBhYmlsaXR5OiBBYmlsaXR5KSB7XG4gICAgQWJpbGl0eVV0aWxzLnNldEFiaWxpdHkodGhpcy5hYmlsaXR5KTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICgoPFRleHRGaWVsZD50aGlzLmZpZWxkKS5wbGFjZWhvbGRlciA9PSB1bmRlZmluZWQpIHtcbiAgICAgICg8VGV4dEZpZWxkPnRoaXMuZmllbGQpLnBsYWNlaG9sZGVyID0gXCJcIjtcbiAgICB9XG4gICAgaWYgKCg8VGV4dEZpZWxkPnRoaXMuZmllbGQpLmVsbGlwc2lzICYmICg8VGV4dEZpZWxkPnRoaXMuZmllbGQpLmVsbGlwc2lzID4gMCkge1xuICAgICAgdGhpcy5jaGFyTGltaXQgPSAoPFRleHRGaWVsZD50aGlzLmZpZWxkKS5lbGxpcHNpcztcbiAgICB9XG5cbiAgICB0aGlzLm1hdGNoZXIgPSBuZXcgRmllbGRFcnJvclN0YXRlTWF0Y2hlcigpO1xuICAgIHRoaXMuZ2V0VmFsdWUodGhpcy5maWVsZCwgdGhpcy52YWx1ZSk7XG4gICAgdGhpcy5pc1JlcXVpcmVkID0gdGhpcy5yZXF1aXJlZCgpO1xuICAgIHRoaXMuaXNGaWVsZERpc2FibGVkID0gdGhpcy5maWVsZERpc2FibGVkKCk7XG4gICAgdGhpcy5oYXNGaWVsZE5hdmlnYXRlID0gdGhpcy5maWVsZE5hdmlnYXRlKCk7XG4gICAgdGhpcy5oYXNIaW50SWNvbiA9IHRoaXMuZGlzcGxheUhpbnRJY29uKCk7XG4gICAgdGhpcy5zZXRNYXhMZW5ndGgoKTtcbiAgICB0aGlzLnNldE51bWJlck1pbk1heCgpO1xuICAgIHRoaXMuc2V0QXBwZWFyYW5jZSgpO1xuICAgIHRoaXMuc2V0T3B0aW9uSW5EaXNwbGF5KCk7XG4gICAgdGhpcy5nZXRJbWFnZVBhdGgodGhpcy5maWVsZCk7XG4gICAgdGhpcy5zZXRSb3dzKCk7XG4gICAgdGhpcy5zZXRIZWlnaHQoKTtcbiAgICB0aGlzLnNldENsZWFyKCk7XG4gICAgdGhpcy5zZXRBc0J1YmJsZSgpO1xuICAgIHRoaXMuc2V0VGV4dEFsaWduKCk7XG4gICAgdGhpcy5zZXRBZGRNb3JlRGlzcGxheUluQ29sdW1uKCk7XG4gICAgdGhpcy5zZXRNaW5MZW5ndGhGb3JUcmlnZ2VyKCk7XG4gICAgLy8gICAgdGhpcy5hdXRvY29tcGxldGVJbml0KCk7XG4gICAgdGhpcy5zZXREaXNwbGF5VGVtcGxhdGUoKTtcbiAgICB0aGlzLnNldENhbGVuZGFyKCk7XG4gICAgdGhpcy5zZXRTaG93TGVzcygpO1xuICAgIHRoaXMudGV4dENsZWFyQnV0dG9uID0gdGhpcy5zZXRUZXh0Q2xlYXJCdXR0b24oJ2ZpZWxkVGV4dENsZWFyQnRuJywgXCJDbGVhciBUZXh0XCIsIFwiY2FuY2VsXCIsIG51bGwpO1xuICAgIGlmICh0aGlzLmZpZWxkLm5hdmlnYXRlKSB7XG4gICAgICB0aGlzLnJvdXRlVG9CdXR0b24gPSB0aGlzLnNldFRleHRDbGVhckJ1dHRvbignZmllbGRSb3V0ZVRvQnRuJywgdGhpcy5maWVsZC5uYXZpZ2F0ZS50ZXh0LCB0aGlzLmZpZWxkLm5hdmlnYXRlLmljb24gPyB0aGlzLmZpZWxkLm5hdmlnYXRlLmljb24gOiBcImNhbGxfbWFkZVwiLCB0aGlzLmZpZWxkLm5hdmlnYXRlLnJvdXRlVG8pO1xuICAgIH1cbiAgICB0aGlzLmhlbHBNb2RhbEJ1dHRvbiA9IHRoaXMuc2V0SGVscEJ1dHRvbignaGVscENsb3NlQnV0dG9uJywgJ0Nsb3NlJywgJ2Nsb3NlJyk7XG5cbiAgICB0aGlzLnBsdXNCdXR0b24gPSB0aGlzLmFkZFJlbW92ZUJ1dHRvbihSZXNlcnZlZEJ1dHRvbi5BRERfRklFTEQsIFwiQWRkXCIsIFwiYWRkXCIpO1xuICAgIHRoaXMubWludXNCdXR0b24gPSB0aGlzLmFkZFJlbW92ZUJ1dHRvbihSZXNlcnZlZEJ1dHRvbi5SRU1PVkVfRklFTEQsIFwiTWludXNcIiwgXCJyZW1vdmVcIik7XG4gIH1cblxuICBzZXREaXNwbGF5VGVtcGxhdGUoKTogdm9pZCB7XG4gICAgaWYgKCh0aGlzLmZpZWxkLnR5cGUgPT0gRmllbGRUeXBlLlJBRElPIHx8IHRoaXMuZmllbGQudHlwZSA9PSBGaWVsZFR5cGUuQ0hFQ0tCT1gpICYmIFN0cmluZ1V0aWxzLmlzRW1wdHkoKDxSYWRpb0ZpZWxkIHwgQ2hlY2tib3hGaWVsZD50aGlzLmZpZWxkKS5kaXNwbGF5VGVtcGxhdGUpKSB7XG4gICAgICAoPFJhZGlvRmllbGQgfCBDaGVja2JveEZpZWxkPnRoaXMuZmllbGQpLmRpc3BsYXlUZW1wbGF0ZSA9IE9wdGlvbkRpc3BsYXlUZW1wbGF0ZS5DTEFTU0lDO1xuICAgIH1cbiAgfVxuXG4gIHNldEFkZE1vcmVEaXNwbGF5SW5Db2x1bW4oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNBZGRNb3JlKSB7XG4gICAgICBpZiAodGhpcy5kZXZpY2UgPT0gJ2Rlc2t0b3AnKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlJbkNvbHVtbnMgPCA2KSB7XG4gICAgICAgICAgdGhpcy5hZGRNb3JlRmllbGREaXNwbGF5SW5Db2x1bW5zID0gMTA7XG4gICAgICAgICAgdGhpcy5hZGRNb3JlQnV0dG9uRGlzcGxheUluQ29sdW1ucyA9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hZGRNb3JlRmllbGREaXNwbGF5SW5Db2x1bW5zID0gMTE7XG4gICAgICAgICAgdGhpcy5hZGRNb3JlQnV0dG9uRGlzcGxheUluQ29sdW1ucyA9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGV2aWNlID09ICd0YWJsZXQnKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlJbkNvbHVtbnMgPCA2KSB7XG4gICAgICAgICAgdGhpcy5hZGRNb3JlRmllbGREaXNwbGF5SW5Db2x1bW5zID0gNjtcbiAgICAgICAgICB0aGlzLmFkZE1vcmVCdXR0b25EaXNwbGF5SW5Db2x1bW5zID0gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFkZE1vcmVGaWVsZERpc3BsYXlJbkNvbHVtbnMgPSA3O1xuICAgICAgICAgIHRoaXMuYWRkTW9yZUJ1dHRvbkRpc3BsYXlJbkNvbHVtbnMgPSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRldmljZSA9PSAnbW9iaWxlJykge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5SW5Db2x1bW5zIDwgMykge1xuICAgICAgICAgIHRoaXMuYWRkTW9yZUZpZWxkRGlzcGxheUluQ29sdW1ucyA9IDM7XG4gICAgICAgICAgdGhpcy5hZGRNb3JlQnV0dG9uRGlzcGxheUluQ29sdW1ucyA9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hZGRNb3JlRmllbGREaXNwbGF5SW5Db2x1bW5zID0gMztcbiAgICAgICAgICB0aGlzLmFkZE1vcmVCdXR0b25EaXNwbGF5SW5Db2x1bW5zID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuICB9XG5cbiAgc2V0TWluTGVuZ3RoRm9yVHJpZ2dlcigpOiB2b2lkIHtcbiAgICB0aGlzLm1pbkxlbmd0aEZvclRyaWdnZXIgPSAoPEF1dG9jb21wbGV0ZUZpZWxkPnRoaXMuZmllbGQpLm1pbkxlbmd0aEZvclRyaWdnZXIgPyAoPEF1dG9jb21wbGV0ZUZpZWxkPnRoaXMuZmllbGQpLm1pbkxlbmd0aEZvclRyaWdnZXIgOiAzO1xuICB9XG5cbiAgc2V0Um93cygpOiB2b2lkIHtcbiAgICB0aGlzLnJvd3MgPSAoPFRleHRGaWVsZD50aGlzLmZpZWxkKS5yb3dzID8gKDxUZXh0RmllbGQ+dGhpcy5maWVsZCkucm93cyA6IDE7XG4gIH1cblxuICBzZXRIZWlnaHQoKTogdm9pZCB7XG4gICAgdGhpcy5oZWlnaHQgPSAoPEh0bWxFZGl0b3JGaWVsZD50aGlzLmZpZWxkKS5oZWlnaHQgPyAoPEh0bWxFZGl0b3JGaWVsZD50aGlzLmZpZWxkKS5oZWlnaHQgOiAzMDA7XG4gIH1cblxuICBzZXRBcHBlYXJhbmNlKCk6IHZvaWQge1xuICAgIHRoaXMuYXBwZWFyYW5jZSA9ICg8VGV4dEZpZWxkIHwgSW5wdXRGaWVsZD50aGlzLmZpZWxkKS5hcHBlYXJhbmNlID8gKDxUZXh0RmllbGQgfCBJbnB1dEZpZWxkPnRoaXMuZmllbGQpLmFwcGVhcmFuY2UgOiAnc3RhbmRhcmQnO1xuICB9XG5cbiAgc2V0QXNCdWJibGUoKTogdm9pZCB7XG4gICAgdGhpcy5hc0J1YmJsZSA9ICg8TGFiZWxGaWVsZD50aGlzLmZpZWxkKS5hc0J1YmJsZSA/ICg8TGFiZWxGaWVsZD50aGlzLmZpZWxkKS5hc0J1YmJsZSA6IGZhbHNlO1xuICAgIHRoaXMuYnViYmxlQ29sb3IgPSAoPExhYmVsRmllbGQ+dGhpcy5maWVsZCkuYnViYmxlQ29sb3IgPyAoPExhYmVsRmllbGQ+dGhpcy5maWVsZCkuYnViYmxlQ29sb3IgOiBCdXR0b25Db2xvci5ERUZBVUxUO1xuICB9XG5cbiAgc2V0VGV4dEFsaWduKCk6IHZvaWQge1xuICAgIHRoaXMudGV4dEFsaWduID0gKDxMYWJlbEZpZWxkPnRoaXMuZmllbGQpLnRleHRBbGlnbiA/ICg8TGFiZWxGaWVsZD50aGlzLmZpZWxkKS50ZXh0QWxpZ24gOiBMYWJlbFRleHRBbGlnbi5MRUZUO1xuICB9XG5cbiAgc2V0TWF4TGVuZ3RoKCk6IHZvaWQge1xuICAgIHRoaXMubWF4TGVuZ3RoID0gKDxUZXh0RmllbGQ+dGhpcy5maWVsZCkubWF4TGVuZ3RoID8gKDxUZXh0RmllbGQ+dGhpcy5maWVsZCkubWF4TGVuZ3RoIDogMTAwMDAwMDtcbiAgfVxuXG4gIHNldE51bWJlck1pbk1heCgpOiB2b2lkIHtcbiAgICB0aGlzLm1pbiA9ICg8SW5wdXRGaWVsZD50aGlzLmZpZWxkKS5taW4gPyAoPElucHV0RmllbGQ+dGhpcy5maWVsZCkubWluIDogbnVsbDtcbiAgICB0aGlzLm1heCA9ICg8SW5wdXRGaWVsZD50aGlzLmZpZWxkKS5tYXggPyAoPElucHV0RmllbGQ+dGhpcy5maWVsZCkubWF4IDogbnVsbDtcbiAgfVxuXG4gIGRpc3BsYXlIaW50SWNvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZC5oZWxwICYmIHRoaXMuZmllbGQuaGVscC5pY29uID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgQFZpZXdDaGlsZCgnc2lkZW5hdicpIHNpZGVuYXY6IE1hdFNpZGVuYXY7XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuc2lkZW5hdi5jbG9zZSgpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5zaWRlbmF2Lm9wZW4oKTtcbiAgfVxuXG4gIHNldEhlbHBCdXR0b24oaWRlbnRpZmllcjogc3RyaW5nLCBsYWJlbDogc3RyaW5nLCBpY29uOiBzdHJpbmcpOiBCdXR0b24ge1xuICAgIHJldHVybiB7XG4gICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgY29sb3I6IEJ1dHRvbkNvbG9yLlBSSU1BUlksXG4gICAgICBzaXplOiBCdXR0b25TaXplLlNNQUxMLFxuICAgICAgaWNvbjogaWNvbixcbiAgICAgIHR5cGU6IEJ1dHRvblR5cGUuR0hPU1QsXG4gICAgICBvbmx5SWNvbjogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgcmVxdWlyZWQoKTogYm9vbGVhbiB7XG4gICAgbGV0IGlzUmVxdWlyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpZiAodGhpcy5maWVsZC52YWxpZGF0aW9ucyAmJiB0aGlzLmZpZWxkLnZhbGlkYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IHZhbGlkYXRpb24gb2YgdGhpcy5maWVsZC52YWxpZGF0aW9ucykge1xuICAgICAgICBpZiAodmFsaWRhdGlvbi5tZXNzYWdlLmtleSA9PSBcInJlcXVpcmVkXCIpIHtcbiAgICAgICAgICBpc1JlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMuZmllbGQubGFiZWwpKSB7XG4gICAgICBpc1JlcXVpcmVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzUmVxdWlyZWQ7XG4gIH1cblxuICBmaWVsZE5hdmlnYXRlKCk6IGJvb2xlYW4ge1xuICAgIGxldCBoYXNGaWVsZE5hdmlnYXRlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmZpZWxkLm5hdmlnYXRlICYmXG4gICAgICAoIVN0cmluZ1V0aWxzLmlzRW1wdHkodGhpcy5maWVsZC5uYXZpZ2F0ZS5pY29uKSB8fCAhU3RyaW5nVXRpbHMuaXNFbXB0eSh0aGlzLmZpZWxkLm5hdmlnYXRlLnRleHQpKSAmJlxuICAgICAgIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KHRoaXMuZmllbGQubmF2aWdhdGUucm91dGVUbylcbiAgICApIHtcbiAgICAgIGhhc0ZpZWxkTmF2aWdhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNGaWVsZE5hdmlnYXRlO1xuICB9XG5cbiAgZmllbGREaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICBsZXQgaXNEaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuZmllbGQuYWx3YXlzRW5hYmxlKSB7fSBlbHNlIHtcbiAgICAgIGlzRGlzYWJsZWQgPSBGaWVsZFV0aWxzLmlzRmllbGREaXNhYmxlZCh0aGlzLmZpZWxkLCB0aGlzLl9kaXNwbGF5TW9kZSwgdGhpcy5yZXNvbHZlZFZhbHVlKTtcbiAgICAgIGlmIChpc0Rpc2FibGVkKSB7XG4gICAgICAgIEZvcm1VdGlscy5kaXNhYmxlRmllbGRDb250cm9sKDxGb3JtQ29udHJvbD50aGlzLmZpZWxkQ29udHJvbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzRGlzYWJsZWQ7XG4gIH1cblxuICBnZXRWYWx1ZShmaWVsZDogRmllbGQsIHR4dDogYW55KTogYW55IHtcbiAgICBsZXQgdmFsdWU6IHN0cmluZyA9IFwiXCI7XG4gICAgbGV0IGluaXRpYWxMZW5ndGggPSAwO1xuICAgIGxldCBmaW5hbExlbmd0aCA9IDA7XG5cbiAgICBpZiAodGhpcy5maWVsZENvbnRyb2wgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuZmllbGRDb250cm9sLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHR4dDtcbiAgICB9XG5cbiAgICBpZiAoZmllbGQudHlwZSAhPSBGaWVsZFR5cGUuRFJPUERPV04pIHtcbiAgICAgIGlmICh0aGlzLmtleU1hcCAmJiB0aGlzLmtleU1hcC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMua2V5TWFwXG4gICAgICAgICAgLmZpbHRlcihvYmpzID0+IHtcbiAgICAgICAgICAgIGxldCBoYXNBc3NvY2lhdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShvYmpzKSAmJiAhQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkob2Jqcy5hc3NvY2lhdGlvbnMpKSB7XG4gICAgICAgICAgICAgIG9ianMuYXNzb2NpYXRpb25zLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuZmllbGRLZXkgPT0gZmllbGQua2V5ICYmIGVsZW1lbnQuY29tcG9uZW50SWRlbnRpZmllciA9PSB0aGlzLnNvdXJjZUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICAgIGhhc0Fzc29jaWF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhhc0Fzc29jaWF0aW9uO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgICAgICAgaWYgKGZpZWxkWydvcHRpb25zJ10gJiYgZmllbGRbJ29wdGlvbnMnXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBmaWVsZFsnb3B0aW9ucyddLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZFsnb3B0aW9ucyddW2luZGV4XS5rZXkgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gZmllbGRbJ29wdGlvbnMnXVtpbmRleF0udmFsdWU7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlc29sdmVkVmFsdWUgPSB2YWx1ZTtcblxuICAgIGlmIChGaWVsZFV0aWxzLmlzRWxsaXBzaXNGaWVsZCh0aGlzLmZpZWxkKSAmJiBGaWVsZFV0aWxzLmRpc3BsYXlFbGxpcHNpcyh0aGlzLmNoYXJMaW1pdCwgdGhpcy5yZXNvbHZlZFZhbHVlKSkge1xuICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICBpbml0aWFsTGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuXG4gICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cigwLCAoPFRleHRGaWVsZD50aGlzLmZpZWxkKS5lbGxpcHNpcyk7XG4gICAgICBmaW5hbExlbmd0aCA9IHZhbHVlLmxlbmd0aDtcblxuICAgICAgdmFsdWUgKz0gXCIuLi5cIjtcblxuICAgICAgaWYgKGluaXRpYWxMZW5ndGggPiBmaW5hbExlbmd0aCkge1xuICAgICAgICB0aGlzLmVsbGlwc2lzUmVxdWlyZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGRpc3BsYXlGdWxsVGV4dCgpIHtcbiAgICBsZXQgcmVzb2x2ZWRWYWx1ZVN0ciA9IEpTT04uc3RyaW5naWZ5KHRoaXMucmVzb2x2ZWRWYWx1ZSk7XG4gICAgaWYgKCFTdHJpbmdVdGlscy5pc0VtcHR5KHJlc29sdmVkVmFsdWVTdHIpKSB7XG4gICAgICB0aGlzLmNoYXJMaW1pdCA9IHJlc29sdmVkVmFsdWVTdHIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIGRpc3BsYXlTaG9ydFRleHQoKSB7XG4gICAgaWYgKCg8VGV4dEZpZWxkPnRoaXMuZmllbGQpLmVsbGlwc2lzICYmICg8VGV4dEZpZWxkPnRoaXMuZmllbGQpLmVsbGlwc2lzID4gMCkge1xuICAgICAgdGhpcy5jaGFyTGltaXQgPSAoPFRleHRGaWVsZD50aGlzLmZpZWxkKS5lbGxpcHNpcztcbiAgICAgIHRoaXMuZGlzcGxheUVsbGlwc2lzKCk7XG4gICAgfVxuICB9XG5cbiAgZGlzcGxheUVsbGlwc2lzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBGaWVsZFV0aWxzLmRpc3BsYXlFbGxpcHNpcyh0aGlzLmNoYXJMaW1pdCwgdGhpcy5yZXNvbHZlZFZhbHVlKTtcbiAgfVxuXG4gIHNldENhbGVuZGFyKCkge1xuICAgIGlmICh0aGlzLmZpZWxkLnR5cGUgPT09IEZpZWxkVHlwZS5DQUxFTkRBUikge1xuICAgICAgdGhpcy5kYXRlUmFuZ2UgPSAoPENhbGVuZGFyRmllbGQ+dGhpcy5maWVsZCkuZGF0ZVJhbmdlO1xuICAgIH1cbiAgfVxuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEFVVE9DT01QTEVURSAtIFNUQVJUIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBwcml2YXRlIGludm9rZU9uQ2hhbmdlT25GaWVsZCh2YWx1ZTogc3RyaW5nLCBpbnB1dDogYW55KTogYm9vbGVhbiB7XG4gICAgbGV0IGludm9rZU9uQ2hhbmdlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5BVVRPQ09NUExFVEUpIHtcbiAgICAgIHRoaXMuYXV0b0NvbXBsZXRlSW5wdXRIYXNWYWx1ZSA9ICEhdmFsdWU7XG5cbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPj0gdGhpcy5taW5MZW5ndGhGb3JUcmlnZ2VyKSB7XG4gICAgICAgIHRoaXMuYXV0b0NvbXBsZXRlSW5wdXRIYXNWYWx1ZSA9ICEhdmFsdWU7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0QXV0b0NvbXBsZXRlVGV4dCA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hdXRvQ29tcGxldGVJbnB1dEhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0QXV0b0NvbXBsZXRlVGV4dCA9ICcnO1xuICAgICAgfVxuICAgICAgaW52b2tlT25DaGFuZ2UgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnZva2VPbkNoYW5nZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludm9rZU9uQ2hhbmdlO1xuICB9XG5cbiAgYXV0b2NvbXBsZXRlRGlzcGxheUZuKG9wdGlvbjogRHJvcGRvd25PcHRpb24gfCBhbnkpOiBzdHJpbmcge1xuICAgIGxldCB2YWx1ZTogc3RyaW5nO1xuICAgIGlmIChvcHRpb24gIT0gbnVsbCAmJiBvcHRpb24ua2V5ICE9IG51bGwpIHtcbiAgICAgIHZhbHVlID0gb3B0aW9uLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IG9wdGlvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBwcml2YXRlIF9maWx0ZXIodmFsdWU6IHN0cmluZyk6IEFycmF5PERyb3Bkb3duT3B0aW9uPiB7XG4gICAgY29uc3QgZmlsdGVyVmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciByZXN1bHQgPSAoPEF1dG9jb21wbGV0ZUZpZWxkPnRoaXMuZmllbGQpLm9wdGlvbnMuZmlsdGVyKG9wdGlvbiA9PiBvcHRpb24udmFsdWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJWYWx1ZSkpO1xuICAgIHRoaXMuYXV0b0NvbXBsZXRlUmVzdWx0Q291bnQgPSByZXN1bHQubGVuZ3RoO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQVVUT0NPTVBMRVRFIC0gRU5EIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERST1BET1dOIE9QVElPTiAtIFNUQVJUIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBzZXRPcHRpb25JbkRpc3BsYXkoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmllbGRbJ29wdGlvbnMnXSAmJiB0aGlzLmZpZWxkQ29udHJvbCkge1xuICAgICAgbGV0IGtleTogYW55ID0gdGhpcy5maWVsZENvbnRyb2wudmFsdWU7XG5cbiAgICAgIGZvciAobGV0IGNudCA9IDA7IGNudCA8ICh0aGlzLmZpZWxkWydvcHRpb25zJ10gYXMgQXJyYXk8RHJvcGRvd25PcHRpb24+KS5sZW5ndGg7IGNudCsrKSB7XG4gICAgICAgIGlmICh0aGlzLmZpZWxkWydvcHRpb25zJ11bY250XS5rZXkgPT09IGtleSkge1xuICAgICAgICAgIHRoaXMuZmllbGRbJ29wdGlvbnMnXVtjbnRdLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICBzZXRDbGVhcigpIHtcbiAgICBsZXQgaGFzQ2xlYXIgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5yZXNvbHZlZFZhbHVlICYmICg8VGV4dEZpZWxkPnRoaXMuZmllbGQpLmhhc0NsZWFyICYmIChcbiAgICAgIHRoaXMuZmllbGQudHlwZSA9PSBGaWVsZFR5cGUuVEVYVCB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5URVhUQVJFQSB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5FTUFJTCB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5QQVNTV09SRCB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5DT0xPUiB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5NT05USCB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5XRUVLIHx8XG4gICAgICB0aGlzLmZpZWxkLnR5cGUgPT0gRmllbGRUeXBlLk5VTUJFUiB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5EUk9QRE9XTiB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5BVVRPQ09NUExFVEUgfHxcbiAgICAgIHRoaXMuZmllbGQudHlwZSA9PSBGaWVsZFR5cGUuQ0hJUFMgfHxcbiAgICAgIHRoaXMuZmllbGQudHlwZSA9PSBGaWVsZFR5cGUuVElNRSB8fFxuICAgICAgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5DQUxFTkRBUlxuICAgICkpIHtcbiAgICAgIGhhc0NsZWFyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmhhc0NsZWFyID0gaGFzQ2xlYXI7XG4gIH1cblxuICBjbGVhblZhbHVlKCkge1xuICAgIHRoaXMucmVzb2x2ZWRWYWx1ZSA9IFwiXCI7XG4gICAgdGhpcy5maWVsZENvbnRyb2wuc2V0VmFsdWUoXCJcIik7XG4gICAgdGhpcy5zZXRDbGVhcigpO1xuICB9XG5cbiAgZ2V0UmVzb2x2ZVRleHRXaXRoS2V5KGZpZWxkOiBhbnkpIHtcbiAgICBsZXQgdmFsdWU6IHN0cmluZyA9IFwiXCI7XG5cbiAgICBpZiAodGhpcy5yb3cgIT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5yb3dbZmllbGRbJ3Jlc29sdmVPcHRpb25XaXRoS2V5J11dKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5yb3dbZmllbGRbJ3Jlc29sdmVPcHRpb25XaXRoS2V5J11dO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGdldERyb3Bkb3duVmFsdWUoZmllbGQ6IEZpZWxkLCB0eHQ6IGFueSk6IGFueSB7XG4gICAgbGV0IHZhbHVlOiBhbnkgPSBcIlwiO1xuXG4gICAgaWYgKHRoaXMuZmllbGRDb250cm9sICE9IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMuZmllbGRDb250cm9sLnZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5maWVsZENvbnRyb2wudmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gdHh0O1xuICAgIH1cblxuICAgIGlmIChmaWVsZFsnb3B0aW9ucyddICYmIGZpZWxkWydvcHRpb25zJ10ubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGZpZWxkWydvcHRpb25zJ10ubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGxldCBpc1NlbGVjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoZmllbGRbJ29wdGlvbnMnXVtpbmRleF0ua2V5KSA+IC0xKSB7XG4gICAgICAgICAgICBpc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICBpZiAoZmllbGRbJ29wdGlvbnMnXVtpbmRleF0ua2V5ID09IHZhbHVlKSB7XG4gICAgICAgICAgICBpc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICBpZiAodmFsdWVbZmllbGRbJ29wdGlvbnMnXVtpbmRleF0ua2V5XSkge1xuICAgICAgICAgICAgaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICB2YWx1ZSA9IGZpZWxkWydvcHRpb25zJ11baW5kZXhdLnZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRFJPUERPV04gT1BUSU9OIC0gRU5EIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFVQTE9BRCAtIFNUQVJUIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBpbWdVUkw6IGFueTtcbiAgLy8gb25VcGxvYWQoZXZlbnQpIHtcbiAgLy8gICBsZXQgZmlsZTogRmlsZSA9IHtcbiAgLy8gICAgICdzb3VyY2UnOiB0aGlzLnNvdXJjZUlkZW50aWZpZXIsXG4gIC8vICAgICAnaW5kZXgnOiB0aGlzLmluZGV4LFxuICAvLyAgICAgJ2ZpZWxkJzogdGhpcy5maWVsZC5rZXksXG4gIC8vICAgICAnZmlsZXMnOiBldmVudC50YXJnZXQuZmlsZXNcbiAgLy8gICB9O1xuICAvLyAgIHRoaXMuZmllbGRbJ29uVXBsb2FkJ10oZmlsZSk7XG5cblxuICAvLyAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAvLyAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUuZmlsZXNbMF0pO1xuICAvLyAgIHJlYWRlci5vbmxvYWQgPSAoX2V2ZW50KSA9PiB7XG4gIC8vICAgICB0aGlzLmltZ1VSTCA9IHJlYWRlci5yZXN1bHQ7XG4gIC8vICAgfVxuICAvLyB9XG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFVQTE9BRCAtIEVORCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBJTUFHRSAtIFNUQVJUIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBnZXRJbWFnZVBhdGgoZmllbGQ6IEZpZWxkKTogdm9pZCB7XG4gICAgLy8gICAgY29uc29sZS5sb2cocGF0aCk7XG4gICAgaWYgKCFTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMucmVzb2x2ZWRWYWx1ZSkgJiYgdGhpcy5yZXNvbHZlZFZhbHVlIGluc3RhbmNlb2YgU3RyaW5nICYmIHRoaXMucmVzb2x2ZWRWYWx1ZS5pbmRleE9mKFwiaHR0cDovL1wiKSA8PSAtMSkge1xuICAgICAgLy8gaWYgKHRoaXMucmVzb2x2ZWRWYWx1ZS5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgICAgLy8gICB0aGlzLnJlc29sdmVkVmFsdWUgPSBQcm9wZXJ0aWVzLmNvbnRlbnRVcmwgKyB0aGlzLnJlc29sdmVkVmFsdWU7XG4gICAgICAvLyB9IGVsc2Uge1xuICAgICAgLy8gICB0aGlzLnJlc29sdmVkVmFsdWUgPSBQcm9wZXJ0aWVzLmNvbnRlbnRVcmwgKyBcIi9cIiArIHRoaXMucmVzb2x2ZWRWYWx1ZTtcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICB0aGlzLmltYWdlUGF0aCA9IHRoaXMucmVzb2x2ZWRWYWx1ZTtcbiAgfVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBJTUFHRSAtIEVORCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTTElERVIgLSBTVEFSVCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gICBnZXRTbGlkZXJUaWNrSW50ZXJ2YWwoKTogbnVtYmVyIHwgJ2F1dG8nIHtcbiAgLy8gLy8gICAgaWYgKCg8U2xpZGVyRmllbGQ+dGhpcy5maWVsZCkuLnNob3dUaWNrcykge1xuICAvLyAgICAgICByZXR1cm4gKDxTbGlkZXJGaWVsZD50aGlzLmZpZWxkKS5hdXRvVGlja3MgPyAnYXV0bycgOiB0aGlzLnRpY2tJbnRlcnZhbDtcbiAgLy8gLy8gICAgfVxuXG4gIC8vICAgICByZXR1cm4gMDtcbiAgLy8gICB9XG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFNMSURFUiAtIEVORCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFVkVOVFMgLSBTVEFSVCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgb25BdXRvY29tcGxldGVDaGFuZ2UoYXV0b2NvbXBsYXRlOiBhbnkpIHtcbiAgICBsZXQgdmFsdWUgPSBhdXRvY29tcGxhdGUub3B0aW9uLnZhbHVlO1xuICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlKTtcblxuICAgIHRoaXMub25DaGFuZ2VFdmVudCh0aGlzLmZpZWxkLmtleSwgdmFsdWUsIGF1dG9jb21wbGF0ZSk7XG4gIH1cblxuICBvblRvZ2dsZUNoYW5nZSh0b2dnbGU6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKHRvZ2dsZSk7XG4gICAgbGV0IHZhbHVlID0gdG9nZ2xlLmNoZWNrZWQ7XG4gICAgLy8gICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgIHRoaXMub25DaGFuZ2VFdmVudCh0aGlzLmZpZWxkLmtleSwgdmFsdWUsIHRvZ2dsZSk7XG4gIH1cblxuICBvblNsaWRlckNoYW5nZShzbGlkZXI6IGFueSkge1xuICAgIC8vICAgIGNvbnNvbGUubG9nKHNsaWRlcik7XG4gICAgbGV0IHZhbHVlID0gc2xpZGVyLnZhbHVlO1xuICAgIC8vICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICB0aGlzLm9uQ2hhbmdlRXZlbnQodGhpcy5maWVsZC5rZXksIHZhbHVlLCBzbGlkZXIpO1xuICB9XG5cbiAgb25SYWRpb0NoYW5nZShyYWRpbzogYW55KSB7XG4gICAgLy8gICAgY29uc29sZS5sb2cocmFkaW8pO1xuICAgIGxldCB2YWx1ZSA9IHJhZGlvLnZhbHVlO1xuICAgIC8vICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICB0aGlzLm9uQ2hhbmdlRXZlbnQodGhpcy5maWVsZC5rZXksIHZhbHVlLCByYWRpbyk7XG4gIH1cblxuICBvbkNoZWNrYm94Q2hhbmdlKG9wdGlvbjogYW55LCBjaGVja2JveDogYW55KSB7XG4gICAgbGV0IGtleSA9IG9wdGlvbi5rZXk7XG4gICAgbGV0IHZhbHVlID0gY2hlY2tib3guY2hlY2tlZDtcbiAgICAvLyBjb25zb2xlLmxvZyhrZXkgKyBcIjogXCIgKyB2YWx1ZSk7XG4gICAgdGhpcy5vbkNoYW5nZUV2ZW50KGtleSwgdmFsdWUsIGNoZWNrYm94KTtcbiAgfVxuXG4gIHNldFNob3dMZXNzKCkge1xuICAgIGlmICh0aGlzLmZpZWxkLnR5cGUgPT09IEZpZWxkVHlwZS5SQURJTyB8fCB0aGlzLmZpZWxkLnR5cGUgPT09IEZpZWxkVHlwZS5DSEVDS0JPWCkge1xuICAgICAgdGhpcy5zaG93TGVzcyA9ICg8Q2hlY2tib3hGaWVsZCB8IFJhZGlvRmllbGQ+dGhpcy5maWVsZCkuc2hvd0xlc3MgfHwgKDxDaGVja2JveEZpZWxkIHwgUmFkaW9GaWVsZD50aGlzLmZpZWxkKS5vcHRpb25zLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICBvblNob3dBbGxPcHRpb25zID0gKCkgPT4ge1xuICAgIHRoaXMuc2hvd0xlc3MgPSAoPENoZWNrYm94RmllbGQgfCBSYWRpb0ZpZWxkPnRoaXMuZmllbGQpLm9wdGlvbnMubGVuZ3RoO1xuICB9XG5cbiAgb25PcHRpb25DaGFuZ2Uob3B0aW9uczogTWF0U2VsZWN0aW9uTGlzdENoYW5nZSkge1xuICAgIGxldCB2YWx1ZSA9IHRoaXMubGlzdFZpZXcuc2VsZWN0ZWRPcHRpb25zLnNlbGVjdGVkLm1hcCh4ID0+IHgudmFsdWUpO1xuXG4gICAgaWYgKHRoaXMuZmllbGQudHlwZSA9PSAnQ0hFQ0tCT1gnKSB7XG4gICAgICBsZXQgc2VsZWN0ZWRPcHRpb25zID0gb3B0aW9ucy5zb3VyY2UuX3ZhbHVlO1xuICAgICAgbGV0IGN1cnJlbnRPcHRpb25zID0gPE1hcDxhbnksIGJvb2xlYW4+PnRoaXMuZmllbGRDb250cm9sLnZhbHVlO1xuXG4gICAgICBmb3IgKGxldCBrZXkgaW4gY3VycmVudE9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9ucy5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICAgIGN1cnJlbnRPcHRpb25zW2tleV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRPcHRpb25zW2tleV0gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAoPEZvcm1Hcm91cD50aGlzLmZpZWxkQ29udHJvbCkuc2V0VmFsdWUoY3VycmVudE9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5maWVsZC50eXBlID09ICdSQURJTycpIHtcbiAgICAgIGxldCBzZWxlY3RlZE9wdGlvbnMgPSBvcHRpb25zLnNvdXJjZS5fdmFsdWU7XG5cbiAgICAgIGlmIChDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShzZWxlY3RlZE9wdGlvbnMpKSB7XG4gICAgICAgICg8Rm9ybUNvbnRyb2w+dGhpcy5maWVsZENvbnRyb2wpLnNldFZhbHVlKG51bGwpO1xuICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoPEZvcm1Db250cm9sPnRoaXMuZmllbGRDb250cm9sKS5zZXRWYWx1ZShzZWxlY3RlZE9wdGlvbnNbMF0pO1xuICAgICAgICB2YWx1ZSA9IHZhbHVlWzBdO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm9uQ2hhbmdlRXZlbnQodGhpcy5maWVsZC5rZXksIHZhbHVlLCBvcHRpb25zKTtcbiAgfVxuXG4gIG9uSHRtbEVkaXRvckNoYW5nZSgkZXZlbnQ6IGFueSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCRldmVudCk7XG4gICAgLy8gICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgIHRoaXMub25DaGFuZ2VFdmVudCh0aGlzLmZpZWxkLmtleSwgJGV2ZW50Lmh0bWwsICRldmVudCk7XG4gIH1cblxuICBvbkNoaXBzTGlzdENoYW5nZSgkZXZlbnQ6IGFueSkge1xuICAgIHRoaXMub25DaGFuZ2VFdmVudCh0aGlzLmZpZWxkLmtleSwgJGV2ZW50LnZhbHVlcywgJGV2ZW50KTtcbiAgfVxuXG4gIGF1dG9Db21wbGV0ZUlucHV0SGFzVmFsdWU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgb25JbnB1dENoYW5nZShpbnB1dDogYW55KSB7XG4gICAgY29uc29sZS5sb2coaW5wdXQpO1xuICAgIGxldCB2YWx1ZSA9IGlucHV0LnRhcmdldC52YWx1ZTtcbiAgICAvLyAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG5cbiAgICBpZiAodGhpcy5pbnZva2VPbkNoYW5nZU9uRmllbGQodmFsdWUsIGlucHV0KSkge1xuICAgICAgdGhpcy5vbkNoYW5nZUV2ZW50KHRoaXMuZmllbGQua2V5LCB2YWx1ZSwgaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIG9uRGF0ZUNoYW5nZShkYXRlOiBNYXREYXRlcGlja2VySW5wdXRFdmVudDxEYXRlPiwgdHlwZTogc3RyaW5nKSB7XG4gICAgbGV0IGtleTogc3RyaW5nID0gdGhpcy5maWVsZC5rZXk7XG4gICAgaWYgKCFTdHJpbmdVdGlscy5pc0VtcHR5KHR5cGUpKSB7XG4gICAgICBrZXkgPSB0aGlzLmZpZWxkLmtleSArIFwiLlwiICsgdHlwZTtcbiAgICB9XG5cbiAgICAvLyAgICBjb25zb2xlLmxvZyhkYXRlLnZhbHVlKTtcbiAgICBsZXQgdmFsdWUgPSBkYXRlLnZhbHVlO1xuICAgIC8vICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICB0aGlzLm9uQ2hhbmdlRXZlbnQoa2V5LCB2YWx1ZSwgZGF0ZSk7XG4gIH1cblxuICBvbkNoYW5nZShkcm9wZG93bjogYW55KSB7XG4gICAgLy8gICAgY29uc29sZS5sb2coZHJvcGRvd24udmFsdWUpO1xuICAgIGxldCB2YWx1ZSA9IGRyb3Bkb3duLnZhbHVlO1xuXG4gICAgdGhpcy5vbkNoYW5nZUV2ZW50KHRoaXMuZmllbGQua2V5LCB2YWx1ZSwgZHJvcGRvd24pO1xuICB9XG5cbiAgb25GaWxlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhldmVudCk7XG5cbiAgICB0aGlzLm9uQ2hhbmdlRXZlbnQodGhpcy5maWVsZC5rZXksIGV2ZW50LCBldmVudCk7XG5cbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChldmVudFswXSk7XG4gICAgcmVhZGVyLm9ubG9hZCA9IChfZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaW1nVVJMID0gcmVhZGVyLnJlc3VsdDtcbiAgICB9XG4gIH1cblxuICBvblBhcmFncmFwaENoYW5nZShldmVudDogYW55KSB7XG4gICAgLy8gICAgY29uc29sZS5sb2coZXZlbnQpOyBcbiAgICB0aGlzLm9uQ2hhbmdlRXZlbnQodGhpcy5maWVsZC5rZXksIGV2ZW50LCBldmVudCk7XG4gIH1cblxuICBidXR0b25DbGljayhldmVudDogYW55KSB7XG4gICAgdGhpcy5vbkJ1dHRvbkNsaWNrLmVtaXQoZXZlbnQpO1xuICB9XG5cbiAgb25DaGFuZ2VFdmVudChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgZXZlbnQ6IGFueSkge1xuICAgIHRoaXMucmVzb2x2ZWRWYWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuc2V0Q2xlYXIoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vICAgICAgaWYgKCh0aGlzLmRlcGVuZGVuY2llcyAmJiB0aGlzLmRlcGVuZGVuY2llc1t0aGlzLmZpZWxkLmtleV0pIHx8IHRoaXMuZmllbGQudHlwZSA9PSBGaWVsZFR5cGUuQ0hFQ0tCT1ggfHwgdGhpcy5maWVsZC50eXBlID09IEZpZWxkVHlwZS5EUk9QRE9XTikge1xuICAgICAgaWYgKCh0aGlzLmRlcGVuZGVuY2llcyAmJiB0aGlzLmRlcGVuZGVuY2llc1t0aGlzLmZpZWxkLmtleV0pKSB7XG4gICAgICAgIGxldCBhY3Rpb246IEFjdGlvbiA9IHtcbiAgICAgICAgICBzb3VyY2VJZGVudGlmaWVyOiB0aGlzLnNvdXJjZUlkZW50aWZpZXIsXG4gICAgICAgICAgc291cmNlSW5kZXg6IHRoaXMuc291cmNlSW5kZXgsXG4gICAgICAgICAgd2lkZ2V0QXJyYXlJbmRleDogdGhpcy53aWRnZXRBcnJheUluZGV4LFxuICAgICAgICAgIGZpZWxkSW5kZXg6IHRoaXMuZmllbGRJbmRleCxcbiAgICAgICAgICBhY3Rpb246IHRoaXMuZmllbGQua2V5LFxuICAgICAgICAgIGRhdGE6IHRoaXMuZm9ybS5nZXRSYXdWYWx1ZSgpLFxuICAgICAgICAgIHBhcmVudEhpZXJhcmNoeTogbnVsbCxcbiAgICAgICAgICBldmVudDogZXZlbnRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRlcGVuZGVudEZpZWxkQ2hhbmdlLmVtaXQoYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9LCAyMDApO1xuXG4gICAgbGV0IGZpZWxkQ2hhbmdlOiBGaWVsZENoYW5nZSA9IHtcbiAgICAgIHNvdXJjZUlkZW50aWZpZXI6IHRoaXMuc291cmNlSWRlbnRpZmllcixcbiAgICAgIHNvdXJjZUluZGV4OiB0aGlzLnNvdXJjZUluZGV4LFxuICAgICAgd2lkZ2V0QXJyYXlJbmRleDogdGhpcy53aWRnZXRBcnJheUluZGV4LFxuICAgICAgZmllbGRJbmRleDogdGhpcy5maWVsZEluZGV4LFxuICAgICAgZmllbGRLZXk6IGtleSxcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGV2ZW50OiBldmVudFxuICAgIH1cblxuICAgIHRoaXMub25GaWVsZENoYW5nZS5lbWl0KGZpZWxkQ2hhbmdlKTtcbiAgfVxuXG4gIC8vIG9uQ2hhbmdlU2VhcmNoKHZhbDogc3RyaW5nKSB7XG4gIC8vICAgY29uc29sZS5sb2coXCJvbkNoYW5nZVNlYXJjaFwiKTtcbiAgLy8gICBsZXQgYXV0b2NvbXBsZXRlOiBBdXRvY29tcGxldGUgPSB7XG4gIC8vICAgICAnc291cmNlJzogdGhpcy5zb3VyY2VJZGVudGlmaWVyLFxuICAvLyAgICAgJ2luZGV4JzogdGhpcy5pbmRleCxcbiAgLy8gICAgICdmaWVsZCc6IHRoaXMuZmllbGQua2V5LFxuICAvLyAgICAgJ3NlYXJjaFRleHQnOiB2YWxcbiAgLy8gICB9O1xuXG4gIC8vICAgdGhpcy5hdXRvY29tcGxldGVTZXJ2aWNlLmludm9rZShhdXRvY29tcGxldGUpO1xuICAvLyB9XG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEVWRU5UUyAtIEVORCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFUlJPUiAtIFNUQVJUIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBlcnJvcnMoKTogQXJyYXk8eyBlcnJvcjogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIGxldCBlcnJvcnM6IEFycmF5PHsgZXJyb3I6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nIH0+ID0gW107XG4gICAgaWYgKHRoaXMuZmllbGRDb250cm9sICE9IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMuZmllbGRDb250cm9sICYmIHRoaXMuZmllbGRDb250cm9sLmVycm9ycykge1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZpZWxkQ29udHJvbC5lcnJvcnMpLmZvckVhY2goa2V5RXJyb3IgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmZpZWxkLnZhbGlkYXRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB2YWxpZGF0aW9uIG9mIHRoaXMuZmllbGQudmFsaWRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgaWYgKGtleUVycm9yID09PSB2YWxpZGF0aW9uLm1lc3NhZ2Uua2V5KSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzW2Vycm9ycy5sZW5ndGhdID0geyBlcnJvcjoga2V5RXJyb3IsIG1lc3NhZ2U6IHZhbGlkYXRpb24ubWVzc2FnZS5tZXNzYWdlIH07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9lcnJvcnNbZXJyb3JzLmxlbmd0aF0gPSB7ZXJyb3I6IGtleUVycm9yLCBtZXNzYWdlOiB0aGlzLmZpZWxkQ29udHJvbC5lcnJvcnNba2V5RXJyb3JdfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZmllbGRDb250cm9sIGluc3RhbmNlb2YgRm9ybUdyb3VwKSB7XG4gICAgICAgIGlmICh0aGlzLmZpZWxkQ29udHJvbC5jb250cm9scyAmJiB0aGlzLmZpZWxkQ29udHJvbC5jb250cm9sc1snc3RhcnREYXRlJ10gJiYgdGhpcy5maWVsZENvbnRyb2wuY29udHJvbHNbJ3N0YXJ0RGF0ZSddLmVycm9ycykge1xuICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZmllbGRDb250cm9sLmNvbnRyb2xzWydzdGFydERhdGUnXS5lcnJvcnMpLmZvckVhY2goa2V5RXJyb3IgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGQudmFsaWRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgdmFsaWRhdGlvbiBvZiB0aGlzLmZpZWxkLnZhbGlkYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleUVycm9yID09PSB2YWxpZGF0aW9uLm1lc3NhZ2Uua2V5KSB7XG4gICAgICAgICAgICAgICAgICBlcnJvcnNbZXJyb3JzLmxlbmd0aF0gPSB7IGVycm9yOiBrZXlFcnJvciwgbWVzc2FnZTogdmFsaWRhdGlvbi5tZXNzYWdlLm1lc3NhZ2UgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBlcnJvcnM7XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFUlJPUiAtIEVORCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgc2V0VGV4dENsZWFyQnV0dG9uKGlkZW50aWZpZXI6IHN0cmluZywgbGFiZWw6IHN0cmluZywgaWNvbjogc3RyaW5nLCByb3V0ZVRvOiBBcnJheTxzdHJpbmc+KTogQnV0dG9uIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgIGNvbG9yOiBCdXR0b25Db2xvci5QUklNQVJZLFxuICAgICAgc2l6ZTogQnV0dG9uU2l6ZS5TTUFMTCxcbiAgICAgIGljb246IGljb24sXG4gICAgICB0eXBlOiBCdXR0b25UeXBlLkdIT1NULFxuICAgICAgb25seUljb246IHRydWUsXG4gICAgICByb3V0ZXJMaW5rOiByb3V0ZVRvXG4gICAgfTtcbiAgfVxuXG4gIGFkZEZpZWxkKGZpZWxkOiBGaWVsZCkge1xuICAgIGxldCB2YWxpZGF0aW9uczogQXJyYXk8VmFsaWRhdG9yRm4+ID0gRm9ybVV0aWxzLmdldEZpZWxkVmFsaWRhdGlvbihmaWVsZCk7XG5cbiAgICAoPEZvcm1BcnJheT50aGlzLmZvcm0uY29udHJvbHNbZmllbGQua2V5XSkucHVzaChGb3JtVXRpbHMuc2V0Rm9ybUNvbnRyb2wodGhpcy5kaXNwbGF5TW9kZSwgZmllbGQsIG51bGwsIHZhbGlkYXRpb25zKSk7XG5cbiAgICB0aGlzLm9uRm9ybUNoYW5nZS5lbWl0KHRoaXMuZm9ybSk7XG4gIH1cblxuICByZW1vdmVGaWVsZChmaWVsZDogRmllbGQsIGluZGV4OiBudW1iZXIpIHtcbiAgICAoPEZvcm1BcnJheT50aGlzLmZvcm0uY29udHJvbHNbZmllbGQua2V5XSkuY29udHJvbHMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgIHRoaXMub25Gb3JtQ2hhbmdlLmVtaXQodGhpcy5mb3JtKTtcbiAgfVxuXG4gIGFkZFJlbW92ZUJ1dHRvbihpZGVudGlmaWVyOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcsIGljb246IHN0cmluZyk6IEJ1dHRvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICBsYWJlbDogbGFiZWwsXG4gICAgICBjb2xvcjogQnV0dG9uQ29sb3IuUFJJTUFSWSxcbiAgICAgIHNpemU6IEJ1dHRvblNpemUuU01BTEwsXG4gICAgICBpY29uOiBpY29uLFxuICAgICAgdHlwZTogQnV0dG9uVHlwZS5GTEFULFxuICAgICAgb25seUljb246IHRydWVcbiAgICB9O1xuICB9XG5cbiAgb25GaWxlQ29tcGxldGUoZGF0YTogYW55KSB7XG4gICAgLy8gY29uc29sZS5sb2coZGF0YSk7IC8vIFdlIGp1c3QgcHJpbnQgb3V0IGRhdGEgYnViYmxlZCB1cCBmcm9tIGV2ZW50IGVtaXR0ZXIuXG4gIH1cblxuICBvbkxpc3RJbWFnZUxvYWRFcnJvciA9ICgkZXZlbnQpOiB2b2lkID0+IHtcbiAgICAkZXZlbnQudGFyZ2V0LnNyYyA9ICg8UmFkaW9GaWVsZCB8IENoZWNrYm94RmllbGQ+dGhpcy5maWVsZCkuZGVmYXVsdEltYWdlVXJsO1xuICB9XG59XG4iXX0=