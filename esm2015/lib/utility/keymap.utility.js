import { CollectionUtils, FormUtils, ListUtils } from '.';
import { CrudUtils } from './crud.utility';
import { MasterDataUtils } from './master-data.utility';
export class KeyMapUtils {
    static push(keyMaps, associations, options, optionType, optionComponent, optionDependsOnValue, record) {
        // if (CollectionUtils.isEmpty(keyMaps)) {
        //   keyMaps = new Array<KeyMap>();
        // }
        let optionsDD;
        if (!(options instanceof Array)) {
            optionsDD = MasterDataUtils.getMasterDataAsOptions(options);
        }
        else {
            optionsDD = options;
        }
        if (!CollectionUtils.isEmpty(associations)) {
            keyMaps.push(KeyMapUtils.generateKeyMap(associations, options, optionDependsOnValue));
            KeyMapUtils.setOptionssUsingValues(keyMaps, true, optionType, optionComponent, record);
        }
        return keyMaps;
    }
    static generateKeyMap(associations, options, optionDependsOnValue) {
        // if (CollectionUtils.isEmpty(keyMaps)) {
        //   keyMaps = new Array<KeyMap>();
        // }
        let optionsDD;
        if (!(options instanceof Array)) {
            optionsDD = MasterDataUtils.getMasterDataAsOptions(options);
        }
        else {
            optionsDD = options;
        }
        let keyMap;
        if (!CollectionUtils.isEmpty(associations)) {
            keyMap = { associations: associations, options: optionsDD, optionDependsOnValue: optionDependsOnValue };
        }
        return keyMap;
    }
    static setOptionssUsingValues(keyMaps, relaodAll, optionType, optionComponent, record) {
        if (!CollectionUtils.isEmpty(keyMaps)) {
            keyMaps.forEach(keyMap => {
                if (!CollectionUtils.isEmpty(keyMap.associations)) {
                    keyMap.associations.forEach(association => {
                        if (optionType != null && "CRUD" /* CRUD */ == optionType) {
                            CrudUtils.setOptionsUsingValues(optionComponent, association.fieldKey, keyMap, relaodAll, record);
                        }
                        if ("FORM" /* FORM */ == optionType) {
                            FormUtils.setOptionsUsingValues(optionComponent, association.fieldKey, keyMap, relaodAll, record);
                        }
                        if ("LIST" /* LIST */ == optionType) {
                            ListUtils.setOptionsUsingValues(optionComponent, association.fieldKey, keyMap, relaodAll, record);
                        }
                    });
                }
            });
        }
    }
    static getValue(keyMaps, fieldKey, valueAsKey) {
        let value = "";
        if (!CollectionUtils.isEmpty(keyMaps)) {
            keyMaps.forEach(keyMap => {
                if (!CollectionUtils.isEmpty(keyMap.associations)) {
                    keyMap.associations.forEach(association => {
                        if (association.fieldKey == fieldKey && !CollectionUtils.isEmpty(keyMap.options)) {
                            keyMap.options.forEach(option => {
                                if (option.key == valueAsKey) {
                                    value = option.value;
                                }
                            });
                        }
                    });
                }
            });
        }
        return value;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5bWFwLnV0aWxpdHkuanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL25pdGlua2hhaXRhbi9OaXRpbi9zdHVkeS9hbmd1bGFyL21hdGVyaWFsL2FkbWluLWJ1aWxkZXItcGx1Z2luL3Byb2plY3RzL25neC1tYXRlcmlhbC13aWRnZXQvc3JjLyIsInNvdXJjZXMiOlsibGliL3V0aWxpdHkva2V5bWFwLnV0aWxpdHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDO0FBQzFELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUkzQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFFeEQsTUFBTSxPQUFPLFdBQVc7SUFDdEIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFzQixFQUFFLFlBQXNDLEVBQUUsT0FBdUMsRUFBRSxVQUE0QixFQUFFLGVBQW1DLEVBQUUsb0JBQTZCLEVBQUUsTUFBWTtRQUNqTywwQ0FBMEM7UUFDMUMsbUNBQW1DO1FBQ25DLElBQUk7UUFFSixJQUFJLFNBQWdDLENBQUM7UUFDckMsSUFBSSxDQUFDLENBQUMsT0FBTyxZQUFZLEtBQUssQ0FBQyxFQUFFO1lBQy9CLFNBQVMsR0FBRyxlQUFlLENBQUMsc0JBQXNCLENBQVMsT0FBTyxDQUFDLENBQUM7U0FDckU7YUFBTTtZQUNMLFNBQVMsR0FBRyxPQUFPLENBQUM7U0FDckI7UUFFRCxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUMxQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFFLE9BQU8sRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7WUFFdEYsV0FBVyxDQUFDLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxNQUFN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Q0gsQ0FBQyxDQUFDLENBQUE7aUJBQ0g7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO1FBRUQsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLZXlNYXAsIEtleU1hcEFzc29jaWF0aW9uLCBEcm9wZG93bk9wdGlvbiwgS2V5TWFwT3B0aW9uVHlwZSB9IGZyb20gJy4uL2ZpZWxkL21vZGVsJztcbmltcG9ydCB7IENvbGxlY3Rpb25VdGlscywgRm9ybVV0aWxzLCBMaXN0VXRpbHMgfSBmcm9tICcuJztcbmltcG9ydCB7IENydWRVdGlscyB9IGZyb20gJy4vY3J1ZC51dGlsaXR5JztcbmltcG9ydCB7IENydWQgfSBmcm9tICcuLi9jcnVkL21vZGVsJztcbmltcG9ydCB7IEZvcm0gfSBmcm9tICcuLi9mb3JtL21vZGVsJztcbmltcG9ydCB7IExpc3QgfSBmcm9tICcuLi9saXN0L21vZGVsJztcbmltcG9ydCB7IE1hc3RlckRhdGFVdGlscyB9IGZyb20gJy4vbWFzdGVyLWRhdGEudXRpbGl0eSc7XG5cbmV4cG9ydCBjbGFzcyBLZXlNYXBVdGlscyB7XG4gIHN0YXRpYyBwdXNoKGtleU1hcHM6IEFycmF5PEtleU1hcD4sIGFzc29jaWF0aW9uczogQXJyYXk8S2V5TWFwQXNzb2NpYXRpb24+LCBvcHRpb25zOiBBcnJheTxEcm9wZG93bk9wdGlvbj4gfCBzdHJpbmcsIG9wdGlvblR5cGU6IEtleU1hcE9wdGlvblR5cGUsIG9wdGlvbkNvbXBvbmVudDogQ3J1ZCB8IEZvcm0gfCBMaXN0LCBvcHRpb25EZXBlbmRzT25WYWx1ZT86IHN0cmluZywgcmVjb3JkPzogYW55KTogQXJyYXk8S2V5TWFwPiB7XG4gICAgLy8gaWYgKENvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGtleU1hcHMpKSB7XG4gICAgLy8gICBrZXlNYXBzID0gbmV3IEFycmF5PEtleU1hcD4oKTtcbiAgICAvLyB9XG5cbiAgICBsZXQgb3B0aW9uc0REOiBBcnJheTxEcm9wZG93bk9wdGlvbj47XG4gICAgaWYgKCEob3B0aW9ucyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgb3B0aW9uc0REID0gTWFzdGVyRGF0YVV0aWxzLmdldE1hc3RlckRhdGFBc09wdGlvbnMoPHN0cmluZz5vcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9uc0REID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBpZiAoIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGFzc29jaWF0aW9ucykpIHtcbiAgICAgIGtleU1hcHMucHVzaChLZXlNYXBVdGlscy5nZW5lcmF0ZUtleU1hcChhc3NvY2lhdGlvbnMsIG9wdGlvbnMsIG9wdGlvbkRlcGVuZHNPblZhbHVlKSk7XG5cbiAgICAgIEtleU1hcFV0aWxzLnNldE9wdGlvbnNzVXNpbmdWYWx1ZXMoa2V5TWFwcywgdHJ1ZSwgb3B0aW9uVHlwZSwgb3B0aW9uQ29tcG9uZW50LCByZWNvcmQpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXlNYXBzO1xuICB9XG5cbiAgc3RhdGljIGdlbmVyYXRlS2V5TWFwKGFzc29jaWF0aW9uczogQXJyYXk8S2V5TWFwQXNzb2NpYXRpb24+LCBvcHRpb25zOiBBcnJheTxEcm9wZG93bk9wdGlvbj4gfCBzdHJpbmcsIG9wdGlvbkRlcGVuZHNPblZhbHVlPzogc3RyaW5nKTogS2V5TWFwIHtcbiAgICAvLyBpZiAoQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkoa2V5TWFwcykpIHtcbiAgICAvLyAgIGtleU1hcHMgPSBuZXcgQXJyYXk8S2V5TWFwPigpO1xuICAgIC8vIH1cblxuICAgIGxldCBvcHRpb25zREQ6IEFycmF5PERyb3Bkb3duT3B0aW9uPjtcbiAgICBpZiAoIShvcHRpb25zIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICBvcHRpb25zREQgPSBNYXN0ZXJEYXRhVXRpbHMuZ2V0TWFzdGVyRGF0YUFzT3B0aW9ucyg8c3RyaW5nPm9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zREQgPSBvcHRpb25zO1xuICAgIH1cblxuICAgIGxldCBrZXlNYXA6IEtleU1hcDtcbiAgICBpZiAoIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGFzc29jaWF0aW9ucykpIHtcbiAgICAgIGtleU1hcCA9IHsgYXNzb2NpYXRpb25zOiBhc3NvY2lhdGlvbnMsIG9wdGlvbnM6IG9wdGlvbnNERCwgb3B0aW9uRGVwZW5kc09uVmFsdWU6IG9wdGlvbkRlcGVuZHNPblZhbHVlIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGtleU1hcDtcbiAgfVxuXG4gIHN0YXRpYyBzZXRPcHRpb25zc1VzaW5nVmFsdWVzKGtleU1hcHM6IEFycmF5PEtleU1hcD4sIHJlbGFvZEFsbDogYm9vbGVhbiwgb3B0aW9uVHlwZTogS2V5TWFwT3B0aW9uVHlwZSwgb3B0aW9uQ29tcG9uZW50OiBDcnVkIHwgRm9ybSB8IExpc3QsIHJlY29yZD86IGFueSk6IHZvaWQge1xuICAgIGlmICghQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkoa2V5TWFwcykpIHtcbiAgICAgIGtleU1hcHMuZm9yRWFjaChrZXlNYXAgPT4ge1xuICAgICAgICBpZiAoIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGtleU1hcC5hc3NvY2lhdGlvbnMpKSB7XG4gICAgICAgICAga2V5TWFwLmFzc29jaWF0aW9ucy5mb3JFYWNoKGFzc29jaWF0aW9uID0+IHtcbiAgICAgICAgICAgIGlmIChvcHRpb25UeXBlICE9IG51bGwgJiYgS2V5TWFwT3B0aW9uVHlwZS5DUlVEID09IG9wdGlvblR5cGUpIHtcbiAgICAgICAgICAgICAgQ3J1ZFV0aWxzLnNldE9wdGlvbnNVc2luZ1ZhbHVlcyg8Q3J1ZD5vcHRpb25Db21wb25lbnQsIGFzc29jaWF0aW9uLmZpZWxkS2V5LCBrZXlNYXAsIHJlbGFvZEFsbCwgcmVjb3JkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChLZXlNYXBPcHRpb25UeXBlLkZPUk0gPT0gb3B0aW9uVHlwZSkge1xuICAgICAgICAgICAgICBGb3JtVXRpbHMuc2V0T3B0aW9uc1VzaW5nVmFsdWVzKDxGb3JtPm9wdGlvbkNvbXBvbmVudCwgYXNzb2NpYXRpb24uZmllbGRLZXksIGtleU1hcCwgcmVsYW9kQWxsLCByZWNvcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEtleU1hcE9wdGlvblR5cGUuTElTVCA9PSBvcHRpb25UeXBlKSB7XG4gICAgICAgICAgICAgIExpc3RVdGlscy5zZXRPcHRpb25zVXNpbmdWYWx1ZXMoPExpc3Q+b3B0aW9uQ29tcG9uZW50LCBhc3NvY2lhdGlvbi5maWVsZEtleSwga2V5TWFwLCByZWxhb2RBbGwsIHJlY29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldFZhbHVlKGtleU1hcHM6IEFycmF5PEtleU1hcD4sIGZpZWxkS2V5OiBzdHJpbmcsIHZhbHVlQXNLZXk6IGFueSk6IGFueSB7XG4gICAgbGV0IHZhbHVlOiBhbnkgPSBcIlwiO1xuXG4gICAgaWYgKCFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShrZXlNYXBzKSkge1xuICAgICAga2V5TWFwcy5mb3JFYWNoKGtleU1hcCA9PiB7XG4gICAgICAgIGlmICghQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkoa2V5TWFwLmFzc29jaWF0aW9ucykpIHtcbiAgICAgICAgICBrZXlNYXAuYXNzb2NpYXRpb25zLmZvckVhY2goYXNzb2NpYXRpb24gPT4ge1xuICAgICAgICAgICAgaWYgKGFzc29jaWF0aW9uLmZpZWxkS2V5ID09IGZpZWxkS2V5ICYmICFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShrZXlNYXAub3B0aW9ucykpIHtcbiAgICAgICAgICAgICAga2V5TWFwLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb24ua2V5ID09IHZhbHVlQXNLZXkpIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG4iXX0=