import { CollectionUtils } from './collection.utility';
import { FormUtils } from './form.utility';
import { ListUtils } from './list.utility';
import { CrudUtils } from './crud.utility';
import { MasterDataUtils } from './master-data.utility';
export class KeyMapUtils {
    static push(keyMaps, associations, options, optionType, optionComponent, optionDependsOnValue, record) {
        // if (CollectionUtils.isEmpty(keyMaps)) {
        //   keyMaps = new Array<KeyMap>();
        // }
        let optionsDD;
        if (!(options instanceof Array)) {
            optionsDD = MasterDataUtils.getMasterDataAsOptions(options);
        }
        else {
            optionsDD = options;
        }
        if (!CollectionUtils.isEmpty(associations)) {
            keyMaps.push(KeyMapUtils.generateKeyMap(associations, options, optionDependsOnValue));
            KeyMapUtils.setOptionssUsingValues(keyMaps, true, optionType, optionComponent, record);
        }
        return keyMaps;
    }
    static generateKeyMap(associations, options, optionDependsOnValue) {
        // if (CollectionUtils.isEmpty(keyMaps)) {
        //   keyMaps = new Array<KeyMap>();
        // }
        let optionsDD;
        if (!(options instanceof Array)) {
            optionsDD = MasterDataUtils.getMasterDataAsOptions(options);
        }
        else {
            optionsDD = options;
        }
        let keyMap;
        if (!CollectionUtils.isEmpty(associations)) {
            keyMap = { associations: associations, options: optionsDD, optionDependsOnValue: optionDependsOnValue };
        }
        return keyMap;
    }
    static setOptionssUsingValues(keyMaps, relaodAll, optionType, optionComponent, record) {
        if (!CollectionUtils.isEmpty(keyMaps)) {
            keyMaps.forEach(keyMap => {
                if (!CollectionUtils.isEmpty(keyMap.associations)) {
                    keyMap.associations.forEach(association => {
                        if (optionType != null && "CRUD" /* CRUD */ == optionType) {
                            CrudUtils.setOptionsUsingValues(optionComponent, association.fieldKey, keyMap, relaodAll, record);
                        }
                        if ("FORM" /* FORM */ == optionType) {
                            FormUtils.setOptionsUsingValues(optionComponent, association.fieldKey, keyMap, relaodAll, record);
                        }
                        if ("LIST" /* LIST */ == optionType) {
                            ListUtils.setOptionsUsingValues(optionComponent, association.fieldKey, keyMap, relaodAll, record);
                        }
                    });
                }
            });
        }
    }
    static getValue(keyMaps, fieldKey, valueAsKey) {
        let value = "";
        if (!CollectionUtils.isEmpty(keyMaps)) {
            keyMaps.forEach(keyMap => {
                if (!CollectionUtils.isEmpty(keyMap.associations)) {
                    keyMap.associations.forEach(association => {
                        if (association.fieldKey == fieldKey && !CollectionUtils.isEmpty(keyMap.options)) {
                            keyMap.options.forEach(option => {
                                if (option.key == valueAsKey) {
                                    value = option.value;
                                }
                            });
                        }
                    });
                }
            });
        }
        return value;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5bWFwLnV0aWxpdHkuanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL25pdGlua2hhaXRhbi9OaXRpbi9zdHVkeS9hbmd1bGFyL21hdGVyaWFsL2FkbWluLWJ1aWxkZXItcGx1Z2luL3Byb2plY3RzL25neC1tYXRlcmlhbC13aWRnZXQvc3JjLyIsInNvdXJjZXMiOlsibGliL3V0aWxpdHkva2V5bWFwLnV0aWxpdHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUt4RCxNQUFNLE9BQU8sV0FBVztJQUN0QixNQUFNLENBQUMsSUFBSSxDQUFDLE9BQXNCLEVBQUUsWUFBc0MsRUFBRSxPQUF1QyxFQUFFLFVBQTRCLEVBQUUsZUFBbUMsRUFBRSxvQkFBNkIsRUFBRSxNQUFZO1FBQ2pPLDBDQUEwQztRQUMxQyxtQ0FBbUM7UUFDbkMsSUFBSTtRQUVKLElBQUksU0FBZ0MsQ0FBQztRQUNyQyxJQUFJLENBQUMsQ0FBQyxPQUFPLFlBQVksS0FBSyxDQUFDLEVBQUU7WUFDL0IsU0FBUyxHQUFHLGVBQWUsQ0FBQyxzQkFBc0IsQ0FBUyxPQUFPLENBQUMsQ0FBQztTQUNyRTthQUFNO1lBQ0wsU0FBUyxHQUFHLE9BQU8sQ0FBQztTQUNyQjtRQUVELElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQzFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsT0FBTyxFQUFFLG9CQUFvQixDQUFDLENBQUMsQ0FBQztZQUV0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LEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO2lDQUN0Qjs0QkFDSCxDQUFDLENBQUMsQ0FBQzt5QkFDSjtvQkFDSCxDQUFDLENBQUMsQ0FBQTtpQkFDSDtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtleU1hcCwgS2V5TWFwQXNzb2NpYXRpb24sIERyb3Bkb3duT3B0aW9uLCBLZXlNYXBPcHRpb25UeXBlIH0gZnJvbSAnLi4vZmllbGQvbW9kZWwnO1xuaW1wb3J0IHsgQ29sbGVjdGlvblV0aWxzIH0gZnJvbSAnLi9jb2xsZWN0aW9uLnV0aWxpdHknO1xuaW1wb3J0IHsgRm9ybVV0aWxzIH0gZnJvbSAnLi9mb3JtLnV0aWxpdHknO1xuaW1wb3J0IHsgTGlzdFV0aWxzIH0gZnJvbSAnLi9saXN0LnV0aWxpdHknO1xuaW1wb3J0IHsgQ3J1ZFV0aWxzIH0gZnJvbSAnLi9jcnVkLnV0aWxpdHknO1xuaW1wb3J0IHsgTWFzdGVyRGF0YVV0aWxzIH0gZnJvbSAnLi9tYXN0ZXItZGF0YS51dGlsaXR5JztcbmltcG9ydCB7IENydWQgfSBmcm9tICcuLi9jcnVkL21vZGVsJztcbmltcG9ydCB7IEZvcm0gfSBmcm9tICcuLi9mb3JtL21vZGVsJztcbmltcG9ydCB7IExpc3QgfSBmcm9tICcuLi9saXN0L21vZGVsJztcblxuZXhwb3J0IGNsYXNzIEtleU1hcFV0aWxzIHtcbiAgc3RhdGljIHB1c2goa2V5TWFwczogQXJyYXk8S2V5TWFwPiwgYXNzb2NpYXRpb25zOiBBcnJheTxLZXlNYXBBc3NvY2lhdGlvbj4sIG9wdGlvbnM6IEFycmF5PERyb3Bkb3duT3B0aW9uPiB8IHN0cmluZywgb3B0aW9uVHlwZTogS2V5TWFwT3B0aW9uVHlwZSwgb3B0aW9uQ29tcG9uZW50OiBDcnVkIHwgRm9ybSB8IExpc3QsIG9wdGlvbkRlcGVuZHNPblZhbHVlPzogc3RyaW5nLCByZWNvcmQ/OiBhbnkpOiBBcnJheTxLZXlNYXA+IHtcbiAgICAvLyBpZiAoQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkoa2V5TWFwcykpIHtcbiAgICAvLyAgIGtleU1hcHMgPSBuZXcgQXJyYXk8S2V5TWFwPigpO1xuICAgIC8vIH1cblxuICAgIGxldCBvcHRpb25zREQ6IEFycmF5PERyb3Bkb3duT3B0aW9uPjtcbiAgICBpZiAoIShvcHRpb25zIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICBvcHRpb25zREQgPSBNYXN0ZXJEYXRhVXRpbHMuZ2V0TWFzdGVyRGF0YUFzT3B0aW9ucyg8c3RyaW5nPm9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zREQgPSBvcHRpb25zO1xuICAgIH1cblxuICAgIGlmICghQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkoYXNzb2NpYXRpb25zKSkge1xuICAgICAga2V5TWFwcy5wdXNoKEtleU1hcFV0aWxzLmdlbmVyYXRlS2V5TWFwKGFzc29jaWF0aW9ucywgb3B0aW9ucywgb3B0aW9uRGVwZW5kc09uVmFsdWUpKTtcblxuICAgICAgS2V5TWFwVXRpbHMuc2V0T3B0aW9uc3NVc2luZ1ZhbHVlcyhrZXlNYXBzLCB0cnVlLCBvcHRpb25UeXBlLCBvcHRpb25Db21wb25lbnQsIHJlY29yZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGtleU1hcHM7XG4gIH1cblxuICBzdGF0aWMgZ2VuZXJhdGVLZXlNYXAoYXNzb2NpYXRpb25zOiBBcnJheTxLZXlNYXBBc3NvY2lhdGlvbj4sIG9wdGlvbnM6IEFycmF5PERyb3Bkb3duT3B0aW9uPiB8IHN0cmluZywgb3B0aW9uRGVwZW5kc09uVmFsdWU/OiBzdHJpbmcpOiBLZXlNYXAge1xuICAgIC8vIGlmIChDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShrZXlNYXBzKSkge1xuICAgIC8vICAga2V5TWFwcyA9IG5ldyBBcnJheTxLZXlNYXA+KCk7XG4gICAgLy8gfVxuXG4gICAgbGV0IG9wdGlvbnNERDogQXJyYXk8RHJvcGRvd25PcHRpb24+O1xuICAgIGlmICghKG9wdGlvbnMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgIG9wdGlvbnNERCA9IE1hc3RlckRhdGFVdGlscy5nZXRNYXN0ZXJEYXRhQXNPcHRpb25zKDxzdHJpbmc+b3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnNERCA9IG9wdGlvbnM7XG4gICAgfVxuXG4gICAgbGV0IGtleU1hcDogS2V5TWFwO1xuICAgIGlmICghQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkoYXNzb2NpYXRpb25zKSkge1xuICAgICAga2V5TWFwID0geyBhc3NvY2lhdGlvbnM6IGFzc29jaWF0aW9ucywgb3B0aW9uczogb3B0aW9uc0RELCBvcHRpb25EZXBlbmRzT25WYWx1ZTogb3B0aW9uRGVwZW5kc09uVmFsdWUgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5TWFwO1xuICB9XG5cbiAgc3RhdGljIHNldE9wdGlvbnNzVXNpbmdWYWx1ZXMoa2V5TWFwczogQXJyYXk8S2V5TWFwPiwgcmVsYW9kQWxsOiBib29sZWFuLCBvcHRpb25UeXBlOiBLZXlNYXBPcHRpb25UeXBlLCBvcHRpb25Db21wb25lbnQ6IENydWQgfCBGb3JtIHwgTGlzdCwgcmVjb3JkPzogYW55KTogdm9pZCB7XG4gICAgaWYgKCFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShrZXlNYXBzKSkge1xuICAgICAga2V5TWFwcy5mb3JFYWNoKGtleU1hcCA9PiB7XG4gICAgICAgIGlmICghQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkoa2V5TWFwLmFzc29jaWF0aW9ucykpIHtcbiAgICAgICAgICBrZXlNYXAuYXNzb2NpYXRpb25zLmZvckVhY2goYXNzb2NpYXRpb24gPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvblR5cGUgIT0gbnVsbCAmJiBLZXlNYXBPcHRpb25UeXBlLkNSVUQgPT0gb3B0aW9uVHlwZSkge1xuICAgICAgICAgICAgICBDcnVkVXRpbHMuc2V0T3B0aW9uc1VzaW5nVmFsdWVzKDxDcnVkPm9wdGlvbkNvbXBvbmVudCwgYXNzb2NpYXRpb24uZmllbGRLZXksIGtleU1hcCwgcmVsYW9kQWxsLCByZWNvcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEtleU1hcE9wdGlvblR5cGUuRk9STSA9PSBvcHRpb25UeXBlKSB7XG4gICAgICAgICAgICAgIEZvcm1VdGlscy5zZXRPcHRpb25zVXNpbmdWYWx1ZXMoPEZvcm0+b3B0aW9uQ29tcG9uZW50LCBhc3NvY2lhdGlvbi5maWVsZEtleSwga2V5TWFwLCByZWxhb2RBbGwsIHJlY29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoS2V5TWFwT3B0aW9uVHlwZS5MSVNUID09IG9wdGlvblR5cGUpIHtcbiAgICAgICAgICAgICAgTGlzdFV0aWxzLnNldE9wdGlvbnNVc2luZ1ZhbHVlcyg8TGlzdD5vcHRpb25Db21wb25lbnQsIGFzc29jaWF0aW9uLmZpZWxkS2V5LCBrZXlNYXAsIHJlbGFvZEFsbCwgcmVjb3JkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VmFsdWUoa2V5TWFwczogQXJyYXk8S2V5TWFwPiwgZmllbGRLZXk6IHN0cmluZywgdmFsdWVBc0tleTogYW55KTogYW55IHtcbiAgICBsZXQgdmFsdWU6IGFueSA9IFwiXCI7XG5cbiAgICBpZiAoIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGtleU1hcHMpKSB7XG4gICAgICBrZXlNYXBzLmZvckVhY2goa2V5TWFwID0+IHtcbiAgICAgICAgaWYgKCFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eShrZXlNYXAuYXNzb2NpYXRpb25zKSkge1xuICAgICAgICAgIGtleU1hcC5hc3NvY2lhdGlvbnMuZm9yRWFjaChhc3NvY2lhdGlvbiA9PiB7XG4gICAgICAgICAgICBpZiAoYXNzb2NpYXRpb24uZmllbGRLZXkgPT0gZmllbGRLZXkgJiYgIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGtleU1hcC5vcHRpb25zKSkge1xuICAgICAgICAgICAgICBrZXlNYXAub3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5rZXkgPT0gdmFsdWVBc0tleSkge1xuICAgICAgICAgICAgICAgICAgdmFsdWUgPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cbiJdfQ==