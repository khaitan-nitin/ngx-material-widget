import { Component, Input, Output, EventEmitter } from '@angular/core';
import { MatDialog } from '@angular/material/dialog';
import { Router, ActivatedRoute } from '@angular/router';
import { StringUtils, CollectionUtils, FormUtils, SecurityUtils, ButtonUtils, DependentUtils } from '../../../utility';
import { AbilityUtils } from '../../../utility/ability.utility';
import { Ability } from '@casl/ability';
import { ButtonDeleteConfirmationComponent } from '../button-delete-confirmation/button-delete-confirmation.component';
//export { Button, ObjectTree, ReservedButton, Action, ButtonType, HoverButton, ButtonGroup, IconPosition } from '../../model';
export class ButtonComponent {
    constructor(dialog, router, route, ability) {
        this.dialog = dialog;
        this.router = router;
        this.route = route;
        this.ability = ability;
        this.onClick = new EventEmitter();
        this.onIconClick = new EventEmitter();
        this.routerLink = [];
        this.displayButton = true;
        this.isButtonDisabled = false;
        this.isDisplayOnlyIcon = false;
        this.hasIconDisplay = false;
        this.isFlatButton = false;
        this.isGhostButton = false;
        this.isRaisedButton = false;
        this.isStrokedButton = false;
        this.isFabButton = false;
        this.isChip = false;
        this.isLink = false;
        this.isGroupButton = false;
        this.isMenuButton = false;
        this.buttonWithoutPadding = false;
        this.state = true;
        AbilityUtils.setAbility(this.ability);
    }
    get button() {
        return this._button;
    }
    set button(_button) {
        this._button = _button;
        if (StringUtils.isEmpty(this.label) || !StringUtils.isEmpty(this._button.label)) {
            this.label = this._button.label;
        }
        if (StringUtils.isEmpty(this._button.width)) {
            this._button.width = '';
        }
        else {
            this._button.width = this._button.width + '%';
            document.documentElement.style.setProperty('--width', this._button.width + '%');
        }
        if (StringUtils.isEmpty(this._button.iconPosition)) {
            this._button.iconPosition = "LEFT" /* LEFT */;
        }
    }
    ngOnInit() {
        if (this.displayButton) {
            this.setLabel();
            this.setButtonEnable();
            if (this.form) {
                this.formSubscription = this.form.valueChanges.subscribe(obj => {
                    this.setButtonEnable();
                });
            }
            this.setButtonDisplay();
            this.setOnlyIconDisplay();
            this.setIconDisplay();
            this.setLink();
            this.setGroupButton();
            this.setFlatButton();
            this.setGhostButton();
            this.setRaisedButton();
            this.setStrokedButton();
            this.setFabButton();
            this.setChip();
            this.setButtonWithoutPadding();
            this.setMenuButton();
        }
    }
    setButtonDisplay() {
        if ((!CollectionUtils.isEmpty(this._button.displayInFormModes) && this._button.displayInFormModes.indexOf(this.formDisplayMode) <= -1) || !DependentUtils.displayDependencyField(this._button.dependentOnFields, null, this.context ? this.context : this.originalData)) {
            this.displayButton = false;
        }
    }
    setButtonWithoutPadding() {
        if (this._button.identifier == "fieldTextClearBtn" || this._button.identifier == "fieldRouteToBtn" || this._button.identifier == "listFieldAsLink" || this.identifier == "listFieldAsLink") {
            this.buttonWithoutPadding = true;
        }
    }
    setLabel() {
        if (StringUtils.isEmpty(this.label)) {
            this.label = this._button.label;
        }
    }
    click(event) {
        if (!CollectionUtils.isEmpty(this._button.confirmationConfiguration)) {
            this.openDialog(event);
        }
        else {
            this.invokeAction(null, event);
        }
    }
    openDialog(event) {
        const dialogRef = this.dialog.open(ButtonDeleteConfirmationComponent, {
            width: this._button.confirmationConfiguration.width ? this._button.confirmationConfiguration.width : '250px',
            data: {
                form: this.form,
                sourceIdentifier: this.sourceIdentifier,
                sourceIndex: this.sourceIndex,
                widgetArrayIndex: this.widgetArrayIndex,
                context: this.context,
                originalData: this.originalData,
                buttonRoute: this.buttonRoute,
                parentHierarchy: this.parentHierarchy,
                confirmationConfig: this._button.confirmationConfiguration,
            }
        });
        dialogRef.afterClosed().subscribe(result => {
            console.log('The dialog was closed');
            this.invokeAction(result, event);
        });
    }
    invokeAction(actionDialog, event) {
        if (this._button.identifier == "crudBackButton" && this.buttonRoute && this.buttonRoute.length > 0) {
            this.router.navigate(this.buttonRoute, { skipLocationChange: false, replaceUrl: true });
            return;
        }
        if (this._button.identifier == "reset" /* RESET */) {
            FormUtils.reset(this.form);
            this.context = {};
        }
        let action = ButtonUtils.getAction(this.sourceIdentifier, this.sourceIndex, this.widgetArrayIndex, this._button.identifier, this.parentHierarchy, event, this.originalData, this.context, actionDialog);
        if (this._button.identifier == "search" /* SEARCH */ || this._button.identifier == "reset" /* RESET */) {
            this.addSearchParamsInUrl(action.data);
        }
        else {
            this.onClick.emit(action);
        }
    }
    iconClick(event) {
        let action = ButtonUtils.getAction(this.sourceIdentifier, this.sourceIndex, this.widgetArrayIndex, this._button.identifier, this.parentHierarchy, event, this.originalData, this.context, null);
        if (this._button['groupIdentifier'] == "clearFilterField" /* CLEAR_FILTER_FIELD */) {
            delete action.data[action.action];
            this.addSearchParamsInUrl(action.data);
        }
        else {
            this.onIconClick.emit(action);
        }
    }
    addSearchParamsInUrl(filterData) {
        const queryParams = { filter: SecurityUtils.encrypt(filterData) };
        this.router.navigate([], {
            relativeTo: this.route,
            queryParams: queryParams,
            queryParamsHandling: 'merge',
            skipLocationChange: false,
            replaceUrl: true
        });
    }
    setButtonEnable() {
        let isButtonDisabled = false;
        if (this.form) {
            isButtonDisabled = !this.form.valid;
        }
        if (this.form && this.form.disabled) {
            isButtonDisabled = false;
        }
        if (this._button.identifier == "search" /* SEARCH */ || this._button.identifier == "cancel" /* CANCEL */ || this._button.identifier == "reset" /* RESET */ || this._button.identifier == "add_field" /* ADD_FIELD */ || this._button.identifier == "remove_field" /* REMOVE_FIELD */ || this._button.alwaysEnable == true) {
            isButtonDisabled = false;
        }
        if (this.disabled) {
            isButtonDisabled = this.disabled;
        }
        this.isButtonDisabled = isButtonDisabled;
    }
    setOnlyIconDisplay() {
        this.isDisplayOnlyIcon = this._button && this._button.onlyIcon && !StringUtils.isEmpty(this._button.icon) ? true : false;
    }
    setIconDisplay() {
        this.hasIconDisplay = this._button && this._button.icon ? true : false;
    }
    setFlatButton() {
        this.isFlatButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "FLAT" /* FLAT */ && !this.isGroupButton && !this.isLink : false;
    }
    setGhostButton() {
        this.isGhostButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "GHOST" /* GHOST */ && !this.isGroupButton && !this.isLink : false;
    }
    setRaisedButton() {
        this.isRaisedButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "RAISED" /* RAISED */ && !this.isGroupButton && !this.isLink : false;
    }
    setStrokedButton() {
        this.isStrokedButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "STROKED" /* STROKED */ && !this.isGroupButton && !this.isLink : false;
    }
    setFabButton() {
        this.isFabButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "FAB" /* FAB */ && !this.isGroupButton && !this.isLink : false;
    }
    setChip() {
        this.isChip = this._button && ButtonUtils.instanceOfChipButton(this._button) && !StringUtils.isEmpty(this._button.groupIdentifier) ? true : false;
    }
    setLink() {
        this.isLink = this._button && !StringUtils.isEmpty(this.label) ? !CollectionUtils.isEmpty(this._button.routerLink) : false;
        this.routerLink = this._button.routerLink;
    }
    setGroupButton() {
        this.isGroupButton = this._button && ButtonUtils.instanceOfButtonGroup(this._button) && !StringUtils.isEmpty(this._button.groupIdentifier) ? true : false;
    }
    setMenuButton() {
        this.isMenuButton = this._button && ButtonUtils.instanceOfHoverButton(this._button) ? true : false;
    }
    ngOnDestroy() {
        if (this.formSubscription) {
            this.formSubscription.unsubscribe();
        }
    }
}
ButtonComponent.decorators = [
    { type: Component, args: [{
                selector: 'mx-button',
                template: "<!-- <pre>{{ displayButton | json }}</pre> -->\n<span \n    [style.width]=\"_button.width\"\n    class=\"mx-button-wrapper\" \n    *ngIf=\"_button && displayButton && (_button.permission == null || (_button.permission && (_button.permission['subject'] | can: _button.permission['action'])))\">\n    <button \n        mat-menu-item  \n        *ngIf=\"isMenuButton\"\n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default'}\" \n        class=\"mx-menu-button mx-menu-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': 'calc(' + _button.width + ' - 8px)'}\"\n        [attr.color]=\"_button.color\"  \n        (click)=\"click($event)\" \n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n\n    <button \n        mat-flat-button\n        *ngIf=\"isFlatButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default'}\" \n        class=\"mx-flat-button mx-flat-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\"  \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button> \n\n    <button \n        mat-button \n        *ngIf=\"isGhostButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default', 'mx-button-wt-padding': buttonWithoutPadding == true}\" \n        class=\"mx-ghost-button mx-ghost-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>    \n    </button>\n    \n    <button \n        mat-raised-button \n        *ngIf=\"isRaisedButton\"\n        [color]=\"_button.color\" \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default'}\" \n        class=\"mx-raised-button mx-raised-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        [disabled]=\"isButtonDisabled\" \n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n\n    <button \n        mat-stroked-button \n        *ngIf=\"isStrokedButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default'}\" \n        class=\"mx-stroked-button mx-stroked-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n\n    <button \n        mat-fab \n        *ngIf=\"isFabButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\"  \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default'}\" \n        class=\"mx-fab-button mx-fab-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n \n    <mat-chip \n        [selected]=\"state\" \n        *ngIf=\"isChip\" \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default'}\" \n        class=\"mx-chip-button mx-chip-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </mat-chip>\n    <!-- {{_button | json}} -->\n    <a \n        mat-button \n        *ngIf=\"isLink\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\"  \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-default-btn': _button.size == 'default', 'mx-button-wt-padding': buttonWithoutPadding == true}\" \n        class=\"mx-link mx-link-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        [routerLink]=\"routerLink\" \n        [matTooltip]=\"_button.label\"\n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </a>\n\n    <!-- appearance=\"legacy\"  -->\n    <mat-button-toggle \n        *ngIf=\"isGroupButton\" \n        [value]=\"_button.identifier\" \n        [disabled]=\"isButtonDisabled\" \n        [attr.aria-label]=\"label\" \n        [ngClass]=\"{'mx-small-btn': _button.size == 'small', 'mx-tiny-btn': _button.size == 'tiny', 'mx-micro-btn': _button.size == 'micro', 'mx-toggle-default-btn': _button.size == 'default'}\" \n        class=\"mx-toggle-button mx-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (change)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\"  \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </mat-button-toggle>\n</span>\n\n<ng-template #cfButtonIcon>\n    <mat-icon \n        (click)=\"iconClick($event)\" \n        aria-hidden=\"true\" \n        [attr.aria-label]=\"label\" \n        [ngClass]=\"{'mx-small-icon': _button.size == 'small', 'mx-tiny-icon': _button.size == 'tiny', 'mx-micro-icon': _button.size == 'micro'}\"  \n        class=\"mx-button-icon mx-button-icon-{{_button.identifier}}\"\n        [style.padding-right.px]=\"!isDisplayOnlyIcon ? 5 : 0\"\n        *ngIf=\"hasIconDisplay && (_button.iconPosition == 'LEFT' || _button.iconPosition == 'TOP')\">\n            {{_button.icon}}\n    </mat-icon>\n    <br *ngIf=\"hasIconDisplay && _button.iconPosition == 'TOP' && !isDisplayOnlyIcon\"/>\n    <span class=\"mx-button-label mx-button-label-{{_button.identifier}}\" *ngIf=\"!isDisplayOnlyIcon\">{{ label }}</span>\n    <br *ngIf=\"hasIconDisplay && _button.iconPosition == 'BOTTOM' && !isDisplayOnlyIcon\"/>\n    <mat-icon \n        (click)=\"iconClick($event)\" \n        aria-hidden=\"true\" \n        [attr.aria-label]=\"label\" \n        [ngClass]=\"{'mx-small-icon': _button.size == 'small', 'mx-tiny-icon': _button.size == 'tiny', 'mx-micro-icon': _button.size == 'micro'}\"  \n        class=\"mx-button-icon mx-button-icon-{{_button.identifier}}\"\n        [style.padding-left.px]=\"!isDisplayOnlyIcon ? 5 : 0\"\n        *ngIf=\"hasIconDisplay && (_button.iconPosition == 'RIGHT' || _button.iconPosition == 'BOTTOM')\">\n            {{_button.icon}}\n    </mat-icon>\n</ng-template>",
                styles: [".mx-small-btn{box-sizing:border-box;line-height:30px;min-width:unset}.mx-small-icon{font-size:12px;height:12px;width:12px}.mx-small-btn ::ng-deep .mat-button-toggle-label-content,.mx-small-btn ::ng-deep .mx-button-label{line-height:30px}.mx-small-btn.mat-standard-chip{min-height:30px}.mx-tiny-btn{box-sizing:border-box;font-size:10px;line-height:24px;min-width:unset}.mx-tiny-icon{font-size:10px;height:10px;width:10px}.mx-tiny-btn ::ng-deep .mat-button-toggle-label-content,.mx-tiny-btn ::ng-deep .mx-button-label{line-height:24px}.mx-tiny-btn.mat-standard-chip{min-height:26px}.mx-micro-btn{box-sizing:border-box;font-size:8px;line-height:18px;min-width:unset}.mx-micro-icon{font-size:8px;height:8px;width:8px}.mx-micro-btn ::ng-deep .mat-button-toggle-label-content,.mx-micro-btn ::ng-deep .mx-button-label{line-height:18px}.mx-micro-btn.mat-standard-chip{min-height:20px}.mx-toggle-default-btn ::ng-deep .mat-button-toggle-label-content,.mx-toggle-default-btn ::ng-deep .mx-button-label{line-height:36px}.mx-chip-button{justify-content:center}.mx-chip-button .mat-standard-chip{margin:unset}.mx-button-wt-padding,.mx-button-wt-padding .mat-button{min-width:0!important;padding:0!important}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{padding:0 5px!important}"]
            },] }
];
ButtonComponent.ctorParameters = () => [
    { type: MatDialog },
    { type: Router },
    { type: ActivatedRoute },
    { type: Ability }
];
ButtonComponent.propDecorators = {
    form: [{ type: Input }],
    formDisplayMode: [{ type: Input }],
    sourceIdentifier: [{ type: Input }],
    sourceIndex: [{ type: Input }],
    widgetArrayIndex: [{ type: Input }],
    identifier: [{ type: Input }],
    context: [{ type: Input }],
    originalData: [{ type: Input }],
    label: [{ type: Input }],
    buttonRoute: [{ type: Input }],
    parentHierarchy: [{ type: Input }],
    disabled: [{ type: Input }],
    onClick: [{ type: Output }],
    onIconClick: [{ type: Output }],
    _button: [{ type: Input }],
    button: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbml0aW5raGFpdGFuL05pdGluL3N0dWR5L2FuZ3VsYXIvbWF0ZXJpYWwvYWRtaW4tYnVpbGRlci1wbHVnaW4vcHJvamVjdHMvbmd4LW1hdGVyaWFsLXdpZGdldC9zcmMvIiwic291cmNlcyI6WyJsaWIvYnV0dG9uL2NvbXBvbmVudC9idXR0b24vYnV0dG9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBRzFGLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUdyRCxPQUFPLEVBQVUsTUFBTSxFQUFFLGNBQWMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRWpFLE9BQU8sRUFBRSxXQUFXLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZILE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNoRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxpQ0FBaUMsRUFBRSxNQUFNLG9FQUFvRSxDQUFDO0FBRXZILCtIQUErSDtBQU8vSCxNQUFNLE9BQU8sZUFBZTtJQTBEMUIsWUFDUyxNQUFpQixFQUNoQixNQUFjLEVBQ2QsS0FBcUIsRUFDckIsT0FBZ0I7UUFIakIsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUNoQixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsVUFBSyxHQUFMLEtBQUssQ0FBZ0I7UUFDckIsWUFBTyxHQUFQLE9BQU8sQ0FBUztRQWhEaEIsWUFBTyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDN0IsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FB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VyxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDckcsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN6QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDckM7SUFDSCxDQUFDOzs7WUFyUkYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxXQUFXO2dCQUNyQixndlZBQXNDOzthQUV2Qzs7O1lBaEJRLFNBQVM7WUFHRCxNQUFNO1lBQUUsY0FBYztZQUk5QixPQUFPOzs7bUJBV2IsS0FBSzs4QkFDTCxLQUFLOytCQUVMLEtBQUs7MEJBQ0wsS0FBSzsrQkFDTCxLQUFLO3lCQUNMLEtBQUs7c0JBQ0wsS0FBSzsyQkFDTCxLQUFLO29CQUNMLEtBQUs7MEJBQ0wsS0FBSzs4QkFDTCxLQUFLO3VCQUNMLEtBQUs7c0JBQ0wsTUFBTTswQkFDTixNQUFNO3NCQUVOLEtBQUs7cUJBSUwsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQnV0dG9uLCBPYmplY3RUcmVlLCBSZXNlcnZlZEJ1dHRvbiwgQWN0aW9uLCBCdXR0b25UeXBlLCBIb3ZlckJ1dHRvbiwgQnV0dG9uR3JvdXAsIEljb25Qb3NpdGlvbiB9IGZyb20gJy4uLy4uL21vZGVsJztcbmltcG9ydCB7IEZvcm1Hcm91cCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG4vL2ltcG9ydCB7IEJ1dHRvbkRlbGV0ZUNvbmZpcm1hdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2J1dHRvbi1kZWxldGUtY29uZmlybWF0aW9uL2J1dHRvbi1kZWxldGUtY29uZmlybWF0aW9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFBhcmFtcywgUm91dGVyLCBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBGb3JtRGlhcGx5TW9kZSB9IGZyb20gJy4uLy4uLy4uL2Zvcm0vbW9kZWwnO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMsIENvbGxlY3Rpb25VdGlscywgRm9ybVV0aWxzLCBTZWN1cml0eVV0aWxzLCBCdXR0b25VdGlscywgRGVwZW5kZW50VXRpbHMgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5JztcbmltcG9ydCB7IEFiaWxpdHlVdGlscyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHkvYWJpbGl0eS51dGlsaXR5JztcbmltcG9ydCB7IEFiaWxpdHkgfSBmcm9tICdAY2FzbC9hYmlsaXR5JztcbmltcG9ydCB7IEJ1dHRvbkRlbGV0ZUNvbmZpcm1hdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2J1dHRvbi1kZWxldGUtY29uZmlybWF0aW9uL2J1dHRvbi1kZWxldGUtY29uZmlybWF0aW9uLmNvbXBvbmVudCc7XG5cbi8vZXhwb3J0IHsgQnV0dG9uLCBPYmplY3RUcmVlLCBSZXNlcnZlZEJ1dHRvbiwgQWN0aW9uLCBCdXR0b25UeXBlLCBIb3ZlckJ1dHRvbiwgQnV0dG9uR3JvdXAsIEljb25Qb3NpdGlvbiB9IGZyb20gJy4uLy4uL21vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbXgtYnV0dG9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2J1dHRvbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2J1dHRvbi5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEJ1dHRvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgQElucHV0KCkgZm9ybTogRm9ybUdyb3VwO1xuICBASW5wdXQoKSBmb3JtRGlzcGxheU1vZGU6IEZvcm1EaWFwbHlNb2RlO1xuXG4gIEBJbnB1dCgpIHNvdXJjZUlkZW50aWZpZXI6IHN0cmluZztcbiAgQElucHV0KCkgc291cmNlSW5kZXg6IG51bWJlcjtcbiAgQElucHV0KCkgd2lkZ2V0QXJyYXlJbmRleDogbnVtYmVyO1xuICBASW5wdXQoKSBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbnRleHQ6IGFueTtcbiAgQElucHV0KCkgb3JpZ2luYWxEYXRhOiBhbnk7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGJ1dHRvblJvdXRlOiBBcnJheTxzdHJpbmc+O1xuICBASW5wdXQoKSBwYXJlbnRIaWVyYXJjaHk6IE9iamVjdFRyZWU7XG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xuICBAT3V0cHV0KCkgb25DbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uSWNvbkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBJbnB1dCgpIF9idXR0b246IEJ1dHRvbiB8IEJ1dHRvbkdyb3VwIHwgSG92ZXJCdXR0b247XG4gIGdldCBidXR0b24oKTogQnV0dG9uIHwgQnV0dG9uR3JvdXAgfCBIb3ZlckJ1dHRvbiB7XG4gICAgcmV0dXJuIHRoaXMuX2J1dHRvbjtcbiAgfVxuICBASW5wdXQoKVxuICBzZXQgYnV0dG9uKF9idXR0b246IEJ1dHRvbiB8IEJ1dHRvbkdyb3VwIHwgSG92ZXJCdXR0b24pIHtcbiAgICB0aGlzLl9idXR0b24gPSBfYnV0dG9uO1xuICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMubGFiZWwpIHx8ICFTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMuX2J1dHRvbi5sYWJlbCkpIHtcbiAgICAgIHRoaXMubGFiZWwgPSB0aGlzLl9idXR0b24ubGFiZWw7XG4gICAgfVxuICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMuX2J1dHRvbi53aWR0aCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbi53aWR0aCA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b24ud2lkdGggPSB0aGlzLl9idXR0b24ud2lkdGggKyAnJSc7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0td2lkdGgnLCB0aGlzLl9idXR0b24ud2lkdGggKyAnJScpO1xuICAgIH1cbiAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eSh0aGlzLl9idXR0b24uaWNvblBvc2l0aW9uKSkge1xuICAgICAgdGhpcy5fYnV0dG9uLmljb25Qb3NpdGlvbiA9IEljb25Qb3NpdGlvbi5MRUZUO1xuICAgIH1cbiAgfVxuXG4gIHJvdXRlckxpbmsgPSBbXTtcblxuICBkaXNwbGF5QnV0dG9uOiBib29sZWFuID0gdHJ1ZTtcbiAgaXNCdXR0b25EaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBpc0Rpc3BsYXlPbmx5SWNvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBoYXNJY29uRGlzcGxheTogYm9vbGVhbiA9IGZhbHNlO1xuICBpc0ZsYXRCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcbiAgaXNHaG9zdEJ1dHRvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBpc1JhaXNlZEJ1dHRvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBpc1N0cm9rZWRCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcbiAgaXNGYWJCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcbiAgaXNDaGlwOiBib29sZWFuID0gZmFsc2U7XG4gIGlzTGluazogYm9vbGVhbiA9IGZhbHNlO1xuICBpc0dyb3VwQnV0dG9uOiBib29sZWFuID0gZmFsc2U7XG4gIGlzTWVudUJ1dHRvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBidXR0b25XaXRob3V0UGFkZGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG5cbiAgZm9ybVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkaWFsb2c6IE1hdERpYWxvZyxcbiAgICBwcml2YXRlIHJvdXRlcjogUm91dGVyLFxuICAgIHByaXZhdGUgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgYWJpbGl0eTogQWJpbGl0eVxuICApIHtcbiAgICBBYmlsaXR5VXRpbHMuc2V0QWJpbGl0eSh0aGlzLmFiaWxpdHkpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuZGlzcGxheUJ1dHRvbikge1xuICAgICAgdGhpcy5zZXRMYWJlbCgpO1xuXG4gICAgICB0aGlzLnNldEJ1dHRvbkVuYWJsZSgpO1xuICAgICAgaWYgKHRoaXMuZm9ybSkge1xuICAgICAgICB0aGlzLmZvcm1TdWJzY3JpcHRpb24gPSB0aGlzLmZvcm0udmFsdWVDaGFuZ2VzLnN1YnNjcmliZShvYmogPT4ge1xuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uRW5hYmxlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldEJ1dHRvbkRpc3BsYXkoKTtcbiAgICAgIHRoaXMuc2V0T25seUljb25EaXNwbGF5KCk7XG4gICAgICB0aGlzLnNldEljb25EaXNwbGF5KCk7XG4gICAgICB0aGlzLnNldExpbmsoKTtcbiAgICAgIHRoaXMuc2V0R3JvdXBCdXR0b24oKTtcbiAgICAgIHRoaXMuc2V0RmxhdEJ1dHRvbigpO1xuICAgICAgdGhpcy5zZXRHaG9zdEJ1dHRvbigpO1xuICAgICAgdGhpcy5zZXRSYWlzZWRCdXR0b24oKTtcbiAgICAgIHRoaXMuc2V0U3Ryb2tlZEJ1dHRvbigpO1xuICAgICAgdGhpcy5zZXRGYWJCdXR0b24oKTtcbiAgICAgIHRoaXMuc2V0Q2hpcCgpO1xuICAgICAgdGhpcy5zZXRCdXR0b25XaXRob3V0UGFkZGluZygpO1xuICAgICAgdGhpcy5zZXRNZW51QnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0QnV0dG9uRGlzcGxheSgpIHtcbiAgICBpZiAoKCFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eSh0aGlzLl9idXR0b24uZGlzcGxheUluRm9ybU1vZGVzKSAmJiB0aGlzLl9idXR0b24uZGlzcGxheUluRm9ybU1vZGVzLmluZGV4T2YodGhpcy5mb3JtRGlzcGxheU1vZGUpIDw9IC0xKSB8fCAhRGVwZW5kZW50VXRpbHMuZGlzcGxheURlcGVuZGVuY3lGaWVsZCh0aGlzLl9idXR0b24uZGVwZW5kZW50T25GaWVsZHMsIG51bGwsIHRoaXMuY29udGV4dCA/IHRoaXMuY29udGV4dCA6IHRoaXMub3JpZ2luYWxEYXRhKSkge1xuICAgICAgdGhpcy5kaXNwbGF5QnV0dG9uID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc2V0QnV0dG9uV2l0aG91dFBhZGRpbmcoKSB7XG4gICAgaWYgKHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFwiZmllbGRUZXh0Q2xlYXJCdG5cIiB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBcImZpZWxkUm91dGVUb0J0blwiIHx8IHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFwibGlzdEZpZWxkQXNMaW5rXCIgfHwgdGhpcy5pZGVudGlmaWVyID09IFwibGlzdEZpZWxkQXNMaW5rXCIpIHtcbiAgICAgIHRoaXMuYnV0dG9uV2l0aG91dFBhZGRpbmcgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBzZXRMYWJlbCgpOiB2b2lkIHtcbiAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eSh0aGlzLmxhYmVsKSkge1xuICAgICAgdGhpcy5sYWJlbCA9IHRoaXMuX2J1dHRvbi5sYWJlbDtcbiAgICB9XG4gIH1cblxuICBzdGF0ZTogYm9vbGVhbiA9IHRydWU7XG4gIGNsaWNrKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAoIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KHRoaXMuX2J1dHRvbi5jb25maXJtYXRpb25Db25maWd1cmF0aW9uKSkge1xuICAgICAgdGhpcy5vcGVuRGlhbG9nKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbnZva2VBY3Rpb24obnVsbCwgZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5EaWFsb2coZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oQnV0dG9uRGVsZXRlQ29uZmlybWF0aW9uQ29tcG9uZW50LCB7XG4gICAgICB3aWR0aDogdGhpcy5fYnV0dG9uLmNvbmZpcm1hdGlvbkNvbmZpZ3VyYXRpb24ud2lkdGggPyB0aGlzLl9idXR0b24uY29uZmlybWF0aW9uQ29uZmlndXJhdGlvbi53aWR0aCA6ICcyNTBweCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZvcm06IHRoaXMuZm9ybSxcbiAgICAgICAgc291cmNlSWRlbnRpZmllcjogdGhpcy5zb3VyY2VJZGVudGlmaWVyLFxuICAgICAgICBzb3VyY2VJbmRleDogdGhpcy5zb3VyY2VJbmRleCxcbiAgICAgICAgd2lkZ2V0QXJyYXlJbmRleDogdGhpcy53aWRnZXRBcnJheUluZGV4LFxuICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgIG9yaWdpbmFsRGF0YTogdGhpcy5vcmlnaW5hbERhdGEsXG4gICAgICAgIGJ1dHRvblJvdXRlOiB0aGlzLmJ1dHRvblJvdXRlLFxuICAgICAgICBwYXJlbnRIaWVyYXJjaHk6IHRoaXMucGFyZW50SGllcmFyY2h5LFxuICAgICAgICBjb25maXJtYXRpb25Db25maWc6IHRoaXMuX2J1dHRvbi5jb25maXJtYXRpb25Db25maWd1cmF0aW9uLFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGlhbG9nUmVmLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVGhlIGRpYWxvZyB3YXMgY2xvc2VkJyk7XG4gICAgICB0aGlzLmludm9rZUFjdGlvbihyZXN1bHQsIGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGludm9rZUFjdGlvbihhY3Rpb25EaWFsb2c6IGFueSwgZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBcImNydWRCYWNrQnV0dG9uXCIgJiYgdGhpcy5idXR0b25Sb3V0ZSAmJiB0aGlzLmJ1dHRvblJvdXRlLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKHRoaXMuYnV0dG9uUm91dGUsIHsgc2tpcExvY2F0aW9uQ2hhbmdlOiBmYWxzZSwgcmVwbGFjZVVybDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYnV0dG9uLmlkZW50aWZpZXIgPT0gUmVzZXJ2ZWRCdXR0b24uUkVTRVQpIHtcbiAgICAgIEZvcm1VdGlscy5yZXNldCh0aGlzLmZvcm0pO1xuICAgICAgdGhpcy5jb250ZXh0ID0ge307XG4gICAgfVxuXG4gICAgbGV0IGFjdGlvbjogQWN0aW9uID0gQnV0dG9uVXRpbHMuZ2V0QWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlSWRlbnRpZmllciwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VJbmRleCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aWRnZXRBcnJheUluZGV4LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9idXR0b24uaWRlbnRpZmllciwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRIaWVyYXJjaHksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9yaWdpbmFsRGF0YSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25EaWFsb2cpO1xuXG4gICAgaWYgKHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFJlc2VydmVkQnV0dG9uLlNFQVJDSCB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBSZXNlcnZlZEJ1dHRvbi5SRVNFVCkge1xuICAgICAgdGhpcy5hZGRTZWFyY2hQYXJhbXNJblVybChhY3Rpb24uZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25DbGljay5lbWl0KGFjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgaWNvbkNsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICBsZXQgYWN0aW9uOiBBY3Rpb24gPSBCdXR0b25VdGlscy5nZXRBY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VJZGVudGlmaWVyLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZUluZGV4LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZGdldEFycmF5SW5kZXgsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEhpZXJhcmNoeSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JpZ2luYWxEYXRhLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwpO1xuXG4gICAgaWYgKHRoaXMuX2J1dHRvblsnZ3JvdXBJZGVudGlmaWVyJ10gPT0gUmVzZXJ2ZWRCdXR0b24uQ0xFQVJfRklMVEVSX0ZJRUxEKSB7XG4gICAgICBkZWxldGUgYWN0aW9uLmRhdGFbYWN0aW9uLmFjdGlvbl07XG4gICAgICB0aGlzLmFkZFNlYXJjaFBhcmFtc0luVXJsKGFjdGlvbi5kYXRhKTtcbiAgICB9IGVsc2UgIHtcbiAgICAgIHRoaXMub25JY29uQ2xpY2suZW1pdChhY3Rpb24pO1xuICAgIH1cbiAgfVxuICBcbiAgcHVibGljIGFkZFNlYXJjaFBhcmFtc0luVXJsKGZpbHRlckRhdGE6IGFueSkge1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zOiBQYXJhbXMgPSB7IGZpbHRlcjogU2VjdXJpdHlVdGlscy5lbmNyeXB0KGZpbHRlckRhdGEpIH07XG5cbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShcbiAgICAgIFtdLFxuICAgICAge1xuICAgICAgICByZWxhdGl2ZVRvOiB0aGlzLnJvdXRlLFxuICAgICAgICBxdWVyeVBhcmFtczogcXVlcnlQYXJhbXMsXG4gICAgICAgIHF1ZXJ5UGFyYW1zSGFuZGxpbmc6ICdtZXJnZScsIC8vIHJlbW92ZSB0byByZXBsYWNlIGFsbCBxdWVyeSBwYXJhbXMgYnkgcHJvdmlkZWRcbiAgICAgICAgc2tpcExvY2F0aW9uQ2hhbmdlOiBmYWxzZSxcbiAgICAgICAgcmVwbGFjZVVybDogdHJ1ZVxuICAgICAgfSk7XG4gIH1cblxuICBzZXRCdXR0b25FbmFibGUoKTogdm9pZCB7XG4gICAgbGV0IGlzQnV0dG9uRGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgIGlzQnV0dG9uRGlzYWJsZWQgPSAhdGhpcy5mb3JtLnZhbGlkO1xuICAgIH1cbiAgICBpZiAodGhpcy5mb3JtICYmIHRoaXMuZm9ybS5kaXNhYmxlZCkge1xuICAgICAgaXNCdXR0b25EaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYnV0dG9uLmlkZW50aWZpZXIgPT0gUmVzZXJ2ZWRCdXR0b24uU0VBUkNIIHx8IHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFJlc2VydmVkQnV0dG9uLkNBTkNFTCB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBSZXNlcnZlZEJ1dHRvbi5SRVNFVCB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBSZXNlcnZlZEJ1dHRvbi5BRERfRklFTEQgfHwgdGhpcy5fYnV0dG9uLmlkZW50aWZpZXIgPT0gUmVzZXJ2ZWRCdXR0b24uUkVNT1ZFX0ZJRUxEIHx8IHRoaXMuX2J1dHRvbi5hbHdheXNFbmFibGUgPT0gdHJ1ZSkge1xuICAgICAgaXNCdXR0b25EaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgaXNCdXR0b25EaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQ7XG4gICAgfVxuICAgIHRoaXMuaXNCdXR0b25EaXNhYmxlZCA9IGlzQnV0dG9uRGlzYWJsZWQ7XG4gIH1cblxuICBzZXRPbmx5SWNvbkRpc3BsYXkoKTogdm9pZCB7XG4gICAgdGhpcy5pc0Rpc3BsYXlPbmx5SWNvbiA9IHRoaXMuX2J1dHRvbiAmJiB0aGlzLl9idXR0b24ub25seUljb24gJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkodGhpcy5fYnV0dG9uLmljb24pID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgc2V0SWNvbkRpc3BsYXkoKTogdm9pZCB7XG4gICAgdGhpcy5oYXNJY29uRGlzcGxheSA9IHRoaXMuX2J1dHRvbiAmJiB0aGlzLl9idXR0b24uaWNvbiA/IHRydWUgOiBmYWxzZTtcbiAgfVxuXG4gIHNldEZsYXRCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc0ZsYXRCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbih0aGlzLl9idXR0b24pID8gKDxCdXR0b24+dGhpcy5fYnV0dG9uKS50eXBlID09IEJ1dHRvblR5cGUuRkxBVCAmJiAhdGhpcy5pc0dyb3VwQnV0dG9uICYmICF0aGlzLmlzTGluayA6IGZhbHNlO1xuICB9XG5cbiAgc2V0R2hvc3RCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc0dob3N0QnV0dG9uID0gdGhpcy5fYnV0dG9uICYmIEJ1dHRvblV0aWxzLmluc3RhbmNlT2ZCdXR0b24odGhpcy5fYnV0dG9uKSA/ICg8QnV0dG9uPnRoaXMuX2J1dHRvbikudHlwZSA9PSBCdXR0b25UeXBlLkdIT1NUICYmICF0aGlzLmlzR3JvdXBCdXR0b24gJiYgIXRoaXMuaXNMaW5rIDogZmFsc2U7XG4gIH1cblxuICBzZXRSYWlzZWRCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc1JhaXNlZEJ1dHRvbiA9IHRoaXMuX2J1dHRvbiAmJiBCdXR0b25VdGlscy5pbnN0YW5jZU9mQnV0dG9uKHRoaXMuX2J1dHRvbikgPyAoPEJ1dHRvbj50aGlzLl9idXR0b24pLnR5cGUgPT0gQnV0dG9uVHlwZS5SQUlTRUQgJiYgIXRoaXMuaXNHcm91cEJ1dHRvbiAmJiAhdGhpcy5pc0xpbmsgOiBmYWxzZTtcbiAgfVxuXG4gIHNldFN0cm9rZWRCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc1N0cm9rZWRCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbih0aGlzLl9idXR0b24pID8gKDxCdXR0b24+dGhpcy5fYnV0dG9uKS50eXBlID09IEJ1dHRvblR5cGUuU1RST0tFRCAmJiAhdGhpcy5pc0dyb3VwQnV0dG9uICYmICF0aGlzLmlzTGluayA6IGZhbHNlO1xuICB9XG5cbiAgc2V0RmFiQnV0dG9uKCk6IHZvaWQge1xuICAgIHRoaXMuaXNGYWJCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbih0aGlzLl9idXR0b24pID8gKDxCdXR0b24+dGhpcy5fYnV0dG9uKS50eXBlID09IEJ1dHRvblR5cGUuRkFCICYmICF0aGlzLmlzR3JvdXBCdXR0b24gJiYgIXRoaXMuaXNMaW5rIDogZmFsc2U7XG4gIH1cblxuICBzZXRDaGlwKCk6IHZvaWQge1xuICAgIHRoaXMuaXNDaGlwID0gdGhpcy5fYnV0dG9uICYmIEJ1dHRvblV0aWxzLmluc3RhbmNlT2ZDaGlwQnV0dG9uKHRoaXMuX2J1dHRvbikgJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkoKDxCdXR0b25Hcm91cD50aGlzLl9idXR0b24pLmdyb3VwSWRlbnRpZmllcikgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICBzZXRMaW5rKCk6IHZvaWQge1xuICAgIHRoaXMuaXNMaW5rID0gdGhpcy5fYnV0dG9uICYmICFTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMubGFiZWwpID8gIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KCg8QnV0dG9uPnRoaXMuX2J1dHRvbikucm91dGVyTGluaykgOiBmYWxzZTtcbiAgICB0aGlzLnJvdXRlckxpbmsgPSAoPEJ1dHRvbj50aGlzLl9idXR0b24pLnJvdXRlckxpbms7XG4gIH1cblxuICBzZXRHcm91cEJ1dHRvbigpOiB2b2lkIHtcbiAgICB0aGlzLmlzR3JvdXBCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbkdyb3VwKHRoaXMuX2J1dHRvbikgJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkoKDxCdXR0b25Hcm91cD50aGlzLl9idXR0b24pLmdyb3VwSWRlbnRpZmllcikgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICBzZXRNZW51QnV0dG9uKCk6IHZvaWQge1xuICAgIHRoaXMuaXNNZW51QnV0dG9uID0gdGhpcy5fYnV0dG9uICYmIEJ1dHRvblV0aWxzLmluc3RhbmNlT2ZIb3ZlckJ1dHRvbih0aGlzLl9idXR0b24pID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuZm9ybVN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5mb3JtU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG59XG4iXX0=