import { Component, Input, Output, EventEmitter } from '@angular/core';
import { MatDialog } from '@angular/material/dialog';
import { ButtonDeleteConfirmationComponent } from '../button-delete-confirmation/button-delete-confirmation.component';
import { Router, ActivatedRoute } from '@angular/router';
import { StringUtils, CollectionUtils, FormUtils, SecurityUtils, ButtonUtils, DependentUtils } from '../../../utility';
import { AbilityUtils } from '../../../utility/ability.utility';
import { Ability } from '@casl/ability';
export class ButtonComponent {
    constructor(dialog, router, route, ability) {
        this.dialog = dialog;
        this.router = router;
        this.route = route;
        this.ability = ability;
        this.onClick = new EventEmitter();
        this.onIconClick = new EventEmitter();
        this.routerLink = [];
        this.displayButton = true;
        this.isButtonDisabled = false;
        this.isDisplayOnlyIcon = false;
        this.hasIconDisplay = false;
        this.isFlatButton = false;
        this.isGhostButton = false;
        this.isRaisedButton = false;
        this.isStrokedButton = false;
        this.isFabButton = false;
        this.isChip = false;
        this.isLink = false;
        this.isGroupButton = false;
        this.isMenuButton = false;
        this.buttonWithoutPadding = false;
        this.state = true;
        AbilityUtils.setAbility(this.ability);
    }
    get button() {
        return this._button;
    }
    set button(_button) {
        this._button = _button;
        if (StringUtils.isEmpty(this.label) || !StringUtils.isEmpty(this._button.label)) {
            this.label = this._button.label;
        }
        if (StringUtils.isEmpty(this._button.width)) {
            this._button.width = '';
        }
        else {
            this._button.width = this._button.width + '%';
            document.documentElement.style.setProperty('--width', this._button.width + '%');
        }
        if (StringUtils.isEmpty(this._button.iconPosition)) {
            this._button.iconPosition = "LEFT" /* LEFT */;
        }
    }
    ngOnInit() {
        if (this.displayButton) {
            this.setLabel();
            this.setButtonEnable();
            if (this.form) {
                this.formSubscription = this.form.valueChanges.subscribe(obj => {
                    this.setButtonEnable();
                });
            }
            this.setButtonDisplay();
            this.setOnlyIconDisplay();
            this.setIconDisplay();
            this.setLink();
            this.setGroupButton();
            this.setFlatButton();
            this.setGhostButton();
            this.setRaisedButton();
            this.setStrokedButton();
            this.setFabButton();
            this.setChip();
            this.setButtonWithoutPadding();
            this.setMenuButton();
        }
    }
    setButtonDisplay() {
        if ((!CollectionUtils.isEmpty(this._button.displayInFormModes) && this._button.displayInFormModes.indexOf(this.formDisplayMode) <= -1) || !DependentUtils.displayDependencyField(this._button.dependentOnFields, null, this.context ? this.context : this.originalData)) {
            this.displayButton = false;
        }
    }
    setButtonWithoutPadding() {
        if (this._button.identifier == "fieldTextClearBtn" || this._button.identifier == "fieldRouteToBtn" || this._button.identifier == "listFieldAsLink" || this.identifier == "listFieldAsLink") {
            this.buttonWithoutPadding = true;
        }
    }
    setLabel() {
        if (StringUtils.isEmpty(this.label)) {
            this.label = this._button.label;
        }
    }
    click(event) {
        if (!CollectionUtils.isEmpty(this._button.confirmationConfiguration)) {
            this.openDialog(event);
        }
        else {
            this.invokeAction(null, event);
        }
    }
    openDialog(event) {
        const dialogRef = this.dialog.open(ButtonDeleteConfirmationComponent, {
            width: this._button.confirmationConfiguration.width ? this._button.confirmationConfiguration.width : '250px',
            data: {
                form: this.form,
                sourceIdentifier: this.sourceIdentifier,
                sourceIndex: this.sourceIndex,
                widgetArrayIndex: this.widgetArrayIndex,
                context: this.context,
                originalData: this.originalData,
                buttonRoute: this.buttonRoute,
                parentHierarchy: this.parentHierarchy,
                confirmationConfig: this._button.confirmationConfiguration,
            }
        });
        dialogRef.afterClosed().subscribe(result => {
            console.log('The dialog was closed');
            this.invokeAction(result, event);
        });
    }
    invokeAction(actionDialog, event) {
        if (this._button.identifier == "crudBackButton" && this.buttonRoute && this.buttonRoute.length > 0) {
            this.router.navigate(this.buttonRoute, { skipLocationChange: false, replaceUrl: true });
            return;
        }
        if (this._button.identifier == "reset" /* RESET */) {
            FormUtils.reset(this.form);
            this.context = {};
        }
        let action = ButtonUtils.getAction(this.sourceIdentifier, this.sourceIndex, this.widgetArrayIndex, this._button.identifier, this.parentHierarchy, event, this.originalData, this.context, actionDialog);
        if (this._button.identifier == "search" /* SEARCH */ || this._button.identifier == "reset" /* RESET */) {
            this.addSearchParamsInUrl(action.data);
        }
        else {
            this.onClick.emit(action);
        }
    }
    iconClick(event) {
        let action = ButtonUtils.getAction(this.sourceIdentifier, this.sourceIndex, this.widgetArrayIndex, this._button.identifier, this.parentHierarchy, event, this.originalData, this.context, null);
        if (this._button['groupIdentifier'] == "clearFilterField" /* CLEAR_FILTER_FIELD */) {
            delete action.data[action.action];
            this.addSearchParamsInUrl(action.data);
        }
        else {
            this.onIconClick.emit(action);
        }
    }
    addSearchParamsInUrl(filterData) {
        const queryParams = { filter: SecurityUtils.encrypt(filterData) };
        this.router.navigate([], {
            relativeTo: this.route,
            queryParams: queryParams,
            queryParamsHandling: 'merge',
            skipLocationChange: false,
            replaceUrl: true
        });
    }
    setButtonEnable() {
        let isButtonDisabled = false;
        if (this.form) {
            isButtonDisabled = !this.form.valid;
        }
        if (this.form && this.form.disabled) {
            isButtonDisabled = false;
        }
        if (this._button.identifier == "search" /* SEARCH */ || this._button.identifier == "cancel" /* CANCEL */ || this._button.identifier == "reset" /* RESET */ || this._button.identifier == "add_field" /* ADD_FIELD */ || this._button.identifier == "remove_field" /* REMOVE_FIELD */ || this._button.alwaysEnable == true) {
            isButtonDisabled = false;
        }
        if (this.disabled) {
            isButtonDisabled = this.disabled;
        }
        this.isButtonDisabled = isButtonDisabled;
    }
    setOnlyIconDisplay() {
        this.isDisplayOnlyIcon = this._button && this._button.onlyIcon && !StringUtils.isEmpty(this._button.icon) ? true : false;
    }
    setIconDisplay() {
        this.hasIconDisplay = this._button && this._button.icon ? true : false;
    }
    setFlatButton() {
        this.isFlatButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "FLAT" /* FLAT */ && !this.isGroupButton && !this.isLink : false;
    }
    setGhostButton() {
        this.isGhostButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "GHOST" /* GHOST */ && !this.isGroupButton && !this.isLink : false;
    }
    setRaisedButton() {
        this.isRaisedButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "RAISED" /* RAISED */ && !this.isGroupButton && !this.isLink : false;
    }
    setStrokedButton() {
        this.isStrokedButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "STROKED" /* STROKED */ && !this.isGroupButton && !this.isLink : false;
    }
    setFabButton() {
        this.isFabButton = this._button && ButtonUtils.instanceOfButton(this._button) ? this._button.type == "FAB" /* FAB */ && !this.isGroupButton && !this.isLink : false;
    }
    setChip() {
        this.isChip = this._button && ButtonUtils.instanceOfChipButton(this._button) && !StringUtils.isEmpty(this._button.groupIdentifier) ? true : false;
    }
    setLink() {
        this.isLink = this._button && !StringUtils.isEmpty(this.label) ? !CollectionUtils.isEmpty(this._button.routerLink) : false;
        this.routerLink = this._button.routerLink;
    }
    setGroupButton() {
        this.isGroupButton = this._button && ButtonUtils.instanceOfButtonGroup(this._button) && !StringUtils.isEmpty(this._button.groupIdentifier) ? true : false;
    }
    setMenuButton() {
        this.isMenuButton = this._button && ButtonUtils.instanceOfHoverButton(this._button) ? true : false;
    }
    ngOnDestroy() {
        if (this.formSubscription) {
            this.formSubscription.unsubscribe();
        }
    }
}
ButtonComponent.decorators = [
    { type: Component, args: [{
                selector: 'cf-button',
                template: "<!-- <pre>{{ _button.size == 'small' }}</pre> -->\n<span \n    [style.width]=\"_button.width\"\n    class=\"cf-button-wrapper\" \n    *ngIf=\"_button && displayButton && (_button.permission == null || (_button.permission && (_button.permission['subject'] | can: _button.permission['action'])))\">\n    <button \n        mat-menu-item  \n        *ngIf=\"isMenuButton\"\n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default'}\" \n        class=\"cf-menu-button cf-menu-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': 'calc(' + _button.width + ' - 8px)'}\"\n        [attr.color]=\"_button.color\"  \n        (click)=\"click($event)\" \n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n\n    <button \n        mat-flat-button\n        *ngIf=\"isFlatButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default'}\" \n        class=\"cf-flat-button cf-flat-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\"  \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button> \n\n    <button \n        mat-button \n        *ngIf=\"isGhostButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default', 'cf-button-wt-padding': buttonWithoutPadding == true}\" \n        class=\"cf-ghost-button cf-ghost-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>    \n    </button>\n    \n    <button \n        mat-raised-button \n        *ngIf=\"isRaisedButton\"\n        [color]=\"_button.color\" \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default'}\" \n        class=\"cf-raised-button cf-raised-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        [disabled]=\"isButtonDisabled\" \n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n\n    <button \n        mat-stroked-button \n        *ngIf=\"isStrokedButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default'}\" \n        class=\"cf-stroked-button cf-stroked-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n\n    <button \n        mat-fab \n        *ngIf=\"isFabButton\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\"  \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default'}\" \n        class=\"cf-fab-button cf-fab-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </button>\n \n    <mat-chip \n        [selected]=\"state\" \n        *ngIf=\"isChip\" \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default'}\" \n        class=\"cf-chip-button cf-chip-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\" \n        (click)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </mat-chip>\n    <!-- {{_button | json}} -->\n    <a \n        mat-button \n        *ngIf=\"isLink\"\n        [color]=\"_button.color\" \n        [disabled]=\"isButtonDisabled\"  \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-default-btn': _button.size == 'default', 'cf-button-wt-padding': buttonWithoutPadding == true}\" \n        class=\"cf-link cf-link-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        [routerLink]=\"routerLink\" \n        [matTooltip]=\"_button.label\"\n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\" \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </a>\n\n    <!-- appearance=\"legacy\"  -->\n    <mat-button-toggle \n        *ngIf=\"isGroupButton\" \n        [value]=\"_button.identifier\" \n        [disabled]=\"isButtonDisabled\" \n        [attr.aria-label]=\"label\" \n        [ngClass]=\"{'cf-small-btn': _button.size == 'small', 'cf-tiny-btn': _button.size == 'tiny', 'cf-micro-btn': _button.size == 'micro', 'cf-toggle-default-btn': _button.size == 'default'}\" \n        class=\"cf-toggle-button cf-button-{{_button.identifier}}\"\n        [ngStyle]=\"{'width': _button.width == '' || _button.width == '100%' ? _button.width : 'calc(' + _button.width + ' - 8px)'}\"\n        (change)=\"click($event)\" \n        [matBadge]=\"_button.badge ? _button.badge.content : ''\" \n        [matBadgeColor]=\"_button.badge ? _button.badge.color : ''\" \n        [matBadgePosition]=\"_button.badge ? _button.badge.position : ''\"  \n        [matBadgeSize]=\"_button.badge ? _button.badge.size : ''\" \n        [matBadgeHidden]=\"_button.badge ? _button.badge.hide : false\"\n    >\n        <ng-container *ngTemplateOutlet=\"cfButtonIcon\"></ng-container>\n    </mat-button-toggle>\n</span>\n\n<ng-template #cfButtonIcon>\n    <mat-icon \n        (click)=\"iconClick($event)\" \n        aria-hidden=\"true\" \n        [attr.aria-label]=\"label\" \n        [ngClass]=\"{'cf-small-icon': _button.size == 'small', 'cf-tiny-icon': _button.size == 'tiny', 'cf-micro-icon': _button.size == 'micro'}\"  \n        class=\"cf-button-icon cf-button-icon-{{_button.identifier}}\"\n        [style.padding-right.px]=\"!isDisplayOnlyIcon ? 5 : 0\"\n        *ngIf=\"hasIconDisplay && (_button.iconPosition == 'LEFT' || _button.iconPosition == 'TOP')\">\n            {{_button.icon}}\n    </mat-icon>\n    <br *ngIf=\"hasIconDisplay && _button.iconPosition == 'TOP' && !isDisplayOnlyIcon\"/>\n    <span class=\"cf-button-label cf-button-label-{{_button.identifier}}\" *ngIf=\"!isDisplayOnlyIcon\">{{ label }}</span>\n    <br *ngIf=\"hasIconDisplay && _button.iconPosition == 'BOTTOM' && !isDisplayOnlyIcon\"/>\n    <mat-icon \n        (click)=\"iconClick($event)\" \n        aria-hidden=\"true\" \n        [attr.aria-label]=\"label\" \n        [ngClass]=\"{'cf-small-icon': _button.size == 'small', 'cf-tiny-icon': _button.size == 'tiny', 'cf-micro-icon': _button.size == 'micro'}\"  \n        class=\"cf-button-icon cf-button-icon-{{_button.identifier}}\"\n        [style.padding-left.px]=\"!isDisplayOnlyIcon ? 5 : 0\"\n        *ngIf=\"hasIconDisplay && (_button.iconPosition == 'RIGHT' || _button.iconPosition == 'BOTTOM')\">\n            {{_button.icon}}\n    </mat-icon>\n</ng-template>",
                styles: [".cf-small-btn{box-sizing:border-box;line-height:30px;min-width:unset}.cf-small-icon{font-size:12px;height:12px;width:12px}.cf-small-btn ::ng-deep .cf-button-label,.cf-small-btn ::ng-deep .mat-button-toggle-label-content{line-height:30px}.cf-small-btn.mat-standard-chip{min-height:30px}.cf-tiny-btn{box-sizing:border-box;font-size:10px;line-height:24px;min-width:unset}.cf-tiny-icon{font-size:10px;height:10px;width:10px}.cf-tiny-btn ::ng-deep .cf-button-label,.cf-tiny-btn ::ng-deep .mat-button-toggle-label-content{line-height:24px}.cf-tiny-btn.mat-standard-chip{min-height:26px}.cf-micro-btn{box-sizing:border-box;font-size:8px;line-height:18px;min-width:unset}.cf-micro-icon{font-size:8px;height:8px;width:8px}.cf-micro-btn ::ng-deep .cf-button-label,.cf-micro-btn ::ng-deep .mat-button-toggle-label-content{line-height:18px}.cf-micro-btn.mat-standard-chip{min-height:20px}.cf-toggle-default-btn ::ng-deep .cf-button-label,.cf-toggle-default-btn ::ng-deep .mat-button-toggle-label-content{line-height:36px}.cf-chip-button{justify-content:center}.cf-chip-button .mat-standard-chip{margin:unset}.cf-button-wt-padding,.cf-button-wt-padding .mat-button{min-width:0!important;padding:0!important}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{padding:0 5px!important}"]
            },] }
];
ButtonComponent.ctorParameters = () => [
    { type: MatDialog },
    { type: Router },
    { type: ActivatedRoute },
    { type: Ability }
];
ButtonComponent.propDecorators = {
    form: [{ type: Input }],
    formDisplayMode: [{ type: Input }],
    sourceIdentifier: [{ type: Input }],
    sourceIndex: [{ type: Input }],
    widgetArrayIndex: [{ type: Input }],
    identifier: [{ type: Input }],
    context: [{ type: Input }],
    originalData: [{ type: Input }],
    label: [{ type: Input }],
    buttonRoute: [{ type: Input }],
    parentHierarchy: [{ type: Input }],
    disabled: [{ type: Input }],
    onClick: [{ type: Output }],
    onIconClick: [{ type: Output }],
    _button: [{ type: Input }],
    button: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbml0aW5raGFpdGFuL05pdGluL3N0dWR5L2FuZ3VsYXIvbWF0ZXJpYWwvYWRtaW4tYnVpbGRlci1wbHVnaW4vcHJvamVjdHMvbmd4LW1hdGVyaWFsLXdpZGdldC9zcmMvIiwic291cmNlcyI6WyJsaWIvYnV0dG9uL2NvbXBvbmVudC9idXR0b24vYnV0dG9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBRzFGLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSxvRUFBb0UsQ0FBQztBQUV2SCxPQUFPLEVBQVUsTUFBTSxFQUFFLGNBQWMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRWpFLE9BQU8sRUFBRSxXQUFXLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZILE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNoRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBT3hDLE1BQU0sT0FBTyxlQUFlO0lBMEQxQixZQUNTLE1BQWlCLEVBQ2hCLE1BQWMsRUFDZCxLQUFxQixFQUNyQixPQUFnQjtRQUhqQixXQUFNLEdBQU4sTUFBTSxDQUFXO1FBQ2hCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxVQUFLLEdBQUwsS0FBSyxDQUFnQjtRQUNyQixZQUFPLEdBQVAsT0FBTyxDQUFTO1FBaERoQixZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUM3QixnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUF1QjNDLGVBQVUsR0FB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LENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNyRyxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNyQztJQUNILENBQUM7OztZQXJSRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLFdBQVc7Z0JBQ3JCLG12VkFBc0M7O2FBRXZDOzs7WUFiUSxTQUFTO1lBR0QsTUFBTTtZQUFFLGNBQWM7WUFJOUIsT0FBTzs7O21CQVFiLEtBQUs7OEJBQ0wsS0FBSzsrQkFFTCxLQUFLOzBCQUNMLEtBQUs7K0JBQ0wsS0FBSzt5QkFDTCxLQUFLO3NCQUNMLEtBQUs7MkJBQ0wsS0FBSztvQkFDTCxLQUFLOzBCQUNMLEtBQUs7OEJBQ0wsS0FBSzt1QkFDTCxLQUFLO3NCQUNMLE1BQU07MEJBQ04sTUFBTTtzQkFFTixLQUFLO3FCQUlMLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJ1dHRvbiwgT2JqZWN0VHJlZSwgUmVzZXJ2ZWRCdXR0b24sIEFjdGlvbiwgQnV0dG9uVHlwZSwgSG92ZXJCdXR0b24sIEJ1dHRvbkdyb3VwLCBCdXR0b25Db2xvciwgQnV0dG9uU2l6ZSwgSWNvblBvc2l0aW9uIH0gZnJvbSAnLi4vLi4vbW9kZWwnO1xuaW1wb3J0IHsgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcbmltcG9ydCB7IEJ1dHRvbkRlbGV0ZUNvbmZpcm1hdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2J1dHRvbi1kZWxldGUtY29uZmlybWF0aW9uL2J1dHRvbi1kZWxldGUtY29uZmlybWF0aW9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFBhcmFtcywgUm91dGVyLCBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBGb3JtRGlhcGx5TW9kZSB9IGZyb20gJy4uLy4uLy4uL2Zvcm0vbW9kZWwnO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMsIENvbGxlY3Rpb25VdGlscywgRm9ybVV0aWxzLCBTZWN1cml0eVV0aWxzLCBCdXR0b25VdGlscywgRGVwZW5kZW50VXRpbHMgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5JztcbmltcG9ydCB7IEFiaWxpdHlVdGlscyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHkvYWJpbGl0eS51dGlsaXR5JztcbmltcG9ydCB7IEFiaWxpdHkgfSBmcm9tICdAY2FzbC9hYmlsaXR5JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY2YtYnV0dG9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2J1dHRvbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2J1dHRvbi5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEJ1dHRvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgQElucHV0KCkgZm9ybTogRm9ybUdyb3VwO1xuICBASW5wdXQoKSBmb3JtRGlzcGxheU1vZGU6IEZvcm1EaWFwbHlNb2RlO1xuXG4gIEBJbnB1dCgpIHNvdXJjZUlkZW50aWZpZXI6IHN0cmluZztcbiAgQElucHV0KCkgc291cmNlSW5kZXg6IG51bWJlcjtcbiAgQElucHV0KCkgd2lkZ2V0QXJyYXlJbmRleDogbnVtYmVyO1xuICBASW5wdXQoKSBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbnRleHQ6IGFueTtcbiAgQElucHV0KCkgb3JpZ2luYWxEYXRhOiBhbnk7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGJ1dHRvblJvdXRlOiBBcnJheTxzdHJpbmc+O1xuICBASW5wdXQoKSBwYXJlbnRIaWVyYXJjaHk6IE9iamVjdFRyZWU7XG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xuICBAT3V0cHV0KCkgb25DbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uSWNvbkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBJbnB1dCgpIF9idXR0b246IEJ1dHRvbiB8IEJ1dHRvbkdyb3VwIHwgSG92ZXJCdXR0b247XG4gIGdldCBidXR0b24oKTogQnV0dG9uIHwgQnV0dG9uR3JvdXAgfCBIb3ZlckJ1dHRvbiB7XG4gICAgcmV0dXJuIHRoaXMuX2J1dHRvbjtcbiAgfVxuICBASW5wdXQoKVxuICBzZXQgYnV0dG9uKF9idXR0b246IEJ1dHRvbiB8IEJ1dHRvbkdyb3VwIHwgSG92ZXJCdXR0b24pIHtcbiAgICB0aGlzLl9idXR0b24gPSBfYnV0dG9uO1xuICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMubGFiZWwpIHx8ICFTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMuX2J1dHRvbi5sYWJlbCkpIHtcbiAgICAgIHRoaXMubGFiZWwgPSB0aGlzLl9idXR0b24ubGFiZWw7XG4gICAgfVxuICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMuX2J1dHRvbi53aWR0aCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbi53aWR0aCA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b24ud2lkdGggPSB0aGlzLl9idXR0b24ud2lkdGggKyAnJSc7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0td2lkdGgnLCB0aGlzLl9idXR0b24ud2lkdGggKyAnJScpO1xuICAgIH1cbiAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eSh0aGlzLl9idXR0b24uaWNvblBvc2l0aW9uKSkge1xuICAgICAgdGhpcy5fYnV0dG9uLmljb25Qb3NpdGlvbiA9IEljb25Qb3NpdGlvbi5MRUZUO1xuICAgIH1cbiAgfVxuXG4gIHJvdXRlckxpbmsgPSBbXTtcblxuICBkaXNwbGF5QnV0dG9uOiBib29sZWFuID0gdHJ1ZTtcbiAgaXNCdXR0b25EaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBpc0Rpc3BsYXlPbmx5SWNvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBoYXNJY29uRGlzcGxheTogYm9vbGVhbiA9IGZhbHNlO1xuICBpc0ZsYXRCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcbiAgaXNHaG9zdEJ1dHRvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBpc1JhaXNlZEJ1dHRvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBpc1N0cm9rZWRCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcbiAgaXNGYWJCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcbiAgaXNDaGlwOiBib29sZWFuID0gZmFsc2U7XG4gIGlzTGluazogYm9vbGVhbiA9IGZhbHNlO1xuICBpc0dyb3VwQnV0dG9uOiBib29sZWFuID0gZmFsc2U7XG4gIGlzTWVudUJ1dHRvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBidXR0b25XaXRob3V0UGFkZGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG5cbiAgZm9ybVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkaWFsb2c6IE1hdERpYWxvZyxcbiAgICBwcml2YXRlIHJvdXRlcjogUm91dGVyLFxuICAgIHByaXZhdGUgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgYWJpbGl0eTogQWJpbGl0eVxuICApIHtcbiAgICBBYmlsaXR5VXRpbHMuc2V0QWJpbGl0eSh0aGlzLmFiaWxpdHkpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuZGlzcGxheUJ1dHRvbikge1xuICAgICAgdGhpcy5zZXRMYWJlbCgpO1xuXG4gICAgICB0aGlzLnNldEJ1dHRvbkVuYWJsZSgpO1xuICAgICAgaWYgKHRoaXMuZm9ybSkge1xuICAgICAgICB0aGlzLmZvcm1TdWJzY3JpcHRpb24gPSB0aGlzLmZvcm0udmFsdWVDaGFuZ2VzLnN1YnNjcmliZShvYmogPT4ge1xuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uRW5hYmxlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldEJ1dHRvbkRpc3BsYXkoKTtcbiAgICAgIHRoaXMuc2V0T25seUljb25EaXNwbGF5KCk7XG4gICAgICB0aGlzLnNldEljb25EaXNwbGF5KCk7XG4gICAgICB0aGlzLnNldExpbmsoKTtcbiAgICAgIHRoaXMuc2V0R3JvdXBCdXR0b24oKTtcbiAgICAgIHRoaXMuc2V0RmxhdEJ1dHRvbigpO1xuICAgICAgdGhpcy5zZXRHaG9zdEJ1dHRvbigpO1xuICAgICAgdGhpcy5zZXRSYWlzZWRCdXR0b24oKTtcbiAgICAgIHRoaXMuc2V0U3Ryb2tlZEJ1dHRvbigpO1xuICAgICAgdGhpcy5zZXRGYWJCdXR0b24oKTtcbiAgICAgIHRoaXMuc2V0Q2hpcCgpO1xuICAgICAgdGhpcy5zZXRCdXR0b25XaXRob3V0UGFkZGluZygpO1xuICAgICAgdGhpcy5zZXRNZW51QnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0QnV0dG9uRGlzcGxheSgpIHtcbiAgICBpZiAoKCFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eSh0aGlzLl9idXR0b24uZGlzcGxheUluRm9ybU1vZGVzKSAmJiB0aGlzLl9idXR0b24uZGlzcGxheUluRm9ybU1vZGVzLmluZGV4T2YodGhpcy5mb3JtRGlzcGxheU1vZGUpIDw9IC0xKSB8fCAhRGVwZW5kZW50VXRpbHMuZGlzcGxheURlcGVuZGVuY3lGaWVsZCh0aGlzLl9idXR0b24uZGVwZW5kZW50T25GaWVsZHMsIG51bGwsIHRoaXMuY29udGV4dCA/IHRoaXMuY29udGV4dCA6IHRoaXMub3JpZ2luYWxEYXRhKSkge1xuICAgICAgdGhpcy5kaXNwbGF5QnV0dG9uID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc2V0QnV0dG9uV2l0aG91dFBhZGRpbmcoKSB7XG4gICAgaWYgKHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFwiZmllbGRUZXh0Q2xlYXJCdG5cIiB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBcImZpZWxkUm91dGVUb0J0blwiIHx8IHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFwibGlzdEZpZWxkQXNMaW5rXCIgfHwgdGhpcy5pZGVudGlmaWVyID09IFwibGlzdEZpZWxkQXNMaW5rXCIpIHtcbiAgICAgIHRoaXMuYnV0dG9uV2l0aG91dFBhZGRpbmcgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBzZXRMYWJlbCgpOiB2b2lkIHtcbiAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eSh0aGlzLmxhYmVsKSkge1xuICAgICAgdGhpcy5sYWJlbCA9IHRoaXMuX2J1dHRvbi5sYWJlbDtcbiAgICB9XG4gIH1cblxuICBzdGF0ZTogYm9vbGVhbiA9IHRydWU7XG4gIGNsaWNrKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAoIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KHRoaXMuX2J1dHRvbi5jb25maXJtYXRpb25Db25maWd1cmF0aW9uKSkge1xuICAgICAgdGhpcy5vcGVuRGlhbG9nKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbnZva2VBY3Rpb24obnVsbCwgZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5EaWFsb2coZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oQnV0dG9uRGVsZXRlQ29uZmlybWF0aW9uQ29tcG9uZW50LCB7XG4gICAgICB3aWR0aDogdGhpcy5fYnV0dG9uLmNvbmZpcm1hdGlvbkNvbmZpZ3VyYXRpb24ud2lkdGggPyB0aGlzLl9idXR0b24uY29uZmlybWF0aW9uQ29uZmlndXJhdGlvbi53aWR0aCA6ICcyNTBweCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZvcm06IHRoaXMuZm9ybSxcbiAgICAgICAgc291cmNlSWRlbnRpZmllcjogdGhpcy5zb3VyY2VJZGVudGlmaWVyLFxuICAgICAgICBzb3VyY2VJbmRleDogdGhpcy5zb3VyY2VJbmRleCxcbiAgICAgICAgd2lkZ2V0QXJyYXlJbmRleDogdGhpcy53aWRnZXRBcnJheUluZGV4LFxuICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgIG9yaWdpbmFsRGF0YTogdGhpcy5vcmlnaW5hbERhdGEsXG4gICAgICAgIGJ1dHRvblJvdXRlOiB0aGlzLmJ1dHRvblJvdXRlLFxuICAgICAgICBwYXJlbnRIaWVyYXJjaHk6IHRoaXMucGFyZW50SGllcmFyY2h5LFxuICAgICAgICBjb25maXJtYXRpb25Db25maWc6IHRoaXMuX2J1dHRvbi5jb25maXJtYXRpb25Db25maWd1cmF0aW9uLFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGlhbG9nUmVmLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVGhlIGRpYWxvZyB3YXMgY2xvc2VkJyk7XG4gICAgICB0aGlzLmludm9rZUFjdGlvbihyZXN1bHQsIGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGludm9rZUFjdGlvbihhY3Rpb25EaWFsb2c6IGFueSwgZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBcImNydWRCYWNrQnV0dG9uXCIgJiYgdGhpcy5idXR0b25Sb3V0ZSAmJiB0aGlzLmJ1dHRvblJvdXRlLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKHRoaXMuYnV0dG9uUm91dGUsIHsgc2tpcExvY2F0aW9uQ2hhbmdlOiBmYWxzZSwgcmVwbGFjZVVybDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYnV0dG9uLmlkZW50aWZpZXIgPT0gUmVzZXJ2ZWRCdXR0b24uUkVTRVQpIHtcbiAgICAgIEZvcm1VdGlscy5yZXNldCh0aGlzLmZvcm0pO1xuICAgICAgdGhpcy5jb250ZXh0ID0ge307XG4gICAgfVxuXG4gICAgbGV0IGFjdGlvbjogQWN0aW9uID0gQnV0dG9uVXRpbHMuZ2V0QWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlSWRlbnRpZmllciwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VJbmRleCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aWRnZXRBcnJheUluZGV4LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9idXR0b24uaWRlbnRpZmllciwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRIaWVyYXJjaHksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9yaWdpbmFsRGF0YSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25EaWFsb2cpO1xuXG4gICAgaWYgKHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFJlc2VydmVkQnV0dG9uLlNFQVJDSCB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBSZXNlcnZlZEJ1dHRvbi5SRVNFVCkge1xuICAgICAgdGhpcy5hZGRTZWFyY2hQYXJhbXNJblVybChhY3Rpb24uZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25DbGljay5lbWl0KGFjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgaWNvbkNsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICBsZXQgYWN0aW9uOiBBY3Rpb24gPSBCdXR0b25VdGlscy5nZXRBY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VJZGVudGlmaWVyLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZUluZGV4LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZGdldEFycmF5SW5kZXgsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEhpZXJhcmNoeSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JpZ2luYWxEYXRhLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwpO1xuXG4gICAgaWYgKHRoaXMuX2J1dHRvblsnZ3JvdXBJZGVudGlmaWVyJ10gPT0gUmVzZXJ2ZWRCdXR0b24uQ0xFQVJfRklMVEVSX0ZJRUxEKSB7XG4gICAgICBkZWxldGUgYWN0aW9uLmRhdGFbYWN0aW9uLmFjdGlvbl07XG4gICAgICB0aGlzLmFkZFNlYXJjaFBhcmFtc0luVXJsKGFjdGlvbi5kYXRhKTtcbiAgICB9IGVsc2UgIHtcbiAgICAgIHRoaXMub25JY29uQ2xpY2suZW1pdChhY3Rpb24pO1xuICAgIH1cbiAgfVxuICBcbiAgcHVibGljIGFkZFNlYXJjaFBhcmFtc0luVXJsKGZpbHRlckRhdGE6IGFueSkge1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zOiBQYXJhbXMgPSB7IGZpbHRlcjogU2VjdXJpdHlVdGlscy5lbmNyeXB0KGZpbHRlckRhdGEpIH07XG5cbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShcbiAgICAgIFtdLFxuICAgICAge1xuICAgICAgICByZWxhdGl2ZVRvOiB0aGlzLnJvdXRlLFxuICAgICAgICBxdWVyeVBhcmFtczogcXVlcnlQYXJhbXMsXG4gICAgICAgIHF1ZXJ5UGFyYW1zSGFuZGxpbmc6ICdtZXJnZScsIC8vIHJlbW92ZSB0byByZXBsYWNlIGFsbCBxdWVyeSBwYXJhbXMgYnkgcHJvdmlkZWRcbiAgICAgICAgc2tpcExvY2F0aW9uQ2hhbmdlOiBmYWxzZSxcbiAgICAgICAgcmVwbGFjZVVybDogdHJ1ZVxuICAgICAgfSk7XG4gIH1cblxuICBzZXRCdXR0b25FbmFibGUoKTogdm9pZCB7XG4gICAgbGV0IGlzQnV0dG9uRGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgIGlzQnV0dG9uRGlzYWJsZWQgPSAhdGhpcy5mb3JtLnZhbGlkO1xuICAgIH1cbiAgICBpZiAodGhpcy5mb3JtICYmIHRoaXMuZm9ybS5kaXNhYmxlZCkge1xuICAgICAgaXNCdXR0b25EaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYnV0dG9uLmlkZW50aWZpZXIgPT0gUmVzZXJ2ZWRCdXR0b24uU0VBUkNIIHx8IHRoaXMuX2J1dHRvbi5pZGVudGlmaWVyID09IFJlc2VydmVkQnV0dG9uLkNBTkNFTCB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBSZXNlcnZlZEJ1dHRvbi5SRVNFVCB8fCB0aGlzLl9idXR0b24uaWRlbnRpZmllciA9PSBSZXNlcnZlZEJ1dHRvbi5BRERfRklFTEQgfHwgdGhpcy5fYnV0dG9uLmlkZW50aWZpZXIgPT0gUmVzZXJ2ZWRCdXR0b24uUkVNT1ZFX0ZJRUxEIHx8IHRoaXMuX2J1dHRvbi5hbHdheXNFbmFibGUgPT0gdHJ1ZSkge1xuICAgICAgaXNCdXR0b25EaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgaXNCdXR0b25EaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQ7XG4gICAgfVxuICAgIHRoaXMuaXNCdXR0b25EaXNhYmxlZCA9IGlzQnV0dG9uRGlzYWJsZWQ7XG4gIH1cblxuICBzZXRPbmx5SWNvbkRpc3BsYXkoKTogdm9pZCB7XG4gICAgdGhpcy5pc0Rpc3BsYXlPbmx5SWNvbiA9IHRoaXMuX2J1dHRvbiAmJiB0aGlzLl9idXR0b24ub25seUljb24gJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkodGhpcy5fYnV0dG9uLmljb24pID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgc2V0SWNvbkRpc3BsYXkoKTogdm9pZCB7XG4gICAgdGhpcy5oYXNJY29uRGlzcGxheSA9IHRoaXMuX2J1dHRvbiAmJiB0aGlzLl9idXR0b24uaWNvbiA/IHRydWUgOiBmYWxzZTtcbiAgfVxuXG4gIHNldEZsYXRCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc0ZsYXRCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbih0aGlzLl9idXR0b24pID8gKDxCdXR0b24+dGhpcy5fYnV0dG9uKS50eXBlID09IEJ1dHRvblR5cGUuRkxBVCAmJiAhdGhpcy5pc0dyb3VwQnV0dG9uICYmICF0aGlzLmlzTGluayA6IGZhbHNlO1xuICB9XG5cbiAgc2V0R2hvc3RCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc0dob3N0QnV0dG9uID0gdGhpcy5fYnV0dG9uICYmIEJ1dHRvblV0aWxzLmluc3RhbmNlT2ZCdXR0b24odGhpcy5fYnV0dG9uKSA/ICg8QnV0dG9uPnRoaXMuX2J1dHRvbikudHlwZSA9PSBCdXR0b25UeXBlLkdIT1NUICYmICF0aGlzLmlzR3JvdXBCdXR0b24gJiYgIXRoaXMuaXNMaW5rIDogZmFsc2U7XG4gIH1cblxuICBzZXRSYWlzZWRCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc1JhaXNlZEJ1dHRvbiA9IHRoaXMuX2J1dHRvbiAmJiBCdXR0b25VdGlscy5pbnN0YW5jZU9mQnV0dG9uKHRoaXMuX2J1dHRvbikgPyAoPEJ1dHRvbj50aGlzLl9idXR0b24pLnR5cGUgPT0gQnV0dG9uVHlwZS5SQUlTRUQgJiYgIXRoaXMuaXNHcm91cEJ1dHRvbiAmJiAhdGhpcy5pc0xpbmsgOiBmYWxzZTtcbiAgfVxuXG4gIHNldFN0cm9rZWRCdXR0b24oKTogdm9pZCB7XG4gICAgdGhpcy5pc1N0cm9rZWRCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbih0aGlzLl9idXR0b24pID8gKDxCdXR0b24+dGhpcy5fYnV0dG9uKS50eXBlID09IEJ1dHRvblR5cGUuU1RST0tFRCAmJiAhdGhpcy5pc0dyb3VwQnV0dG9uICYmICF0aGlzLmlzTGluayA6IGZhbHNlO1xuICB9XG5cbiAgc2V0RmFiQnV0dG9uKCk6IHZvaWQge1xuICAgIHRoaXMuaXNGYWJCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbih0aGlzLl9idXR0b24pID8gKDxCdXR0b24+dGhpcy5fYnV0dG9uKS50eXBlID09IEJ1dHRvblR5cGUuRkFCICYmICF0aGlzLmlzR3JvdXBCdXR0b24gJiYgIXRoaXMuaXNMaW5rIDogZmFsc2U7XG4gIH1cblxuICBzZXRDaGlwKCk6IHZvaWQge1xuICAgIHRoaXMuaXNDaGlwID0gdGhpcy5fYnV0dG9uICYmIEJ1dHRvblV0aWxzLmluc3RhbmNlT2ZDaGlwQnV0dG9uKHRoaXMuX2J1dHRvbikgJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkoKDxCdXR0b25Hcm91cD50aGlzLl9idXR0b24pLmdyb3VwSWRlbnRpZmllcikgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICBzZXRMaW5rKCk6IHZvaWQge1xuICAgIHRoaXMuaXNMaW5rID0gdGhpcy5fYnV0dG9uICYmICFTdHJpbmdVdGlscy5pc0VtcHR5KHRoaXMubGFiZWwpID8gIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KCg8QnV0dG9uPnRoaXMuX2J1dHRvbikucm91dGVyTGluaykgOiBmYWxzZTtcbiAgICB0aGlzLnJvdXRlckxpbmsgPSAoPEJ1dHRvbj50aGlzLl9idXR0b24pLnJvdXRlckxpbms7XG4gIH1cblxuICBzZXRHcm91cEJ1dHRvbigpOiB2b2lkIHtcbiAgICB0aGlzLmlzR3JvdXBCdXR0b24gPSB0aGlzLl9idXR0b24gJiYgQnV0dG9uVXRpbHMuaW5zdGFuY2VPZkJ1dHRvbkdyb3VwKHRoaXMuX2J1dHRvbikgJiYgIVN0cmluZ1V0aWxzLmlzRW1wdHkoKDxCdXR0b25Hcm91cD50aGlzLl9idXR0b24pLmdyb3VwSWRlbnRpZmllcikgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICBzZXRNZW51QnV0dG9uKCk6IHZvaWQge1xuICAgIHRoaXMuaXNNZW51QnV0dG9uID0gdGhpcy5fYnV0dG9uICYmIEJ1dHRvblV0aWxzLmluc3RhbmNlT2ZIb3ZlckJ1dHRvbih0aGlzLl9idXR0b24pID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuZm9ybVN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5mb3JtU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG59XG4iXX0=