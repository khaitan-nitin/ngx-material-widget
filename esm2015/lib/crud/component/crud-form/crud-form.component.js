import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CollectionUtils, DependentUtils } from '../../../utility';
import { Ability } from '@casl/ability';
import { AbilityUtils } from '../../../utility/ability.utility';
export class CrudFormComponent {
    constructor(ability) {
        this.ability = ability;
        this.onFormChange = new EventEmitter();
        this.onFieldChange = new EventEmitter();
        this.onButtonClick = new EventEmitter();
        this.onSortClick = new EventEmitter();
        this.onPageClick = new EventEmitter();
        this.formsConfigToDisplay = new Array();
        this.rowsInTab = new Array();
        this.formTabLength = 0;
        this.filteredTabs = new Array();
        AbilityUtils.setAbility(this.ability);
    }
    ngOnInit() {
        //    this.filterForms();
        this.drawTabs();
        this.setConfigAsPerTab();
        this.setFormTitle();
        this.addWidget = this.addWidgetButton("addWidget", "Add", "add", "primary" /* PRIMARY */);
    }
    setFormTitle() {
        if (this.form && !CollectionUtils.isEmpty(this.form.tabs)) {
            this.form.tabs.forEach(tab => {
                if (!CollectionUtils.isEmpty(tab.widgets)) {
                    tab.widgets.forEach(widget => {
                        if (widget.widget && widget.widget.displayMode) {
                            let displayMode = widget.widget.displayMode;
                            if (this.displayMode) {
                                displayMode = this.displayMode;
                            }
                            this.setFormHeader(this.header, displayMode);
                        }
                    });
                }
            });
        }
    }
    setFormHeader(header, displayMode) {
        let title = header.title;
        switch (displayMode) {
            case "SEARCH" /* SEARCH */: {
                title = header.searchModeTitle ? header.searchModeTitle : title;
                break;
            }
            case "ADD" /* ADD */: {
                title = header.addModeTitle ? header.addModeTitle : title;
                break;
            }
            case "EDIT" /* EDIT */: {
                title = header.editModeTitle ? header.editModeTitle : title;
                break;
            }
            case "VIEW" /* VIEW */: {
                title = header.viewModeTitle ? header.viewModeTitle : title;
                break;
            }
            default: {
                title = header.title;
            }
        }
        this.title = title;
    }
    setConfigAsPerTab(tabIdentifier) {
        if (this.configData) {
            this.badges = this.configData.badges;
            this.pageBackRoute = this.configData.pageBackRoute;
            this.record = this.configData.record;
            if (this.configData.configPerTabs) {
                let tabIndex = 0;
                this.configData.configPerTabs.forEach((tabConfigData, tabKey) => {
                    if ((tabKey == tabIdentifier || (tabIndex == 0 && tabIdentifier == null)) && tabConfigData) {
                        if (tabConfigData.badges) {
                            this.badges = tabConfigData.badges;
                        }
                        if (tabConfigData.pageBackRoute) {
                            this.pageBackRoute = tabConfigData.pageBackRoute;
                        }
                        if (tabConfigData.record) {
                            this.record = this.configData.record;
                        }
                    }
                    tabIndex++;
                });
            }
        }
    }
    getTabIdentifier(tabTitle) {
        let tabIdentifier = '';
        if (this.form && this.form.tabs) {
            for (let tab of this.form.tabs) {
                if (tab.label == tabTitle) {
                    tabIdentifier = tab.identifier;
                    break;
                }
            }
        }
        return tabIdentifier;
    }
    drawTabs() {
        if (this.form && this.form.tabs && this.form.tabs.length > 0) {
            let widgetIdentifiers = null;
            if (!CollectionUtils.isEmpty(this.actionPages)) {
                for (let actionPage of this.actionPages) {
                    if (actionPage.buttonIdentifier == this.onAction) {
                        widgetIdentifiers = actionPage.associatedWidgetIdentifiers;
                    }
                }
            }
            for (let tIndex = 0; tIndex < this.form.tabs.length; tIndex++) {
                if (this.form.tabs[tIndex] &&
                    (this.form.tabs[tIndex].permission == null || (this.form.tabs[tIndex].permission && (this.ability.can(this.form.tabs[tIndex].permission['action'], this.form.tabs[tIndex].permission['subject']))))) {
                    let tabRows = this.drawTab(tIndex, widgetIdentifiers);
                    if (!CollectionUtils.isEmpty(tabRows)) {
                        this.rowsInTab.push(tabRows);
                        this.formTabLength++;
                        this.filteredTabs.push(this.form.tabs[tIndex]);
                    }
                }
            }
        }
    }
    drawTab(tabIndex, widgetIdentifiers) {
        let rows = new Array();
        let rIndex = 0;
        if (this.form && this.form.tabs && this.form.tabs.length > 0) {
            for (let tIndex = 0; tIndex < this.form.tabs.length; tIndex++) {
                if (this.form.tabs[tIndex].widgets && this.form.tabs[tIndex].widgets.length > 0 && tIndex == tabIndex) {
                    for (let widget of this.form.tabs[tIndex].widgets) {
                        if (widget &&
                            (widget.permission == null ||
                                (widget.permission && (this.ability.can(widget.permission['action'], widget.permission['subject'])))) &&
                            (widgetIdentifiers == null ||
                                widgetIdentifiers.includes(widget.widget.identifier))) {
                            if (CollectionUtils.isEmpty(rows[rIndex])) {
                                rows[rIndex] = new Array();
                            }
                            let colCount = 0;
                            rows[rIndex].forEach(row => colCount += row.colSpan);
                            if (colCount < 2) {
                                rows[rIndex].push(widget);
                            }
                            else {
                                rIndex++;
                                rows[rIndex] = new Array();
                                rows[rIndex].push(widget);
                            }
                        }
                    }
                }
            }
        }
        console.log(rows);
        return rows;
    }
    displayWidget(widget, supportingRecord, record) {
        return DependentUtils.displayDependencyField(widget.dependentOnFields, supportingRecord, record);
    }
    // filterForms() {
    //   let formIdentifiers: Array<string>;
    //   //    let mappedFormDisplayMode: FormDiaplyMode;
    //   if (this.actionPages && this.actions) {
    //     for (let actionPage of this.actionPages) {
    //       for (let action of this.actions) {
    //         if (actionPage.buttonIdentifier == action.identifier) {
    //           formIdentifiers = actionPage.associatedFormIdentifiers;
    //           //            mappedFormDisplayMode = actionPage.formDisplayMode;
    //         }
    //       }
    //     }
    //     if (this.form && this.form.tabs && !CollectionUtils.isEmpty(formIdentifiers)) {
    //       for (let tab of this.form.tabs) {
    //         for (let widget of tab.widgets) {
    //           if (
    //             formIdentifiers.indexOf((<Form>widget.widget).identifier) > -1 &&
    //             (this.displayMode == null || this.displayMode == (<Form>widget.widget).displayMode)
    //           ) {
    //             widget.widget['display'] = true;
    //           }
    //         }
    //       }
    //     } else {
    //       this.form.tabs.forEach(tab => tab.widgets.forEach(widget => widget.widget['display'] = true));
    //     }
    //   } else {
    //     this.form.tabs.forEach(tab => tab.widgets.forEach(widget => widget.widget['display'] = true));
    //   }
    //   this.form.tabs.forEach(tab => {
    //     let display: boolean = false;
    //     tab.widgets.forEach(widget => {
    //       if (widget.widget['display']) {
    //         display = true;
    //       }
    //       tab['display'] = display;
    //     });
    //     if (tab['display']) {
    //       this.formTabLength++;
    //       this.filteredTabs.push(tab);
    //     }
    //   });
    // }
    addWidgetButton(identifier, label, icon, color) {
        let buttonConfig = {
            identifier: identifier,
            type: "GHOST" /* GHOST */,
            label: label,
            color: color,
            size: "small" /* SMALL */,
            icon: icon,
            onlyIcon: false,
            alwaysEnable: true
        };
        return buttonConfig;
    }
    fieldChange(fieldChange) {
        console.log(fieldChange);
        this.onFieldChange.emit(fieldChange);
    }
    formChange(form) {
        this.onFormChange.emit(form);
    }
    buttonClick(action) {
        console.log(action);
        if (action.action == "addWidget") {
            if (this.record[action.sourceIdentifier] && this.record[action.sourceIdentifier] instanceof Array) {
                this.record[action.sourceIdentifier].push({});
            }
            else {
                this.record[action.sourceIdentifier] = new Array();
                this.record[action.sourceIdentifier].push({});
            }
        }
        this.onButtonClick.emit(action);
    }
    onTabChange(event) {
        console.log(event);
        this.setConfigAsPerTab(this.getTabIdentifier(event.tab.textLabel));
    }
    onAccordianChange(event) {
        console.log(event);
    }
    onSort(event) {
        console.log(event);
        this.onSortClick.emit(event);
    }
    onPage(event) {
        console.log(event);
        this.onPageClick.emit(event);
    }
}
CrudFormComponent.decorators = [
    { type: Component, args: [{
                selector: 'mx-crud-form',
                template: "<mat-card class=\"mx-crud-card\">\n    <!-- {{configData | json}} -->\n    <mat-card-header class=\"mx-list-header\">\n        <mx-crud-header\n            [identifier]=\"identifier\"\n            [title]=\"title\"\n            [subtitle]=\"header.subtitle\"\n            [description]=\"header.description\"\n            [badges]=\"badges\"\n            [icon]=\"header.icon\"\n            [pageBackRoute]=\"pageBackRoute\"\n            [formDisplayMode]=\"'CRUD_FORM'\"\n            [actions]=\"actions\"\n            [originalData]=\"configData.originalData\"   \n            [context]=\"record\"\n            [style.width.%]=\"100\"\n            (onButtonClick)=\"buttonClick($event)\"\n        ></mx-crud-header>\n    </mat-card-header> \n  \n    <mat-card-content class=\"mx-crud-content\">\n        <div class=\"mdc-layout-grid mx-crud-header\" *ngIf=\"header.description && header.description.text && header.description.bgColor\">\n            <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell--span-12\">\n                    <div \n                        class=\"mx-crud-header-desc\"\n                        [style.background-color]=\"header.description.bgColor\"\n                        [style.color]=\"header.description.textColor\"\n                    >\n                        <mat-icon class=\"mx-crud-header-desc-icon\" aria-hidden=\"true\" [attr.aria-label]=\"header.description.icon\" *ngIf=\"header.description.icon\">{{header.description.icon}}</mat-icon>\n                        <span>{{ header.description.text }}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- <mx-error></mx-error> -->\n\n        <span *ngIf=\"form && form.displayType == 'TAB' && filteredTabs && formTabLength > 1\">\n            <mat-tab-group (selectedTabChange)=\"onTabChange($event)\">\n              <mat-tab \n                *ngFor=\"let tab of filteredTabs; let tIndex=index\"\n                [label]=\"tab.label\">\n                <ng-container *ngTemplateOutlet=\"cfTab; context: {tab: tab, record: record, formRows: rowsInTab[tIndex], tIndex: tIndex}\"></ng-container>\n              </mat-tab>\n            </mat-tab-group>\n        </span>\n        <span *ngIf=\"form && form.displayType == 'ACCORDIAN' && filteredTabs && formTabLength > 1\">\n            <mat-accordion>\n                <mat-expansion-panel\n                  *ngFor=\"let tab of filteredTabs; let tIndex=index\"\n                  [expanded]=\"tIndex === 0\"\n                  (opened)=\"onAccordianChange(tIndex)\">\n                  <mat-expansion-panel-header>\n                    <mat-panel-title>\n                      {{tab.label}}\n                    </mat-panel-title>\n                  </mat-expansion-panel-header>\n                  <ng-container *ngTemplateOutlet=\"cfTab; context: {tab: tab, record: record, formRows: rowsInTab[tIndex], tIndex: tIndex}\"></ng-container>\n                </mat-expansion-panel>\n            </mat-accordion>\n        </span>\n        <span *ngIf=\"form && filteredTabs && formTabLength == 1\">\n            <span \n                *ngFor=\"let tab of filteredTabs; let tIndex=index\">\n                <ng-container *ngTemplateOutlet=\"cfTab; context: {tab: tab, record: record, formRows: rowsInTab[tIndex], tIndex: tIndex}\"></ng-container>\n            </span>\n        </span>\n    </mat-card-content>\n</mat-card>\n  \n<ng-template #cfTab let-tab=\"tab\" let-record=\"record\" let-formRows=\"formRows\" let-tIndex=\"tIndex\">\n    <!-- {{record | json}} -->\n    <div \n        class=\"mdc-layout-grid mx-crud-tab\"\n        *ngIf=\"tab && (tab.permission == null || (tab.permission && (tab.permission['subject'] | can: tab.permission['action'])))\"\n    >\n        <div class=\"mdc-layout-grid__inner mx-crud-tab-header\" *ngIf=\"tab.description && tab.description.text\">\n            <div class=\"mdc-layout-grid__cell--span-12\">\n                {{tab.description.text}} \n            </div>\n        </div>\n\n        <div class=\"mdc-layout-grid__inner\" *ngIf=\"tab.customPlugin && tab.customPlugin.component\">\n            <div class=\"mdc-layout-grid__cell--span-12\">\n                <!-- <ndc-dynamic\n                    [ndcDynamicComponent]=\"tab.customPlugin.component\"\n                ></ndc-dynamic> -->\n            </div>\n        </div>\n\n        <div \n            *ngFor=\"let row of formRows; let rIndex = index;\" \n            class=\"mdc-layout-grid__inner mx-crud-tab-form\"> \n            <div\n                *ngFor=\"let cell of row\" \n                class=\"mdc-layout-grid__cell--span-{{cell.colSpan * 6}} mx-crud-form\">\n                <!-- <pre>--{{configData.record[cell.widget.identifier] | json}}--</pre> -->\n\n                <span *ngIf=\"cell.multiple && cell.multiple.addMore; else singleCell\">\n                    <mat-card  *ngIf=\"displayWidget(cell, record, record[cell.widget.identifier] && record[cell.widget.identifier][0] ? record[cell.widget.identifier][0] : {})\" class=\"mx-crud-child-widgets\">\n                        <!-- {{configData | json}} -->\n                        <mat-card-header class=\"mx-list-header\"> \n                            <mat-card-title>{{ cell.multiple.sectionTitle }}</mat-card-title>\n                            <mx-button \n                                class=\"mx-crud-widget-addmore\"\n                                [sourceIdentifier]=\"cell.widget.identifier\"\n                                [sourceIndex]=\"rIndex\" \n                                [context]=\"record\"\n                                [originalData]=\"configData.record[cell.widget.identifier]\"\n                                [button]=\"addWidget\"\n                                (onClick)=\"buttonClick($event);$event.event.stopPropagation()\"\n                            ></mx-button> \n                        </mat-card-header> \n                        <mat-divider class=\"mx-crud-form-header-divider\"></mat-divider>\n                        <mat-card-content class=\"mx-crud-child-widgets-content\">\n                            <span *ngIf=\"record[cell.widget.identifier] && record[cell.widget.identifier].length > 0; else newCellAtIndex;\">\n                                <span *ngFor=\"let cellAtIndex of record[cell.widget.identifier]; let cellArrayIndex = index;\">\n                                    <ng-container *ngTemplateOutlet=\"cfWidget; context: {\n                                        cell: cell, \n                                        supportingRecord: record,\n                                        record: record[cell.widget.identifier][cellArrayIndex], \n                                        configData: configData.record[cell.widget.identifier][cellArrayIndex], \n                                        multiple: true,\n                                        cellArrayIndex: cellArrayIndex,\n                                        tIndex: tIndex\n                                    }\"></ng-container>\n                                </span>\n                            </span>\n                            <ng-template #newCellAtIndex>\n                                <ng-container *ngTemplateOutlet=\"cfWidget; context: {\n                                    cell: cell, \n                                    supportingRecord: {},\n                                    record: {}, \n                                    configData: {}, \n                                    multiple: true,\n                                    cellArrayIndex: 0,\n                                    tIndex: tIndex\n                                }\"></ng-container>\n                            </ng-template>\n                        </mat-card-content>\n                    </mat-card>\n                </span>\n                <ng-template #singleCell>\n                    <span *ngIf=\"displayWidget(cell, record, record[cell.widget.identifier])\">\n                        <ng-container *ngTemplateOutlet=\"cfWidget; context: {\n                            cell: cell, \n                            supportingRecord: record,\n                            record: record[cell.widget.identifier], \n                            configData: configData.record[cell.widget.identifier], \n                            multiple: false,\n                            cellArrayIndex: null,\n                            tIndex: tIndex\n                        }\"></ng-container>\n                    </span>\n                </ng-template>\n            </div>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #cfWidget let-cell=\"cell\" let-supportingRecord=\"supportingRecord\" let-record=\"record\" let-configData=\"configData\" let-multiple=\"multiple\" let-cellArrayIndex=\"cellArrayIndex\" let-tIndex=\"tIndex\">\n    <mx-form \n        *ngIf=\"cell.widgetType == 'FORM'\"\n        [formConfig]=\"cell.widget\"\n        [sourceIndex]=\"tIndex\"\n        [widgetArrayIndex]=\"cellArrayIndex\"\n        [record]=\"record\"\n        [originalData]=\"configData\"  \n        [keyMap]=\"keyMap\"\n        [reset]=\"reset\" \n        (onFieldChange)=\"fieldChange($event)\"\n        (onFormChange)=\"formChange($event)\"\n        (onButtonClick)=\"buttonClick($event)\"\n    ></mx-form>\n\n    <mx-static-list\n        *ngIf=\"cell.widgetType == 'LIST' && cell.widget.listType == 'STATIC'\"\n        [listConfig]=\"cell.widget\"\n        [sourceIdentifier]=\"identifier\"\n        [sourceIndex]=\"tIndex\"\n        [widgetArrayIndex]=\"cellArrayIndex\"\n        [record]=\"record\"\n        [originalData]=\"configData\"  \n        [keyMap]=\"keyMap\"\n        (onFormChange)=\"formChange($event)\"\n        (onFieldChange)=\"fieldChange($event)\"\n        (onButtonClick)=\"buttonClick($event)\"\n        (onPageChange)=\"onPage($event)\"\n        (onSortChange)=\"onSort($event)\"  \n    ></mx-static-list>\n    <!-- [expanded]=\"_expanded\" -->\n\n    <mx-dynamic-list\n        *ngIf=\"cell.widgetType == 'LIST' && cell.widget.listType == 'DYNAMIC'\"\n        [listConfig]=\"cell.widget\"\n        [sourceIdentifier]=\"identifier\"\n        [sourceIndex]=\"tIndex\"\n        [widgetArrayIndex]=\"cellArrayIndex\"\n        [record]=\"record\"\n        [originalData]=\"configData\"  \n        [keyMap]=\"keyMap\"\n        (onFormChange)=\"formChange($event)\"\n        (onFieldChange)=\"fieldChange($event)\"\n        (onButtonClick)=\"buttonClick($event)\"\n        (onPageChange)=\"onPage($event)\"\n        (onSortChange)=\"onSort($event)\"  \n    ></mx-dynamic-list>\n</ng-template>",
                styles: [":root{--mdc-layout-grid-column-width-desktop:72px;--mdc-layout-grid-column-width-phone:72px;--mdc-layout-grid-column-width-tablet:72px;--mdc-layout-grid-gutter-desktop:24px;--mdc-layout-grid-gutter-phone:16px;--mdc-layout-grid-gutter-tablet:16px;--mdc-layout-grid-margin-desktop:24px;--mdc-layout-grid-margin-phone:16px;--mdc-layout-grid-margin-tablet:16px}@media (min-width:840px){.mdc-layout-grid{box-sizing:border-box;margin:0 auto;padding:24px;padding:var(--mdc-layout-grid-margin-desktop,24px)}}@media (min-width:600px) and (max-width:839px){.mdc-layout-grid{box-sizing:border-box;margin:0 auto;padding:16px;padding:var(--mdc-layout-grid-margin-tablet,16px)}}@media (max-width:599px){.mdc-layout-grid{box-sizing:border-box;margin:0 auto;padding:16px;padding:var(--mdc-layout-grid-margin-phone,16px)}}@media (min-width:840px){.mdc-layout-grid__inner{align-items:stretch;display:flex;flex-flow:row wrap;margin:-12px;margin:calc(var(--mdc-layout-grid-gutter-desktop, 24px)/2*-1)}@supports (display:grid){.mdc-layout-grid__inner{-ms-grid-columns:(minmax(0,1fr))[12];display:-ms-grid;display:grid;grid-gap:24px;grid-gap:var(--mdc-layout-grid-gutter-desktop,24px);grid-template-columns:repeat(12,minmax(0,1fr));margin:0}}}@media (min-width:600px) and (max-width:839px){.mdc-layout-grid__inner{align-items:stretch;display:flex;flex-flow:row wrap;margin:-8px;margin:calc(var(--mdc-layout-grid-gutter-tablet, 16px)/2*-1)}@supports (display:grid){.mdc-layout-grid__inner{-ms-grid-columns:(minmax(0,1fr))[8];display:-ms-grid;display:grid;grid-gap:16px;grid-gap:var(--mdc-layout-grid-gutter-tablet,16px);grid-template-columns:repeat(8,minmax(0,1fr));margin:0}}}@media (max-width:599px){.mdc-layout-grid__inner{align-items:stretch;display:flex;flex-flow:row wrap;margin:-8px;margin:calc(var(--mdc-layout-grid-gutter-phone, 16px)/2*-1)}@supports (display:grid){.mdc-layout-grid__inner{-ms-grid-columns:(minmax(0,1fr))[4];display:-ms-grid;display:grid;grid-gap:16px;grid-gap:var(--mdc-layout-grid-gutter-phone,16px);grid-template-columns:repeat(4,minmax(0,1fr));margin:0}}}@media (min-width:840px){.mdc-layout-grid__cell{box-sizing:border-box;margin:12px;margin:calc(var(--mdc-layout-grid-gutter-desktop, 24px)/2);width:calc(33.33333% - 24px);width:calc(33.33333% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell{-ms-grid-column-span:4;grid-column-end:span 4;margin:0;width:auto}}.mdc-layout-grid__cell--span-1,.mdc-layout-grid__cell--span-1-desktop{width:calc(8.33333% - 24px);width:calc(8.33333% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-1,.mdc-layout-grid__cell--span-1-desktop{-ms-grid-column-span:1;grid-column-end:span 1;width:auto}}.mdc-layout-grid__cell--span-2,.mdc-layout-grid__cell--span-2-desktop{width:calc(16.66667% - 24px);width:calc(16.66667% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-2,.mdc-layout-grid__cell--span-2-desktop{-ms-grid-column-span:2;grid-column-end:span 2;width:auto}}.mdc-layout-grid__cell--span-3,.mdc-layout-grid__cell--span-3-desktop{width:calc(25% - 24px);width:calc(25% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-3,.mdc-layout-grid__cell--span-3-desktop{-ms-grid-column-span:3;grid-column-end:span 3;width:auto}}.mdc-layout-grid__cell--span-4,.mdc-layout-grid__cell--span-4-desktop{width:calc(33.33333% - 24px);width:calc(33.33333% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-4,.mdc-layout-grid__cell--span-4-desktop{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-5,.mdc-layout-grid__cell--span-5-desktop{width:calc(41.66667% - 24px);width:calc(41.66667% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-5,.mdc-layout-grid__cell--span-5-desktop{-ms-grid-column-span:5;grid-column-end:span 5;width:auto}}.mdc-layout-grid__cell--span-6,.mdc-layout-grid__cell--span-6-desktop{width:calc(50% - 24px);width:calc(50% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-6,.mdc-layout-grid__cell--span-6-desktop{-ms-grid-column-span:6;grid-column-end:span 6;width:auto}}.mdc-layout-grid__cell--span-7,.mdc-layout-grid__cell--span-7-desktop{width:calc(58.33333% - 24px);width:calc(58.33333% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-7,.mdc-layout-grid__cell--span-7-desktop{-ms-grid-column-span:7;grid-column-end:span 7;width:auto}}.mdc-layout-grid__cell--span-8,.mdc-layout-grid__cell--span-8-desktop{width:calc(66.66667% - 24px);width:calc(66.66667% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-8,.mdc-layout-grid__cell--span-8-desktop{-ms-grid-column-span:8;grid-column-end:span 8;width:auto}}.mdc-layout-grid__cell--span-9,.mdc-layout-grid__cell--span-9-desktop{width:calc(75% - 24px);width:calc(75% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-9,.mdc-layout-grid__cell--span-9-desktop{-ms-grid-column-span:9;grid-column-end:span 9;width:auto}}.mdc-layout-grid__cell--span-10,.mdc-layout-grid__cell--span-10-desktop{width:calc(83.33333% - 24px);width:calc(83.33333% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-10,.mdc-layout-grid__cell--span-10-desktop{-ms-grid-column-span:10;grid-column-end:span 10;width:auto}}.mdc-layout-grid__cell--span-11,.mdc-layout-grid__cell--span-11-desktop{width:calc(91.66667% - 24px);width:calc(91.66667% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-11,.mdc-layout-grid__cell--span-11-desktop{-ms-grid-column-span:11;grid-column-end:span 11;width:auto}}.mdc-layout-grid__cell--span-12,.mdc-layout-grid__cell--span-12-desktop{width:calc(100% - 24px);width:calc(100% - var(--mdc-layout-grid-gutter-desktop, 24px))}@supports (display:grid){.mdc-layout-grid__cell--span-12,.mdc-layout-grid__cell--span-12-desktop{-ms-grid-column-span:12;grid-column-end:span 12;width:auto}}}@media (min-width:600px) and (max-width:839px){.mdc-layout-grid__cell{box-sizing:border-box;margin:8px;margin:calc(var(--mdc-layout-grid-gutter-tablet, 16px)/2);width:calc(50% - 16px);width:calc(50% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell{-ms-grid-column-span:4;grid-column-end:span 4;margin:0;width:auto}}.mdc-layout-grid__cell--span-1,.mdc-layout-grid__cell--span-1-tablet{width:calc(12.5% - 16px);width:calc(12.5% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-1,.mdc-layout-grid__cell--span-1-tablet{-ms-grid-column-span:1;grid-column-end:span 1;width:auto}}.mdc-layout-grid__cell--span-2,.mdc-layout-grid__cell--span-2-tablet{width:calc(25% - 16px);width:calc(25% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-2,.mdc-layout-grid__cell--span-2-tablet{-ms-grid-column-span:2;grid-column-end:span 2;width:auto}}.mdc-layout-grid__cell--span-3,.mdc-layout-grid__cell--span-3-tablet{width:calc(37.5% - 16px);width:calc(37.5% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-3,.mdc-layout-grid__cell--span-3-tablet{-ms-grid-column-span:3;grid-column-end:span 3;width:auto}}.mdc-layout-grid__cell--span-4,.mdc-layout-grid__cell--span-4-tablet{width:calc(50% - 16px);width:calc(50% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-4,.mdc-layout-grid__cell--span-4-tablet{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-5,.mdc-layout-grid__cell--span-5-tablet{width:calc(62.5% - 16px);width:calc(62.5% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-5,.mdc-layout-grid__cell--span-5-tablet{-ms-grid-column-span:5;grid-column-end:span 5;width:auto}}.mdc-layout-grid__cell--span-6,.mdc-layout-grid__cell--span-6-tablet{width:calc(75% - 16px);width:calc(75% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-6,.mdc-layout-grid__cell--span-6-tablet{-ms-grid-column-span:6;grid-column-end:span 6;width:auto}}.mdc-layout-grid__cell--span-7,.mdc-layout-grid__cell--span-7-tablet{width:calc(87.5% - 16px);width:calc(87.5% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-7,.mdc-layout-grid__cell--span-7-tablet{-ms-grid-column-span:7;grid-column-end:span 7;width:auto}}.mdc-layout-grid__cell--span-8,.mdc-layout-grid__cell--span-8-tablet{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-8,.mdc-layout-grid__cell--span-8-tablet{-ms-grid-column-span:8;grid-column-end:span 8;width:auto}}.mdc-layout-grid__cell--span-9,.mdc-layout-grid__cell--span-9-tablet{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-9,.mdc-layout-grid__cell--span-9-tablet{-ms-grid-column-span:8;grid-column-end:span 8;width:auto}}.mdc-layout-grid__cell--span-10,.mdc-layout-grid__cell--span-10-tablet{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-10,.mdc-layout-grid__cell--span-10-tablet{-ms-grid-column-span:8;grid-column-end:span 8;width:auto}}.mdc-layout-grid__cell--span-11,.mdc-layout-grid__cell--span-11-tablet{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-11,.mdc-layout-grid__cell--span-11-tablet{-ms-grid-column-span:8;grid-column-end:span 8;width:auto}}.mdc-layout-grid__cell--span-12,.mdc-layout-grid__cell--span-12-tablet{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-tablet, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-12,.mdc-layout-grid__cell--span-12-tablet{-ms-grid-column-span:8;grid-column-end:span 8;width:auto}}}@media (max-width:599px){.mdc-layout-grid__cell{box-sizing:border-box;margin:8px;margin:calc(var(--mdc-layout-grid-gutter-phone, 16px)/2);width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell{-ms-grid-column-span:4;grid-column-end:span 4;margin:0;width:auto}}.mdc-layout-grid__cell--span-1,.mdc-layout-grid__cell--span-1-phone{width:calc(25% - 16px);width:calc(25% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-1,.mdc-layout-grid__cell--span-1-phone{-ms-grid-column-span:1;grid-column-end:span 1;width:auto}}.mdc-layout-grid__cell--span-2,.mdc-layout-grid__cell--span-2-phone{width:calc(50% - 16px);width:calc(50% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-2,.mdc-layout-grid__cell--span-2-phone{-ms-grid-column-span:2;grid-column-end:span 2;width:auto}}.mdc-layout-grid__cell--span-3,.mdc-layout-grid__cell--span-3-phone{width:calc(75% - 16px);width:calc(75% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-3,.mdc-layout-grid__cell--span-3-phone{-ms-grid-column-span:3;grid-column-end:span 3;width:auto}}.mdc-layout-grid__cell--span-4,.mdc-layout-grid__cell--span-4-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-4,.mdc-layout-grid__cell--span-4-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-5,.mdc-layout-grid__cell--span-5-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-5,.mdc-layout-grid__cell--span-5-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-6,.mdc-layout-grid__cell--span-6-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-6,.mdc-layout-grid__cell--span-6-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-7,.mdc-layout-grid__cell--span-7-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-7,.mdc-layout-grid__cell--span-7-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-8,.mdc-layout-grid__cell--span-8-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-8,.mdc-layout-grid__cell--span-8-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-9,.mdc-layout-grid__cell--span-9-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-9,.mdc-layout-grid__cell--span-9-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-10,.mdc-layout-grid__cell--span-10-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-10,.mdc-layout-grid__cell--span-10-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-11,.mdc-layout-grid__cell--span-11-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-11,.mdc-layout-grid__cell--span-11-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}.mdc-layout-grid__cell--span-12,.mdc-layout-grid__cell--span-12-phone{width:calc(100% - 16px);width:calc(100% - var(--mdc-layout-grid-gutter-phone, 16px))}@supports (display:grid){.mdc-layout-grid__cell--span-12,.mdc-layout-grid__cell--span-12-phone{-ms-grid-column-span:4;grid-column-end:span 4;width:auto}}}.mdc-layout-grid__cell--order-1{order:1}.mdc-layout-grid__cell--order-2{order:2}.mdc-layout-grid__cell--order-3{order:3}.mdc-layout-grid__cell--order-4{order:4}.mdc-layout-grid__cell--order-5{order:5}.mdc-layout-grid__cell--order-6{order:6}.mdc-layout-grid__cell--order-7{order:7}.mdc-layout-grid__cell--order-8{order:8}.mdc-layout-grid__cell--order-9{order:9}.mdc-layout-grid__cell--order-10{order:10}.mdc-layout-grid__cell--order-11{order:11}.mdc-layout-grid__cell--order-12{order:12}.mdc-layout-grid__cell--align-top{align-self:flex-start}@supports (display:grid){.mdc-layout-grid__cell--align-top{-ms-grid-row-align:start;align-self:start}}.mdc-layout-grid__cell--align-middle{-ms-grid-row-align:center;align-self:center}.mdc-layout-grid__cell--align-bottom{align-self:flex-end}@supports (display:grid){.mdc-layout-grid__cell--align-bottom{-ms-grid-row-align:end;align-self:end}}@media (min-width:840px){.mdc-layout-grid--fixed-column-width{width:1176px;width:calc(var(--mdc-layout-grid-column-width-desktop, 72px)*12 + var(--mdc-layout-grid-gutter-desktop, 24px)*11 + var(--mdc-layout-grid-margin-desktop, 24px)*2)}}@media (min-width:600px) and (max-width:839px){.mdc-layout-grid--fixed-column-width{width:720px;width:calc(var(--mdc-layout-grid-column-width-tablet, 72px)*8 + var(--mdc-layout-grid-gutter-tablet, 16px)*7 + var(--mdc-layout-grid-margin-tablet, 16px)*2)}}@media (max-width:599px){.mdc-layout-grid--fixed-column-width{width:368px;width:calc(var(--mdc-layout-grid-column-width-phone, 72px)*4 + var(--mdc-layout-grid-gutter-phone, 16px)*3 + var(--mdc-layout-grid-margin-phone, 16px)*2)}}.mdc-layout-grid--align-left{margin-left:0;margin-right:auto}.mdc-layout-grid--align-right{margin-left:auto;margin-right:0}.mx-crud-card{background-color:transparent}.mx-crud-form{padding-bottom:20px}.mx-crud-tab{padding:0!important}.mx-crud-tab-header{padding:20px 0!important}.mx-crud-tab-form{margin:1px}.mx-crud-header{padding:0}.mx-crud-header-desc{padding:5px 10px;width:auto}.mx-crud-header-desc-icon{font-size:15px;height:15px!important;margin-top:0;padding:0 5px 0 0;width:15px!important}.mx-crud-child-widgets{background-color:#f5f5f5}.mx-crud-child-widgets-content{padding-top:20px}.mx-crud-widget-addmore{margin-top:-8px}.mx-crud-content{padding-top:16px}"]
            },] }
];
CrudFormComponent.ctorParameters = () => [
    { type: Ability }
];
CrudFormComponent.propDecorators = {
    identifier: [{ type: Input }],
    header: [{ type: Input }],
    actions: [{ type: Input }],
    actionPages: [{ type: Input }],
    onAction: [{ type: Input }],
    displayMode: [{ type: Input }],
    form: [{ type: Input }],
    reset: [{ type: Input }],
    configData: [{ type: Input }],
    keyMap: [{ type: Input }],
    onFormChange: [{ type: Output }],
    onFieldChange: [{ type: Output }],
    onButtonClick: [{ type: Output }],
    onSortClick: [{ type: Output }],
    onPageClick: [{ type: Output }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3J1ZC1mb3JtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbml0aW5raGFpdGFuL05pdGluL3N0dWR5L2FuZ3VsYXIvbWF0ZXJpYWwvYWRtaW4tYnVpbGRlci1wbHVnaW4vcHJvamVjdHMvbmd4LW1hdGVyaWFsLXdpZGdldC9zcmMvIiwic291cmNlcyI6WyJsaWIvY3J1ZC9jb21wb25lbnQvY3J1ZC1mb3JtL2NydWQtZm9ybS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvRSxPQUFPLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBYSxNQUFNLGtCQUFrQixDQUFDO0FBSzlFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBT2hFLE1BQU0sT0FBTyxpQkFBaUI7SUFpQzVCLFlBQW9CLE9BQWdCO1FBQWhCLFlBQU8sR0FBUCxPQUFPLENBQVM7UUFuQjFCLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNsQyxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDbkMsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ25DLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNqQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFJM0MseUJBQW9CLEdBQWdDLElBQUksS0FBSyxFQUF3QixDQUFDO1FBQ3RGLGNBQVMsR0FBb0MsSUFBSSxLQUFLLEVBQTRCLENBQUM7UUFPbkYsa0JBQWEsR0FBVyxDQUFDLENBQUM7UUFDMUIsaUJBQVksR0FBbUIsSUFBSSxLQUFLLEVBQVcsQ0FBQztRQUdsRCxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENB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QUMsS0FBVTtRQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFVO1FBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQixDQUFDOzs7WUFsVUYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxjQUFjO2dCQUN4Qix5NlVBQXlDOzthQUUxQzs7O1lBUFEsT0FBTzs7O3lCQVNiLEtBQUs7cUJBQ0wsS0FBSztzQkFDTCxLQUFLOzBCQUNMLEtBQUs7dUJBQ0wsS0FBSzswQkFDTCxLQUFLO21CQUVMLEtBQUs7b0JBRUwsS0FBSzt5QkFDTCxLQUFLO3FCQUNMLEtBQUs7MkJBRUwsTUFBTTs0QkFDTixNQUFNOzRCQUNOLE1BQU07MEJBQ04sTUFBTTswQkFDTixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ3J1ZEhlYWRlciwgQWN0aW9uUGFnZSwgQ3J1ZFRhYiwgQ3J1ZFdpZGdldCwgQ3J1ZFdpZGdldFR5cGUsIENydWRGb3JtRGF0YSwgQ3J1ZEZvcm1UYWJEYXRhLCBDcnVkRm9ybSwgQ3J1ZFN0eWxlIH0gZnJvbSAnLi4vLi4vbW9kZWwnO1xuaW1wb3J0IHsgQmFkZ2UsIEJ1dHRvbkdyb3VwLCBIb3ZlckJ1dHRvbiwgQnV0dG9uLCBCdXR0b25Db2xvciwgQnV0dG9uVHlwZSwgQnV0dG9uU2l6ZSwgQWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vYnV0dG9uL21vZGVsJztcbmltcG9ydCB7IENvbGxlY3Rpb25VdGlscywgRGVwZW5kZW50VXRpbHMsIEZvcm1VdGlscyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHknO1xuaW1wb3J0IHsgRm9ybSwgRm9ybURpYXBseU1vZGUgfSBmcm9tICcuLi8uLi8uLi9mb3JtL21vZGVsJztcbmltcG9ydCB7IFdpemFyZCB9IGZyb20gJy4uLy4uLy4uL3dpemFyZC9tb2RlbCc7XG5pbXBvcnQgeyBMaXN0IH0gZnJvbSAnLi4vLi4vLi4vbGlzdC9tb2RlbCc7XG5pbXBvcnQgeyBGaWVsZENoYW5nZSwgS2V5TWFwIH0gZnJvbSAnLi4vLi4vLi4vZmllbGQvbW9kZWwnO1xuaW1wb3J0IHsgQWJpbGl0eSB9IGZyb20gJ0BjYXNsL2FiaWxpdHknO1xuaW1wb3J0IHsgQWJpbGl0eVV0aWxzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS9hYmlsaXR5LnV0aWxpdHknO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdteC1jcnVkLWZvcm0nLFxuICB0ZW1wbGF0ZVVybDogJy4vY3J1ZC1mb3JtLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vY3J1ZC1mb3JtLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgQ3J1ZEZvcm1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGhlYWRlcjogQ3J1ZEhlYWRlcjtcbiAgQElucHV0KCkgYWN0aW9uczogQXJyYXk8QnV0dG9uIHwgSG92ZXJCdXR0b24gfCBCdXR0b25Hcm91cD47XG4gIEBJbnB1dCgpIGFjdGlvblBhZ2VzOiBBcnJheTxBY3Rpb25QYWdlPjtcbiAgQElucHV0KCkgb25BY3Rpb246IHN0cmluZztcbiAgQElucHV0KCkgZGlzcGxheU1vZGU6IEZvcm1EaWFwbHlNb2RlO1xuXG4gIEBJbnB1dCgpIGZvcm06IENydWRGb3JtO1xuXG4gIEBJbnB1dCgpIHJlc2V0OiBib29sZWFuO1xuICBASW5wdXQoKSBjb25maWdEYXRhOiBDcnVkRm9ybURhdGE7XG4gIEBJbnB1dCgpIGtleU1hcDogQXJyYXk8S2V5TWFwPjtcblxuICBAT3V0cHV0KCkgb25Gb3JtQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgb25GaWVsZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uQnV0dG9uQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvblNvcnRDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uUGFnZUNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIHRpdGxlOiBzdHJpbmc7XG4gIGJhY2tCdXR0b246IEJ1dHRvbjtcbiAgZm9ybXNDb25maWdUb0Rpc3BsYXk6IEFycmF5PEZvcm0gfCBMaXN0IHwgV2l6YXJkPiA9IG5ldyBBcnJheTxGb3JtIHwgTGlzdCB8IFdpemFyZD4oKTtcbiAgcm93c0luVGFiOiBBcnJheTxBcnJheTxBcnJheTxDcnVkV2lkZ2V0Pj4+ID0gbmV3IEFycmF5PEFycmF5PEFycmF5PENydWRXaWRnZXQ+Pj4oKTtcblxuICBiYWRnZXM6IEFycmF5PEJhZGdlPjtcbiAgcGFnZUJhY2tSb3V0ZTogQXJyYXk8c3RyaW5nPjtcbiAgcmVjb3JkOiBhbnk7XG5cbiAgYWRkV2lkZ2V0OiBCdXR0b247XG4gIGZvcm1UYWJMZW5ndGg6IG51bWJlciA9IDA7XG4gIGZpbHRlcmVkVGFiczogQXJyYXk8Q3J1ZFRhYj4gPSBuZXcgQXJyYXk8Q3J1ZFRhYj4oKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFiaWxpdHk6IEFiaWxpdHkpIHtcbiAgICBBYmlsaXR5VXRpbHMuc2V0QWJpbGl0eSh0aGlzLmFiaWxpdHkpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgLy8gICAgdGhpcy5maWx0ZXJGb3JtcygpO1xuXG4gICAgdGhpcy5kcmF3VGFicygpO1xuXG4gICAgdGhpcy5zZXRDb25maWdBc1BlclRhYigpO1xuXG4gICAgdGhpcy5zZXRGb3JtVGl0bGUoKTtcblxuICAgIHRoaXMuYWRkV2lkZ2V0ID0gdGhpcy5hZGRXaWRnZXRCdXR0b24oXCJhZGRXaWRnZXRcIiwgXCJBZGRcIiwgXCJhZGRcIiwgQnV0dG9uQ29sb3IuUFJJTUFSWSk7XG4gIH1cblxuICBzZXRGb3JtVGl0bGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZm9ybSAmJiAhQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkodGhpcy5mb3JtLnRhYnMpKSB7XG4gICAgICB0aGlzLmZvcm0udGFicy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICAgIGlmICghQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkodGFiLndpZGdldHMpKSB7XG4gICAgICAgICAgdGFiLndpZGdldHMuZm9yRWFjaCh3aWRnZXQgPT4ge1xuICAgICAgICAgICAgaWYgKCg8Rm9ybT53aWRnZXQud2lkZ2V0KSAmJiAoPEZvcm0+d2lkZ2V0LndpZGdldCkuZGlzcGxheU1vZGUpIHtcbiAgICAgICAgICAgICAgbGV0IGRpc3BsYXlNb2RlID0gKDxGb3JtPndpZGdldC53aWRnZXQpLmRpc3BsYXlNb2RlXG4gICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheU1vZGUgPSB0aGlzLmRpc3BsYXlNb2RlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5zZXRGb3JtSGVhZGVyKHRoaXMuaGVhZGVyLCBkaXNwbGF5TW9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2V0Rm9ybUhlYWRlcihoZWFkZXI6IENydWRIZWFkZXIsIGRpc3BsYXlNb2RlOiBGb3JtRGlhcGx5TW9kZSk6IHZvaWQge1xuICAgIGxldCB0aXRsZTogc3RyaW5nID0gaGVhZGVyLnRpdGxlO1xuXG4gICAgc3dpdGNoIChkaXNwbGF5TW9kZSkge1xuICAgICAgY2FzZSBGb3JtRGlhcGx5TW9kZS5TRUFSQ0g6IHtcbiAgICAgICAgdGl0bGUgPSBoZWFkZXIuc2VhcmNoTW9kZVRpdGxlID8gaGVhZGVyLnNlYXJjaE1vZGVUaXRsZSA6IHRpdGxlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgRm9ybURpYXBseU1vZGUuQUREOiB7XG4gICAgICAgIHRpdGxlID0gaGVhZGVyLmFkZE1vZGVUaXRsZSA/IGhlYWRlci5hZGRNb2RlVGl0bGUgOiB0aXRsZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIEZvcm1EaWFwbHlNb2RlLkVESVQ6IHtcbiAgICAgICAgdGl0bGUgPSBoZWFkZXIuZWRpdE1vZGVUaXRsZSA/IGhlYWRlci5lZGl0TW9kZVRpdGxlIDogdGl0bGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBGb3JtRGlhcGx5TW9kZS5WSUVXOiB7XG4gICAgICAgIHRpdGxlID0gaGVhZGVyLnZpZXdNb2RlVGl0bGUgPyBoZWFkZXIudmlld01vZGVUaXRsZSA6IHRpdGxlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGl0bGUgPSBoZWFkZXIudGl0bGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICB9XG5cbiAgc2V0Q29uZmlnQXNQZXJUYWIodGFiSWRlbnRpZmllcj86IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbmZpZ0RhdGEpIHtcbiAgICAgIHRoaXMuYmFkZ2VzID0gdGhpcy5jb25maWdEYXRhLmJhZGdlcztcbiAgICAgIHRoaXMucGFnZUJhY2tSb3V0ZSA9IHRoaXMuY29uZmlnRGF0YS5wYWdlQmFja1JvdXRlO1xuICAgICAgdGhpcy5yZWNvcmQgPSB0aGlzLmNvbmZpZ0RhdGEucmVjb3JkO1xuXG4gICAgICBpZiAodGhpcy5jb25maWdEYXRhLmNvbmZpZ1BlclRhYnMpIHtcbiAgICAgICAgbGV0IHRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5jb25maWdEYXRhLmNvbmZpZ1BlclRhYnMuZm9yRWFjaCgodGFiQ29uZmlnRGF0YTogQ3J1ZEZvcm1UYWJEYXRhLCB0YWJLZXk6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGlmICgodGFiS2V5ID09IHRhYklkZW50aWZpZXIgfHwgKHRhYkluZGV4ID09IDAgJiYgdGFiSWRlbnRpZmllciA9PSBudWxsKSkgJiYgdGFiQ29uZmlnRGF0YSkge1xuICAgICAgICAgICAgaWYgKHRhYkNvbmZpZ0RhdGEuYmFkZ2VzKSB7XG4gICAgICAgICAgICAgIHRoaXMuYmFkZ2VzID0gdGFiQ29uZmlnRGF0YS5iYWRnZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFiQ29uZmlnRGF0YS5wYWdlQmFja1JvdXRlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGFnZUJhY2tSb3V0ZSA9IHRhYkNvbmZpZ0RhdGEucGFnZUJhY2tSb3V0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YWJDb25maWdEYXRhLnJlY29yZCkge1xuICAgICAgICAgICAgICB0aGlzLnJlY29yZCA9IHRoaXMuY29uZmlnRGF0YS5yZWNvcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRhYkluZGV4Kys7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0VGFiSWRlbnRpZmllcih0YWJUaXRsZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgdGFiSWRlbnRpZmllciA9ICcnO1xuICAgIGlmICh0aGlzLmZvcm0gJiYgdGhpcy5mb3JtLnRhYnMpIHtcbiAgICAgIGZvciAobGV0IHRhYiBvZiB0aGlzLmZvcm0udGFicykge1xuICAgICAgICBpZiAodGFiLmxhYmVsID09IHRhYlRpdGxlKSB7XG4gICAgICAgICAgdGFiSWRlbnRpZmllciA9IHRhYi5pZGVudGlmaWVyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhYklkZW50aWZpZXI7XG4gIH1cblxuICBkcmF3VGFicygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5mb3JtICYmIHRoaXMuZm9ybS50YWJzICYmIHRoaXMuZm9ybS50YWJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCB3aWRnZXRJZGVudGlmaWVyczogQXJyYXk8c3RyaW5nPiA9IG51bGw7XG5cbiAgICAgIGlmICghQ29sbGVjdGlvblV0aWxzLmlzRW1wdHkodGhpcy5hY3Rpb25QYWdlcykpIHtcbiAgICAgICAgZm9yIChsZXQgYWN0aW9uUGFnZSBvZiB0aGlzLmFjdGlvblBhZ2VzKSB7XG4gICAgICAgICAgaWYgKGFjdGlvblBhZ2UuYnV0dG9uSWRlbnRpZmllciA9PSB0aGlzLm9uQWN0aW9uKSB7XG4gICAgICAgICAgICB3aWRnZXRJZGVudGlmaWVycyA9IGFjdGlvblBhZ2UuYXNzb2NpYXRlZFdpZGdldElkZW50aWZpZXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCB0SW5kZXggPSAwOyB0SW5kZXggPCB0aGlzLmZvcm0udGFicy5sZW5ndGg7IHRJbmRleCsrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmZvcm0udGFic1t0SW5kZXhdICYmXG4gICAgICAgICAgKHRoaXMuZm9ybS50YWJzW3RJbmRleF0ucGVybWlzc2lvbiA9PSBudWxsIHx8ICh0aGlzLmZvcm0udGFic1t0SW5kZXhdLnBlcm1pc3Npb24gJiYgKHRoaXMuYWJpbGl0eS5jYW4odGhpcy5mb3JtLnRhYnNbdEluZGV4XS5wZXJtaXNzaW9uWydhY3Rpb24nXSwgdGhpcy5mb3JtLnRhYnNbdEluZGV4XS5wZXJtaXNzaW9uWydzdWJqZWN0J10pKSkpXG4gICAgICAgICkge1xuICAgICAgICAgIGxldCB0YWJSb3dzOiBBcnJheTxBcnJheTxDcnVkV2lkZ2V0Pj4gPSB0aGlzLmRyYXdUYWIodEluZGV4LCB3aWRnZXRJZGVudGlmaWVycyk7XG4gICAgICAgICAgaWYgKCFDb2xsZWN0aW9uVXRpbHMuaXNFbXB0eSh0YWJSb3dzKSkge1xuICAgICAgICAgICAgdGhpcy5yb3dzSW5UYWIucHVzaCh0YWJSb3dzKTtcblxuICAgICAgICAgICAgdGhpcy5mb3JtVGFiTGVuZ3RoKys7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkVGFicy5wdXNoKHRoaXMuZm9ybS50YWJzW3RJbmRleF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRyYXdUYWIodGFiSW5kZXg6IG51bWJlciwgd2lkZ2V0SWRlbnRpZmllcnM6IEFycmF5PHN0cmluZz4pOiBBcnJheTxBcnJheTxDcnVkV2lkZ2V0Pj4ge1xuICAgIGxldCByb3dzOiBBcnJheTxBcnJheTxDcnVkV2lkZ2V0Pj4gPSBuZXcgQXJyYXk8QXJyYXk8Q3J1ZFdpZGdldD4+KCk7XG4gICAgbGV0IHJJbmRleCA9IDA7XG5cbiAgICBpZiAodGhpcy5mb3JtICYmIHRoaXMuZm9ybS50YWJzICYmIHRoaXMuZm9ybS50YWJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IHRJbmRleCA9IDA7IHRJbmRleCA8IHRoaXMuZm9ybS50YWJzLmxlbmd0aDsgdEluZGV4KyspIHtcbiAgICAgICAgaWYgKHRoaXMuZm9ybS50YWJzW3RJbmRleF0ud2lkZ2V0cyAmJiB0aGlzLmZvcm0udGFic1t0SW5kZXhdLndpZGdldHMubGVuZ3RoID4gMCAmJiB0SW5kZXggPT0gdGFiSW5kZXgpIHtcbiAgICAgICAgICBmb3IgKGxldCB3aWRnZXQgb2YgdGhpcy5mb3JtLnRhYnNbdEluZGV4XS53aWRnZXRzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHdpZGdldCAmJlxuICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgd2lkZ2V0LnBlcm1pc3Npb24gPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgIHdpZGdldC5wZXJtaXNzaW9uICYmICh0aGlzLmFiaWxpdHkuY2FuKHdpZGdldC5wZXJtaXNzaW9uWydhY3Rpb24nXSwgd2lkZ2V0LnBlcm1pc3Npb25bJ3N1YmplY3QnXSkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICB3aWRnZXRJZGVudGlmaWVycyA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgd2lkZ2V0SWRlbnRpZmllcnMuaW5jbHVkZXMoKDxGb3JtPndpZGdldC53aWRnZXQpLmlkZW50aWZpZXIpXG4gICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgaWYgKENvbGxlY3Rpb25VdGlscy5pc0VtcHR5KHJvd3NbckluZGV4XSkpIHtcbiAgICAgICAgICAgICAgICByb3dzW3JJbmRleF0gPSBuZXcgQXJyYXk8Q3J1ZFdpZGdldD4oKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGxldCBjb2xDb3VudCA9IDA7XG4gICAgICAgICAgICAgIHJvd3NbckluZGV4XS5mb3JFYWNoKHJvdyA9PiBjb2xDb3VudCArPSByb3cuY29sU3Bhbik7XG5cbiAgICAgICAgICAgICAgaWYgKGNvbENvdW50IDwgMikge1xuICAgICAgICAgICAgICAgIHJvd3NbckluZGV4XS5wdXNoKHdpZGdldCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgckluZGV4Kys7XG4gICAgICAgICAgICAgICAgcm93c1tySW5kZXhdID0gbmV3IEFycmF5PENydWRXaWRnZXQ+KCk7XG4gICAgICAgICAgICAgICAgcm93c1tySW5kZXhdLnB1c2god2lkZ2V0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKHJvd3MpO1xuICAgIHJldHVybiByb3dzO1xuICB9XG5cbiAgZGlzcGxheVdpZGdldCh3aWRnZXQ6IENydWRXaWRnZXQsIHN1cHBvcnRpbmdSZWNvcmQ6IGFueSwgcmVjb3JkOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gRGVwZW5kZW50VXRpbHMuZGlzcGxheURlcGVuZGVuY3lGaWVsZCh3aWRnZXQuZGVwZW5kZW50T25GaWVsZHMsIHN1cHBvcnRpbmdSZWNvcmQsIHJlY29yZCk7XG4gIH1cblxuICAvLyBmaWx0ZXJGb3JtcygpIHtcbiAgLy8gICBsZXQgZm9ybUlkZW50aWZpZXJzOiBBcnJheTxzdHJpbmc+O1xuICAvLyAgIC8vICAgIGxldCBtYXBwZWRGb3JtRGlzcGxheU1vZGU6IEZvcm1EaWFwbHlNb2RlO1xuXG4gIC8vICAgaWYgKHRoaXMuYWN0aW9uUGFnZXMgJiYgdGhpcy5hY3Rpb25zKSB7XG4gIC8vICAgICBmb3IgKGxldCBhY3Rpb25QYWdlIG9mIHRoaXMuYWN0aW9uUGFnZXMpIHtcbiAgLy8gICAgICAgZm9yIChsZXQgYWN0aW9uIG9mIHRoaXMuYWN0aW9ucykge1xuICAvLyAgICAgICAgIGlmIChhY3Rpb25QYWdlLmJ1dHRvbklkZW50aWZpZXIgPT0gYWN0aW9uLmlkZW50aWZpZXIpIHtcbiAgLy8gICAgICAgICAgIGZvcm1JZGVudGlmaWVycyA9IGFjdGlvblBhZ2UuYXNzb2NpYXRlZEZvcm1JZGVudGlmaWVycztcbiAgLy8gICAgICAgICAgIC8vICAgICAgICAgICAgbWFwcGVkRm9ybURpc3BsYXlNb2RlID0gYWN0aW9uUGFnZS5mb3JtRGlzcGxheU1vZGU7XG4gIC8vICAgICAgICAgfVxuICAvLyAgICAgICB9XG4gIC8vICAgICB9XG5cbiAgLy8gICAgIGlmICh0aGlzLmZvcm0gJiYgdGhpcy5mb3JtLnRhYnMgJiYgIUNvbGxlY3Rpb25VdGlscy5pc0VtcHR5KGZvcm1JZGVudGlmaWVycykpIHtcbiAgLy8gICAgICAgZm9yIChsZXQgdGFiIG9mIHRoaXMuZm9ybS50YWJzKSB7XG4gIC8vICAgICAgICAgZm9yIChsZXQgd2lkZ2V0IG9mIHRhYi53aWRnZXRzKSB7XG4gIC8vICAgICAgICAgICBpZiAoXG4gIC8vICAgICAgICAgICAgIGZvcm1JZGVudGlmaWVycy5pbmRleE9mKCg8Rm9ybT53aWRnZXQud2lkZ2V0KS5pZGVudGlmaWVyKSA+IC0xICYmXG4gIC8vICAgICAgICAgICAgICh0aGlzLmRpc3BsYXlNb2RlID09IG51bGwgfHwgdGhpcy5kaXNwbGF5TW9kZSA9PSAoPEZvcm0+d2lkZ2V0LndpZGdldCkuZGlzcGxheU1vZGUpXG4gIC8vICAgICAgICAgICApIHtcbiAgLy8gICAgICAgICAgICAgd2lkZ2V0LndpZGdldFsnZGlzcGxheSddID0gdHJ1ZTtcbiAgLy8gICAgICAgICAgIH1cbiAgLy8gICAgICAgICB9XG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIHRoaXMuZm9ybS50YWJzLmZvckVhY2godGFiID0+IHRhYi53aWRnZXRzLmZvckVhY2god2lkZ2V0ID0+IHdpZGdldC53aWRnZXRbJ2Rpc3BsYXknXSA9IHRydWUpKTtcbiAgLy8gICAgIH1cbiAgLy8gICB9IGVsc2Uge1xuICAvLyAgICAgdGhpcy5mb3JtLnRhYnMuZm9yRWFjaCh0YWIgPT4gdGFiLndpZGdldHMuZm9yRWFjaCh3aWRnZXQgPT4gd2lkZ2V0LndpZGdldFsnZGlzcGxheSddID0gdHJ1ZSkpO1xuICAvLyAgIH1cblxuICAvLyAgIHRoaXMuZm9ybS50YWJzLmZvckVhY2godGFiID0+IHtcbiAgLy8gICAgIGxldCBkaXNwbGF5OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLy8gICAgIHRhYi53aWRnZXRzLmZvckVhY2god2lkZ2V0ID0+IHtcbiAgLy8gICAgICAgaWYgKHdpZGdldC53aWRnZXRbJ2Rpc3BsYXknXSkge1xuICAvLyAgICAgICAgIGRpc3BsYXkgPSB0cnVlO1xuICAvLyAgICAgICB9XG4gIC8vICAgICAgIHRhYlsnZGlzcGxheSddID0gZGlzcGxheTtcbiAgLy8gICAgIH0pO1xuXG4gIC8vICAgICBpZiAodGFiWydkaXNwbGF5J10pIHtcbiAgLy8gICAgICAgdGhpcy5mb3JtVGFiTGVuZ3RoKys7XG4gIC8vICAgICAgIHRoaXMuZmlsdGVyZWRUYWJzLnB1c2godGFiKTtcbiAgLy8gICAgIH1cbiAgLy8gICB9KTtcbiAgLy8gfVxuXG4gIGFkZFdpZGdldEJ1dHRvbihpZGVudGlmaWVyOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcsIGljb246IHN0cmluZywgY29sb3I6IEJ1dHRvbkNvbG9yKTogQnV0dG9uIHtcbiAgICBsZXQgYnV0dG9uQ29uZmlnOiBCdXR0b24gPSB7XG4gICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgdHlwZTogQnV0dG9uVHlwZS5HSE9TVCxcbiAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgIHNpemU6IEJ1dHRvblNpemUuU01BTEwsXG4gICAgICBpY29uOiBpY29uLFxuICAgICAgb25seUljb246IGZhbHNlLFxuICAgICAgYWx3YXlzRW5hYmxlOiB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1dHRvbkNvbmZpZztcbiAgfVxuXG4gIGZpZWxkQ2hhbmdlKGZpZWxkQ2hhbmdlOiBGaWVsZENoYW5nZSkge1xuICAgIGNvbnNvbGUubG9nKGZpZWxkQ2hhbmdlKTtcbiAgICB0aGlzLm9uRmllbGRDaGFuZ2UuZW1pdChmaWVsZENoYW5nZSk7XG4gIH1cblxuICBmb3JtQ2hhbmdlKGZvcm06IGFueSkge1xuICAgIHRoaXMub25Gb3JtQ2hhbmdlLmVtaXQoZm9ybSk7XG4gIH1cblxuICBidXR0b25DbGljayhhY3Rpb246IEFjdGlvbikge1xuICAgIGNvbnNvbGUubG9nKGFjdGlvbik7XG4gICAgaWYgKGFjdGlvbi5hY3Rpb24gPT0gXCJhZGRXaWRnZXRcIikge1xuICAgICAgaWYgKHRoaXMucmVjb3JkW2FjdGlvbi5zb3VyY2VJZGVudGlmaWVyXSAmJiB0aGlzLnJlY29yZFthY3Rpb24uc291cmNlSWRlbnRpZmllcl0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAoPEFycmF5PGFueT4+dGhpcy5yZWNvcmRbYWN0aW9uLnNvdXJjZUlkZW50aWZpZXJdKS5wdXNoKHt9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVjb3JkW2FjdGlvbi5zb3VyY2VJZGVudGlmaWVyXSA9IG5ldyBBcnJheTxhbnk+KCk7XG4gICAgICAgIHRoaXMucmVjb3JkW2FjdGlvbi5zb3VyY2VJZGVudGlmaWVyXS5wdXNoKHt9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5vbkJ1dHRvbkNsaWNrLmVtaXQoYWN0aW9uKTtcbiAgfVxuXG4gIG9uVGFiQ2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZyhldmVudCk7XG5cbiAgICB0aGlzLnNldENvbmZpZ0FzUGVyVGFiKHRoaXMuZ2V0VGFiSWRlbnRpZmllcihldmVudC50YWIudGV4dExhYmVsKSk7XG4gIH1cblxuICBvbkFjY29yZGlhbkNoYW5nZShldmVudCkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgfVxuXG4gIG9uU29ydChldmVudDogYW55KSB7XG4gICAgY29uc29sZS5sb2coZXZlbnQpO1xuICAgIHRoaXMub25Tb3J0Q2xpY2suZW1pdChldmVudCk7XG4gIH1cblxuICBvblBhZ2UoZXZlbnQ6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgICB0aGlzLm9uUGFnZUNsaWNrLmVtaXQoZXZlbnQpO1xuICB9XG59XG4iXX0=